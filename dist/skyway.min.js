/* skywayjs Copyright(c) 2016 NTT Communications Corporation      *
 * peerjs Copyright(c) 2013 Michelle Bu <michelle@michellebu.com> */
!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,e.Peer=t()}}(function(){var t;return function e(t,n,r){function i(a,s){if(!n[a]){if(!t[a]){var u="function"==typeof require&&require;if(!s&&u)return u(a,!0);if(o)return o(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var f=n[a]={exports:{}};t[a][0].call(f.exports,function(e){var n=t[a][1][e];return i(n?n:e)},f,f.exports,e,t,n,r)}return n[a].exports}for(var o="function"==typeof require&&require,a=0;a<r.length;a++)i(r[a]);return i}({1:[function(t,e,n){function r(t,e,n){function r(t,i){if(r.count<=0)throw new Error("after called too many times");--r.count,t?(o=!0,e(t),e=n):0!==r.count||o||e(null,i)}var o=!1;return n=n||i,r.count=t,0===t?e():r}function i(){}e.exports=r},{}],2:[function(t,e,n){e.exports=function(t,e,n){var r=t.byteLength;if(e=e||0,n=n||r,t.slice)return t.slice(e,n);if(0>e&&(e+=r),0>n&&(n+=r),n>r&&(n=r),e>=r||e>=n||0===r)return new ArrayBuffer(0);for(var i=new Uint8Array(t),o=new Uint8Array(n-e),a=e,s=0;n>a;a++,s++)o[s]=i[a];return o.buffer}},{}],3:[function(t,e,n){function r(t){t=t||{},this.ms=t.min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=t.jitter>0&&t.jitter<=1?t.jitter:0,this.attempts=0}e.exports=r,r.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),n=Math.floor(e*this.jitter*t);t=0==(1&Math.floor(10*e))?t-n:t+n}return 0|Math.min(t,this.max)},r.prototype.reset=function(){this.attempts=0},r.prototype.setMin=function(t){this.ms=t},r.prototype.setMax=function(t){this.max=t},r.prototype.setJitter=function(t){this.jitter=t}},{}],4:[function(t,e,n){!function(t){"use strict";n.encode=function(e){var n,r=new Uint8Array(e),i=r.length,o="";for(n=0;i>n;n+=3)o+=t[r[n]>>2],o+=t[(3&r[n])<<4|r[n+1]>>4],o+=t[(15&r[n+1])<<2|r[n+2]>>6],o+=t[63&r[n+2]];return i%3===2?o=o.substring(0,o.length-1)+"=":i%3===1&&(o=o.substring(0,o.length-2)+"=="),o},n.decode=function(e){var n,r,i,o,a,s=.75*e.length,u=e.length,c=0;"="===e[e.length-1]&&(s--,"="===e[e.length-2]&&s--);var f=new ArrayBuffer(s),l=new Uint8Array(f);for(n=0;u>n;n+=4)r=t.indexOf(e[n]),i=t.indexOf(e[n+1]),o=t.indexOf(e[n+2]),a=t.indexOf(e[n+3]),l[c++]=r<<2|i>>4,l[c++]=(15&i)<<4|o>>2,l[c++]=(3&o)<<6|63&a;return f}}("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/")},{}],5:[function(t,e,n){var r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";!function(t){"use strict";function e(t){var e=t.charCodeAt(0);return e===a||e===l?62:e===s||e===h?63:u>e?-1:u+10>e?e-u+26+26:f+26>e?e-f:c+26>e?e-c+26:void 0}function n(t){function n(t){c[l++]=t}var r,i,a,s,u,c;if(t.length%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var f=t.length;u="="===t.charAt(f-2)?2:"="===t.charAt(f-1)?1:0,c=new o(3*t.length/4-u),a=u>0?t.length-4:t.length;var l=0;for(r=0,i=0;a>r;r+=4,i+=3)s=e(t.charAt(r))<<18|e(t.charAt(r+1))<<12|e(t.charAt(r+2))<<6|e(t.charAt(r+3)),n((16711680&s)>>16),n((65280&s)>>8),n(255&s);return 2===u?(s=e(t.charAt(r))<<2|e(t.charAt(r+1))>>4,n(255&s)):1===u&&(s=e(t.charAt(r))<<10|e(t.charAt(r+1))<<4|e(t.charAt(r+2))>>2,n(s>>8&255),n(255&s)),c}function i(t){function e(t){return r.charAt(t)}function n(t){return e(t>>18&63)+e(t>>12&63)+e(t>>6&63)+e(63&t)}var i,o,a,s=t.length%3,u="";for(i=0,a=t.length-s;a>i;i+=3)o=(t[i]<<16)+(t[i+1]<<8)+t[i+2],u+=n(o);switch(s){case 1:o=t[t.length-1],u+=e(o>>2),u+=e(o<<4&63),u+="==";break;case 2:o=(t[t.length-2]<<8)+t[t.length-1],u+=e(o>>10),u+=e(o>>4&63),u+=e(o<<2&63),u+="="}return u}var o="undefined"!=typeof Uint8Array?Uint8Array:Array,a="+".charCodeAt(0),s="/".charCodeAt(0),u="0".charCodeAt(0),c="a".charCodeAt(0),f="A".charCodeAt(0),l="-".charCodeAt(0),h="_".charCodeAt(0);t.toByteArray=n,t.fromByteArray=i}("undefined"==typeof n?this.base64js={}:n)},{}],6:[function(t,e,n){(function(t){function n(t){for(var e=0;e<t.length;e++){var n=t[e];if(n.buffer instanceof ArrayBuffer){var r=n.buffer;if(n.byteLength!==r.byteLength){var i=new Uint8Array(n.byteLength);i.set(new Uint8Array(r,n.byteOffset,n.byteLength)),r=i.buffer}t[e]=r}}}function r(t,e){e=e||{};var r=new o;n(t);for(var i=0;i<t.length;i++)r.append(t[i]);return e.type?r.getBlob(e.type):r.getBlob()}function i(t,e){return n(t),new Blob(t,e||{})}var o=t.BlobBuilder||t.WebKitBlobBuilder||t.MSBlobBuilder||t.MozBlobBuilder,a=function(){try{var t=new Blob(["hi"]);return 2===t.size}catch(e){return!1}}(),s=a&&function(){try{var t=new Blob([new Uint8Array([1,2])]);return 2===t.size}catch(e){return!1}}(),u=o&&o.prototype.append&&o.prototype.getBlob;e.exports=function(){return a?s?t.Blob:i:u?r:void 0}()}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],7:[function(t,e,n){},{}],8:[function(t,e,n){(function(e){"use strict";function r(){function t(){}try{var e=new Uint8Array(1);return e.foo=function(){return 42},e.constructor=t,42===e.foo()&&e.constructor===t&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(n){return!1}}function i(){return o.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function o(t){return this instanceof o?(o.TYPED_ARRAY_SUPPORT||(this.length=0,this.parent=void 0),"number"==typeof t?a(this,t):"string"==typeof t?s(this,t,arguments.length>1?arguments[1]:"utf8"):u(this,t)):arguments.length>1?new o(t,arguments[1]):new o(t)}function a(t,e){if(t=y(t,0>e?0:0|g(e)),!o.TYPED_ARRAY_SUPPORT)for(var n=0;e>n;n++)t[n]=0;return t}function s(t,e,n){("string"!=typeof n||""===n)&&(n="utf8");var r=0|_(e,n);return t=y(t,r),t.write(e,n),t}function u(t,e){if(o.isBuffer(e))return c(t,e);if(X(e))return f(t,e);if(null==e)throw new TypeError("must start with number, buffer, array or string");if("undefined"!=typeof ArrayBuffer){if(e.buffer instanceof ArrayBuffer)return l(t,e);if(e instanceof ArrayBuffer)return h(t,e)}return e.length?p(t,e):d(t,e)}function c(t,e){var n=0|g(e.length);return t=y(t,n),e.copy(t,0,0,n),t}function f(t,e){var n=0|g(e.length);t=y(t,n);for(var r=0;n>r;r+=1)t[r]=255&e[r];return t}function l(t,e){var n=0|g(e.length);t=y(t,n);for(var r=0;n>r;r+=1)t[r]=255&e[r];return t}function h(t,e){return o.TYPED_ARRAY_SUPPORT?(e.byteLength,t=o._augment(new Uint8Array(e))):t=l(t,new Uint8Array(e)),t}function p(t,e){var n=0|g(e.length);t=y(t,n);for(var r=0;n>r;r+=1)t[r]=255&e[r];return t}function d(t,e){var n,r=0;"Buffer"===e.type&&X(e.data)&&(n=e.data,r=0|g(n.length)),t=y(t,r);for(var i=0;r>i;i+=1)t[i]=255&n[i];return t}function y(t,e){o.TYPED_ARRAY_SUPPORT?(t=o._augment(new Uint8Array(e)),t.__proto__=o.prototype):(t.length=e,t._isBuffer=!0);var n=0!==e&&e<=o.poolSize>>>1;return n&&(t.parent=K),t}function g(t){if(t>=i())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i().toString(16)+" bytes");return 0|t}function v(t,e){if(!(this instanceof v))return new v(t,e);var n=new o(t,e);return delete n.parent,n}function _(t,e){"string"!=typeof t&&(t=""+t);var n=t.length;if(0===n)return 0;for(var r=!1;;)switch(e){case"ascii":case"binary":case"raw":case"raws":return n;case"utf8":case"utf-8":return F(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return H(t).length;default:if(r)return F(t).length;e=(""+e).toLowerCase(),r=!0}}function m(t,e,n){var r=!1;if(e=0|e,n=void 0===n||n===1/0?this.length:0|n,t||(t="utf8"),0>e&&(e=0),n>this.length&&(n=this.length),e>=n)return"";for(;;)switch(t){case"hex":return R(this,e,n);case"utf8":case"utf-8":return C(this,e,n);case"ascii":return O(this,e,n);case"binary":return T(this,e,n);case"base64":return x(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return P(this,e,n);default:if(r)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}}function b(t,e,n,r){n=Number(n)||0;var i=t.length-n;r?(r=Number(r),r>i&&(r=i)):r=i;var o=e.length;if(o%2!==0)throw new Error("Invalid hex string");r>o/2&&(r=o/2);for(var a=0;r>a;a++){var s=parseInt(e.substr(2*a,2),16);if(isNaN(s))throw new Error("Invalid hex string");t[n+a]=s}return a}function w(t,e,n,r){return J(F(e,t.length-n),t,n,r)}function k(t,e,n,r){return J(V(e),t,n,r)}function E(t,e,n,r){return k(t,e,n,r)}function S(t,e,n,r){return J(H(e),t,n,r)}function A(t,e,n,r){return J(W(e,t.length-n),t,n,r)}function x(t,e,n){return 0===e&&n===t.length?$.fromByteArray(t):$.fromByteArray(t.slice(e,n))}function C(t,e,n){n=Math.min(t.length,n);for(var r=[],i=e;n>i;){var o=t[i],a=null,s=o>239?4:o>223?3:o>191?2:1;if(n>=i+s){var u,c,f,l;switch(s){case 1:128>o&&(a=o);break;case 2:u=t[i+1],128===(192&u)&&(l=(31&o)<<6|63&u,l>127&&(a=l));break;case 3:u=t[i+1],c=t[i+2],128===(192&u)&&128===(192&c)&&(l=(15&o)<<12|(63&u)<<6|63&c,l>2047&&(55296>l||l>57343)&&(a=l));break;case 4:u=t[i+1],c=t[i+2],f=t[i+3],128===(192&u)&&128===(192&c)&&128===(192&f)&&(l=(15&o)<<18|(63&u)<<12|(63&c)<<6|63&f,l>65535&&1114112>l&&(a=l))}}null===a?(a=65533,s=1):a>65535&&(a-=65536,r.push(a>>>10&1023|55296),a=56320|1023&a),r.push(a),i+=s}return B(r)}function B(t){var e=t.length;if(Z>=e)return String.fromCharCode.apply(String,t);for(var n="",r=0;e>r;)n+=String.fromCharCode.apply(String,t.slice(r,r+=Z));return n}function O(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;n>i;i++)r+=String.fromCharCode(127&t[i]);return r}function T(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;n>i;i++)r+=String.fromCharCode(t[i]);return r}function R(t,e,n){var r=t.length;(!e||0>e)&&(e=0),(!n||0>n||n>r)&&(n=r);for(var i="",o=e;n>o;o++)i+=Y(t[o]);return i}function P(t,e,n){for(var r=t.slice(e,n),i="",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function I(t,e,n){if(t%1!==0||0>t)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function j(t,e,n,r,i,a){if(!o.isBuffer(t))throw new TypeError("buffer must be a Buffer instance");if(e>i||a>e)throw new RangeError("value is out of bounds");if(n+r>t.length)throw new RangeError("index out of range")}function L(t,e,n,r){0>e&&(e=65535+e+1);for(var i=0,o=Math.min(t.length-n,2);o>i;i++)t[n+i]=(e&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function M(t,e,n,r){0>e&&(e=4294967295+e+1);for(var i=0,o=Math.min(t.length-n,4);o>i;i++)t[n+i]=e>>>8*(r?i:3-i)&255}function N(t,e,n,r,i,o){if(e>i||o>e)throw new RangeError("value is out of bounds");if(n+r>t.length)throw new RangeError("index out of range");if(0>n)throw new RangeError("index out of range")}function U(t,e,n,r,i){return i||N(t,e,n,4,3.4028234663852886e38,-3.4028234663852886e38),G.write(t,e,n,r,23,4),n+4}function D(t,e,n,r,i){return i||N(t,e,n,8,1.7976931348623157e308,-1.7976931348623157e308),G.write(t,e,n,r,52,8),n+8}function z(t){if(t=q(t).replace(tt,""),t.length<2)return"";for(;t.length%4!==0;)t+="=";return t}function q(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function Y(t){return 16>t?"0"+t.toString(16):t.toString(16)}function F(t,e){e=e||1/0;for(var n,r=t.length,i=null,o=[],a=0;r>a;a++){if(n=t.charCodeAt(a),n>55295&&57344>n){if(!i){if(n>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(a+1===r){(e-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(56320>n){(e-=3)>-1&&o.push(239,191,189),i=n;continue}n=(i-55296<<10|n-56320)+65536}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,128>n){if((e-=1)<0)break;o.push(n)}else if(2048>n){if((e-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(65536>n){if((e-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(1114112>n))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function V(t){for(var e=[],n=0;n<t.length;n++)e.push(255&t.charCodeAt(n));return e}function W(t,e){for(var n,r,i,o=[],a=0;a<t.length&&!((e-=2)<0);a++)n=t.charCodeAt(a),r=n>>8,i=n%256,o.push(i),o.push(r);return o}function H(t){return $.toByteArray(z(t))}function J(t,e,n,r){for(var i=0;r>i&&!(i+n>=e.length||i>=t.length);i++)e[i+n]=t[i];return i}var $=t("base64-js"),G=t("ieee754"),X=t("isarray");n.Buffer=o,n.SlowBuffer=v,n.INSPECT_MAX_BYTES=50,o.poolSize=8192;var K={};o.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:r(),o.TYPED_ARRAY_SUPPORT?(o.prototype.__proto__=Uint8Array.prototype,o.__proto__=Uint8Array):(o.prototype.length=void 0,o.prototype.parent=void 0),o.isBuffer=function(t){return!(null==t||!t._isBuffer)},o.compare=function(t,e){if(!o.isBuffer(t)||!o.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var n=t.length,r=e.length,i=0,a=Math.min(n,r);a>i&&t[i]===e[i];)++i;return i!==a&&(n=t[i],r=e[i]),r>n?-1:n>r?1:0},o.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},o.concat=function(t,e){if(!X(t))throw new TypeError("list argument must be an Array of Buffers.");if(0===t.length)return new o(0);var n;if(void 0===e)for(e=0,n=0;n<t.length;n++)e+=t[n].length;var r=new o(e),i=0;for(n=0;n<t.length;n++){var a=t[n];a.copy(r,i),i+=a.length}return r},o.byteLength=_,o.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?C(this,0,t):m.apply(this,arguments)},o.prototype.equals=function(t){if(!o.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t?!0:0===o.compare(this,t)},o.prototype.inspect=function(){var t="",e=n.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,e).match(/.{2}/g).join(" "),this.length>e&&(t+=" ... ")),"<Buffer "+t+">"},o.prototype.compare=function(t){if(!o.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t?0:o.compare(this,t)},o.prototype.indexOf=function(t,e){function n(t,e,n){for(var r=-1,i=0;n+i<t.length;i++)if(t[n+i]===e[-1===r?0:i-r]){if(-1===r&&(r=i),i-r+1===e.length)return n+r}else r=-1;return-1}if(e>2147483647?e=2147483647:-2147483648>e&&(e=-2147483648),e>>=0,0===this.length)return-1;if(e>=this.length)return-1;if(0>e&&(e=Math.max(this.length+e,0)),"string"==typeof t)return 0===t.length?-1:String.prototype.indexOf.call(this,t,e);if(o.isBuffer(t))return n(this,t,e);if("number"==typeof t)return o.TYPED_ARRAY_SUPPORT&&"function"===Uint8Array.prototype.indexOf?Uint8Array.prototype.indexOf.call(this,t,e):n(this,[t],e);throw new TypeError("val must be string, number or Buffer")},o.prototype.get=function(t){return console.log(".get() is deprecated. Access using array indexes instead."),this.readUInt8(t)},o.prototype.set=function(t,e){return console.log(".set() is deprecated. Access using array indexes instead."),this.writeUInt8(t,e)},o.prototype.write=function(t,e,n,r){if(void 0===e)r="utf8",n=this.length,e=0;else if(void 0===n&&"string"==typeof e)r=e,n=this.length,e=0;else if(isFinite(e))e=0|e,isFinite(n)?(n=0|n,void 0===r&&(r="utf8")):(r=n,n=void 0);else{var i=r;r=e,e=0|n,n=i}var o=this.length-e;if((void 0===n||n>o)&&(n=o),t.length>0&&(0>n||0>e)||e>this.length)throw new RangeError("attempt to write outside buffer bounds");r||(r="utf8");for(var a=!1;;)switch(r){case"hex":return b(this,t,e,n);case"utf8":case"utf-8":return w(this,t,e,n);case"ascii":return k(this,t,e,n);case"binary":return E(this,t,e,n);case"base64":return S(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return A(this,t,e,n);default:if(a)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),a=!0}},o.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var Z=4096;o.prototype.slice=function(t,e){var n=this.length;t=~~t,e=void 0===e?n:~~e,0>t?(t+=n,0>t&&(t=0)):t>n&&(t=n),0>e?(e+=n,0>e&&(e=0)):e>n&&(e=n),t>e&&(e=t);var r;if(o.TYPED_ARRAY_SUPPORT)r=o._augment(this.subarray(t,e));else{var i=e-t;r=new o(i,void 0);for(var a=0;i>a;a++)r[a]=this[a+t]}return r.length&&(r.parent=this.parent||this),r},o.prototype.readUIntLE=function(t,e,n){t=0|t,e=0|e,n||I(t,e,this.length);for(var r=this[t],i=1,o=0;++o<e&&(i*=256);)r+=this[t+o]*i;return r},o.prototype.readUIntBE=function(t,e,n){t=0|t,e=0|e,n||I(t,e,this.length);for(var r=this[t+--e],i=1;e>0&&(i*=256);)r+=this[t+--e]*i;return r},o.prototype.readUInt8=function(t,e){return e||I(t,1,this.length),this[t]},o.prototype.readUInt16LE=function(t,e){return e||I(t,2,this.length),this[t]|this[t+1]<<8},o.prototype.readUInt16BE=function(t,e){return e||I(t,2,this.length),this[t]<<8|this[t+1]},o.prototype.readUInt32LE=function(t,e){return e||I(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},o.prototype.readUInt32BE=function(t,e){return e||I(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},o.prototype.readIntLE=function(t,e,n){t=0|t,e=0|e,n||I(t,e,this.length);for(var r=this[t],i=1,o=0;++o<e&&(i*=256);)r+=this[t+o]*i;return i*=128,r>=i&&(r-=Math.pow(2,8*e)),r},o.prototype.readIntBE=function(t,e,n){t=0|t,e=0|e,n||I(t,e,this.length);for(var r=e,i=1,o=this[t+--r];r>0&&(i*=256);)o+=this[t+--r]*i;return i*=128,o>=i&&(o-=Math.pow(2,8*e)),o},o.prototype.readInt8=function(t,e){return e||I(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},o.prototype.readInt16LE=function(t,e){e||I(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},o.prototype.readInt16BE=function(t,e){e||I(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},o.prototype.readInt32LE=function(t,e){return e||I(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},o.prototype.readInt32BE=function(t,e){return e||I(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},o.prototype.readFloatLE=function(t,e){return e||I(t,4,this.length),G.read(this,t,!0,23,4)},o.prototype.readFloatBE=function(t,e){return e||I(t,4,this.length),G.read(this,t,!1,23,4)},o.prototype.readDoubleLE=function(t,e){return e||I(t,8,this.length),G.read(this,t,!0,52,8)},o.prototype.readDoubleBE=function(t,e){return e||I(t,8,this.length),G.read(this,t,!1,52,8)},o.prototype.writeUIntLE=function(t,e,n,r){t=+t,e=0|e,n=0|n,r||j(this,t,e,n,Math.pow(2,8*n),0);var i=1,o=0;for(this[e]=255&t;++o<n&&(i*=256);)this[e+o]=t/i&255;return e+n},o.prototype.writeUIntBE=function(t,e,n,r){t=+t,e=0|e,n=0|n,r||j(this,t,e,n,Math.pow(2,8*n),0);var i=n-1,o=1;for(this[e+i]=255&t;--i>=0&&(o*=256);)this[e+i]=t/o&255;return e+n},o.prototype.writeUInt8=function(t,e,n){return t=+t,e=0|e,n||j(this,t,e,1,255,0),o.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},o.prototype.writeUInt16LE=function(t,e,n){return t=+t,e=0|e,n||j(this,t,e,2,65535,0),o.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):L(this,t,e,!0),e+2},o.prototype.writeUInt16BE=function(t,e,n){return t=+t,e=0|e,n||j(this,t,e,2,65535,0),o.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):L(this,t,e,!1),e+2},o.prototype.writeUInt32LE=function(t,e,n){return t=+t,e=0|e,n||j(this,t,e,4,4294967295,0),o.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):M(this,t,e,!0),e+4},o.prototype.writeUInt32BE=function(t,e,n){return t=+t,e=0|e,n||j(this,t,e,4,4294967295,0),o.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):M(this,t,e,!1),e+4},o.prototype.writeIntLE=function(t,e,n,r){if(t=+t,e=0|e,!r){var i=Math.pow(2,8*n-1);j(this,t,e,n,i-1,-i)}var o=0,a=1,s=0>t?1:0;for(this[e]=255&t;++o<n&&(a*=256);)this[e+o]=(t/a>>0)-s&255;return e+n},o.prototype.writeIntBE=function(t,e,n,r){if(t=+t,e=0|e,!r){var i=Math.pow(2,8*n-1);j(this,t,e,n,i-1,-i)}var o=n-1,a=1,s=0>t?1:0;for(this[e+o]=255&t;--o>=0&&(a*=256);)this[e+o]=(t/a>>0)-s&255;return e+n},o.prototype.writeInt8=function(t,e,n){return t=+t,e=0|e,n||j(this,t,e,1,127,-128),o.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),0>t&&(t=255+t+1),this[e]=255&t,e+1},o.prototype.writeInt16LE=function(t,e,n){return t=+t,e=0|e,n||j(this,t,e,2,32767,-32768),o.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):L(this,t,e,!0),e+2},o.prototype.writeInt16BE=function(t,e,n){return t=+t,e=0|e,n||j(this,t,e,2,32767,-32768),o.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):L(this,t,e,!1),e+2},o.prototype.writeInt32LE=function(t,e,n){return t=+t,e=0|e,n||j(this,t,e,4,2147483647,-2147483648),o.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):M(this,t,e,!0),e+4},o.prototype.writeInt32BE=function(t,e,n){return t=+t,e=0|e,n||j(this,t,e,4,2147483647,-2147483648),0>t&&(t=4294967295+t+1),o.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):M(this,t,e,!1),e+4},o.prototype.writeFloatLE=function(t,e,n){return U(this,t,e,!0,n)},o.prototype.writeFloatBE=function(t,e,n){return U(this,t,e,!1,n)},o.prototype.writeDoubleLE=function(t,e,n){return D(this,t,e,!0,n)},o.prototype.writeDoubleBE=function(t,e,n){return D(this,t,e,!1,n)},o.prototype.copy=function(t,e,n,r){if(n||(n=0),r||0===r||(r=this.length),e>=t.length&&(e=t.length),e||(e=0),r>0&&n>r&&(r=n),r===n)return 0;if(0===t.length||0===this.length)return 0;if(0>e)throw new RangeError("targetStart out of bounds");if(0>n||n>=this.length)throw new RangeError("sourceStart out of bounds");if(0>r)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),t.length-e<r-n&&(r=t.length-e+n);var i,a=r-n;if(this===t&&e>n&&r>e)for(i=a-1;i>=0;i--)t[i+e]=this[i+n];else if(1e3>a||!o.TYPED_ARRAY_SUPPORT)for(i=0;a>i;i++)t[i+e]=this[i+n];else t._set(this.subarray(n,n+a),e);return a},o.prototype.fill=function(t,e,n){if(t||(t=0),e||(e=0),n||(n=this.length),e>n)throw new RangeError("end < start");if(n!==e&&0!==this.length){if(0>e||e>=this.length)throw new RangeError("start out of bounds");if(0>n||n>this.length)throw new RangeError("end out of bounds");var r;if("number"==typeof t)for(r=e;n>r;r++)this[r]=t;else{var i=F(t.toString()),o=i.length;for(r=e;n>r;r++)this[r]=i[r%o]}return this}},o.prototype.toArrayBuffer=function(){if("undefined"!=typeof Uint8Array){if(o.TYPED_ARRAY_SUPPORT)return new o(this).buffer;for(var t=new Uint8Array(this.length),e=0,n=t.length;n>e;e+=1)t[e]=this[e];return t.buffer}throw new TypeError("Buffer.toArrayBuffer not supported in this browser")};var Q=o.prototype;o._augment=function(t){return t.constructor=o,t._isBuffer=!0,t._set=t.set,t.get=Q.get,t.set=Q.set,t.write=Q.write,t.toString=Q.toString,t.toLocaleString=Q.toString,t.toJSON=Q.toJSON,t.equals=Q.equals,t.compare=Q.compare,t.indexOf=Q.indexOf,t.copy=Q.copy,t.slice=Q.slice,t.readUIntLE=Q.readUIntLE,t.readUIntBE=Q.readUIntBE,t.readUInt8=Q.readUInt8,t.readUInt16LE=Q.readUInt16LE,t.readUInt16BE=Q.readUInt16BE,t.readUInt32LE=Q.readUInt32LE,t.readUInt32BE=Q.readUInt32BE,t.readIntLE=Q.readIntLE,t.readIntBE=Q.readIntBE,t.readInt8=Q.readInt8,t.readInt16LE=Q.readInt16LE,t.readInt16BE=Q.readInt16BE,t.readInt32LE=Q.readInt32LE,t.readInt32BE=Q.readInt32BE,t.readFloatLE=Q.readFloatLE,t.readFloatBE=Q.readFloatBE,t.readDoubleLE=Q.readDoubleLE,t.readDoubleBE=Q.readDoubleBE,t.writeUInt8=Q.writeUInt8,t.writeUIntLE=Q.writeUIntLE,t.writeUIntBE=Q.writeUIntBE,t.writeUInt16LE=Q.writeUInt16LE,t.writeUInt16BE=Q.writeUInt16BE,t.writeUInt32LE=Q.writeUInt32LE,t.writeUInt32BE=Q.writeUInt32BE,t.writeIntLE=Q.writeIntLE,t.writeIntBE=Q.writeIntBE,t.writeInt8=Q.writeInt8,t.writeInt16LE=Q.writeInt16LE,t.writeInt16BE=Q.writeInt16BE,t.writeInt32LE=Q.writeInt32LE,t.writeInt32BE=Q.writeInt32BE,t.writeFloatLE=Q.writeFloatLE,t.writeFloatBE=Q.writeFloatBE,t.writeDoubleLE=Q.writeDoubleLE,t.writeDoubleBE=Q.writeDoubleBE,t.fill=Q.fill,t.inspect=Q.inspect,t.toArrayBuffer=Q.toArrayBuffer,t};var tt=/[^+\/0-9A-Za-z-_]/g}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"base64-js":5,ieee754:36,isarray:9}],9:[function(t,e,n){var r={}.toString;e.exports=Array.isArray||function(t){return"[object Array]"==r.call(t)}},{}],10:[function(t,e,n){var r=[].slice;e.exports=function(t,e){if("string"==typeof e&&(e=t[e]),"function"!=typeof e)throw new Error("bind() requires a function");var n=r.call(arguments,2);return function(){return e.apply(t,n.concat(r.call(arguments)))}}},{}],11:[function(t,e,n){function r(t){return t?i(t):void 0}function i(t){for(var e in r.prototype)t[e]=r.prototype[e];return t}e.exports=r,r.prototype.on=r.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks[t]=this._callbacks[t]||[]).push(e),this},r.prototype.once=function(t,e){function n(){r.off(t,n),e.apply(this,arguments)}var r=this;return this._callbacks=this._callbacks||{},n.fn=e,this.on(t,n),this},r.prototype.off=r.prototype.removeListener=r.prototype.removeAllListeners=r.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n=this._callbacks[t];if(!n)return this;if(1==arguments.length)return delete this._callbacks[t],this;for(var r,i=0;i<n.length;i++)if(r=n[i],r===e||r.fn===e){n.splice(i,1);break}return this},r.prototype.emit=function(t){this._callbacks=this._callbacks||{};var e=[].slice.call(arguments,1),n=this._callbacks[t];if(n){n=n.slice(0);for(var r=0,i=n.length;i>r;++r)n[r].apply(this,e)}return this},r.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks[t]||[]},r.prototype.hasListeners=function(t){return!!this.listeners(t).length}},{}],12:[function(t,e,n){e.exports=function(t,e){var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}},{}],13:[function(t,e,n){function r(){return"WebkitAppearance"in document.documentElement.style||window.console&&(console.firebug||console.exception&&console.table)||navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31}function i(){var t=arguments,e=this.useColors;if(t[0]=(e?"%c":"")+this.namespace+(e?" %c":" ")+t[0]+(e?"%c ":" ")+"+"+n.humanize(this.diff),!e)return t;var r="color: "+this.color;t=[t[0],r,"color: inherit"].concat(Array.prototype.slice.call(t,1));var i=0,o=0;return t[0].replace(/%[a-z%]/g,function(t){"%%"!==t&&(i++,"%c"===t&&(o=i))}),t.splice(o,0,r),t}function o(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function a(t){try{null==t?n.storage.removeItem("debug"):n.storage.debug=t}catch(e){}}function s(){var t;try{t=n.storage.debug}catch(e){}return t}function u(){try{return window.localStorage}catch(t){}}n=e.exports=t("./debug"),n.log=o,n.formatArgs=i,n.save=a,n.load=s,n.useColors=r,n.storage="undefined"!=typeof chrome&&"undefined"!=typeof chrome.storage?chrome.storage.local:u(),n.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],n.formatters.j=function(t){return JSON.stringify(t)},n.enable(s())},{"./debug":14}],14:[function(t,e,n){function r(){return n.colors[f++%n.colors.length]}function i(t){function e(){}function i(){var t=i,e=+new Date,o=e-(c||e);t.diff=o,t.prev=c,t.curr=e,c=e,null==t.useColors&&(t.useColors=n.useColors()),null==t.color&&t.useColors&&(t.color=r());var a=Array.prototype.slice.call(arguments);a[0]=n.coerce(a[0]),"string"!=typeof a[0]&&(a=["%o"].concat(a));var s=0;a[0]=a[0].replace(/%([a-z%])/g,function(e,r){if("%%"===e)return e;s++;var i=n.formatters[r];if("function"==typeof i){var o=a[s];e=i.call(t,o),a.splice(s,1),s--}return e}),"function"==typeof n.formatArgs&&(a=n.formatArgs.apply(t,a));var u=i.log||n.log||console.log.bind(console);u.apply(t,a)}e.enabled=!1,i.enabled=!0;var o=n.enabled(t)?i:e;return o.namespace=t,o}function o(t){n.save(t);for(var e=(t||"").split(/[\s,]+/),r=e.length,i=0;r>i;i++)e[i]&&(t=e[i].replace(/\*/g,".*?"),"-"===t[0]?n.skips.push(new RegExp("^"+t.substr(1)+"$")):n.names.push(new RegExp("^"+t+"$")))}function a(){n.enable("")}function s(t){var e,r;for(e=0,r=n.skips.length;r>e;e++)if(n.skips[e].test(t))return!1;for(e=0,r=n.names.length;r>e;e++)if(n.names[e].test(t))return!0;return!1}function u(t){return t instanceof Error?t.stack||t.message:t}n=e.exports=i,n.coerce=u,n.disable=a,n.enable=o,n.enabled=s,n.humanize=t("ms"),n.names=[],n.skips=[],n.formatters={};var c,f=0},{ms:42}],15:[function(t,e,n){e.exports=t("./lib/")},{"./lib/":16}],16:[function(t,e,n){e.exports=t("./socket"),e.exports.parser=t("engine.io-parser")},{"./socket":17,"engine.io-parser":25}],17:[function(t,e,n){(function(n){function r(t,e){if(!(this instanceof r))return new r(t,e);e=e||{},t&&"object"==typeof t&&(e=t,t=null),t?(t=f(t),e.hostname=t.host,e.secure="https"==t.protocol||"wss"==t.protocol,e.port=t.port,t.query&&(e.query=t.query)):e.host&&(e.hostname=f(e.host).host),this.secure=null!=e.secure?e.secure:n.location&&"https:"==location.protocol,e.hostname&&!e.port&&(e.port=this.secure?"443":"80"),this.agent=e.agent||!1,this.hostname=e.hostname||(n.location?location.hostname:"localhost"),this.port=e.port||(n.location&&location.port?location.port:this.secure?443:80),this.query=e.query||{},"string"==typeof this.query&&(this.query=h.decode(this.query)),this.upgrade=!1!==e.upgrade,this.path=(e.path||"/engine.io").replace(/\/$/,"")+"/",this.forceJSONP=!!e.forceJSONP,this.jsonp=!1!==e.jsonp,this.forceBase64=!!e.forceBase64,this.enablesXDR=!!e.enablesXDR,this.timestampParam=e.timestampParam||"t",this.timestampRequests=e.timestampRequests,this.transports=e.transports||["polling","websocket"],this.readyState="",this.writeBuffer=[],this.policyPort=e.policyPort||843,this.rememberUpgrade=e.rememberUpgrade||!1,this.binaryType=null,this.onlyBinaryUpgrades=e.onlyBinaryUpgrades,this.perMessageDeflate=!1!==e.perMessageDeflate?e.perMessageDeflate||{}:!1,!0===this.perMessageDeflate&&(this.perMessageDeflate={}),this.perMessageDeflate&&null==this.perMessageDeflate.threshold&&(this.perMessageDeflate.threshold=1024),this.pfx=e.pfx||null,this.key=e.key||null,this.passphrase=e.passphrase||null,this.cert=e.cert||null,this.ca=e.ca||null,this.ciphers=e.ciphers||null,this.rejectUnauthorized=void 0===e.rejectUnauthorized?null:e.rejectUnauthorized;var i="object"==typeof n&&n;i.global===i&&e.extraHeaders&&Object.keys(e.extraHeaders).length>0&&(this.extraHeaders=e.extraHeaders),this.open()}function i(t){var e={};for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}var o=t("./transports"),a=t("component-emitter"),s=t("debug")("engine.io-client:socket"),u=t("indexof"),c=t("engine.io-parser"),f=t("parseuri"),l=t("parsejson"),h=t("parseqs");e.exports=r,r.priorWebsocketSuccess=!1,a(r.prototype),r.protocol=c.protocol,r.Socket=r,r.Transport=t("./transport"),r.transports=t("./transports"),r.parser=t("engine.io-parser"),r.prototype.createTransport=function(t){s('creating transport "%s"',t);var e=i(this.query);e.EIO=c.protocol,e.transport=t,this.id&&(e.sid=this.id);var n=new o[t]({agent:this.agent,hostname:this.hostname,port:this.port,secure:this.secure,path:this.path,query:e,forceJSONP:this.forceJSONP,jsonp:this.jsonp,forceBase64:this.forceBase64,enablesXDR:this.enablesXDR,timestampRequests:this.timestampRequests,timestampParam:this.timestampParam,policyPort:this.policyPort,socket:this,pfx:this.pfx,key:this.key,passphrase:this.passphrase,cert:this.cert,ca:this.ca,ciphers:this.ciphers,rejectUnauthorized:this.rejectUnauthorized,perMessageDeflate:this.perMessageDeflate,extraHeaders:this.extraHeaders});return n},r.prototype.open=function(){var t;if(this.rememberUpgrade&&r.priorWebsocketSuccess&&-1!=this.transports.indexOf("websocket"))t="websocket";else{if(0===this.transports.length){var e=this;return void setTimeout(function(){e.emit("error","No transports available")},0)}t=this.transports[0]}this.readyState="opening";try{t=this.createTransport(t)}catch(n){return this.transports.shift(),void this.open()}t.open(),this.setTransport(t)},r.prototype.setTransport=function(t){s("setting transport %s",t.name);var e=this;this.transport&&(s("clearing existing transport %s",this.transport.name),this.transport.removeAllListeners()),this.transport=t,t.on("drain",function(){e.onDrain()}).on("packet",function(t){e.onPacket(t)}).on("error",function(t){e.onError(t)}).on("close",function(){e.onClose("transport close")})},r.prototype.probe=function(t){
function e(){if(h.onlyBinaryUpgrades){var e=!this.supportsBinary&&h.transport.supportsBinary;l=l||e}l||(s('probe transport "%s" opened',t),f.send([{type:"ping",data:"probe"}]),f.once("packet",function(e){if(!l)if("pong"==e.type&&"probe"==e.data){if(s('probe transport "%s" pong',t),h.upgrading=!0,h.emit("upgrading",f),!f)return;r.priorWebsocketSuccess="websocket"==f.name,s('pausing current transport "%s"',h.transport.name),h.transport.pause(function(){l||"closed"!=h.readyState&&(s("changing transport and sending upgrade packet"),c(),h.setTransport(f),f.send([{type:"upgrade"}]),h.emit("upgrade",f),f=null,h.upgrading=!1,h.flush())})}else{s('probe transport "%s" failed',t);var n=new Error("probe error");n.transport=f.name,h.emit("upgradeError",n)}}))}function n(){l||(l=!0,c(),f.close(),f=null)}function i(e){var r=new Error("probe error: "+e);r.transport=f.name,n(),s('probe transport "%s" failed because of error: %s',t,e),h.emit("upgradeError",r)}function o(){i("transport closed")}function a(){i("socket closed")}function u(t){f&&t.name!=f.name&&(s('"%s" works - aborting "%s"',t.name,f.name),n())}function c(){f.removeListener("open",e),f.removeListener("error",i),f.removeListener("close",o),h.removeListener("close",a),h.removeListener("upgrading",u)}s('probing transport "%s"',t);var f=this.createTransport(t,{probe:1}),l=!1,h=this;r.priorWebsocketSuccess=!1,f.once("open",e),f.once("error",i),f.once("close",o),this.once("close",a),this.once("upgrading",u),f.open()},r.prototype.onOpen=function(){if(s("socket open"),this.readyState="open",r.priorWebsocketSuccess="websocket"==this.transport.name,this.emit("open"),this.flush(),"open"==this.readyState&&this.upgrade&&this.transport.pause){s("starting upgrade probes");for(var t=0,e=this.upgrades.length;e>t;t++)this.probe(this.upgrades[t])}},r.prototype.onPacket=function(t){if("opening"==this.readyState||"open"==this.readyState)switch(s('socket receive: type "%s", data "%s"',t.type,t.data),this.emit("packet",t),this.emit("heartbeat"),t.type){case"open":this.onHandshake(l(t.data));break;case"pong":this.setPing(),this.emit("pong");break;case"error":var e=new Error("server error");e.code=t.data,this.onError(e);break;case"message":this.emit("data",t.data),this.emit("message",t.data)}else s('packet received with socket readyState "%s"',this.readyState)},r.prototype.onHandshake=function(t){this.emit("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this.upgrades=this.filterUpgrades(t.upgrades),this.pingInterval=t.pingInterval,this.pingTimeout=t.pingTimeout,this.onOpen(),"closed"!=this.readyState&&(this.setPing(),this.removeListener("heartbeat",this.onHeartbeat),this.on("heartbeat",this.onHeartbeat))},r.prototype.onHeartbeat=function(t){clearTimeout(this.pingTimeoutTimer);var e=this;e.pingTimeoutTimer=setTimeout(function(){"closed"!=e.readyState&&e.onClose("ping timeout")},t||e.pingInterval+e.pingTimeout)},r.prototype.setPing=function(){var t=this;clearTimeout(t.pingIntervalTimer),t.pingIntervalTimer=setTimeout(function(){s("writing ping packet - expecting pong within %sms",t.pingTimeout),t.ping(),t.onHeartbeat(t.pingTimeout)},t.pingInterval)},r.prototype.ping=function(){var t=this;this.sendPacket("ping",function(){t.emit("ping")})},r.prototype.onDrain=function(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0===this.writeBuffer.length?this.emit("drain"):this.flush()},r.prototype.flush=function(){"closed"!=this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(s("flushing %d packets in socket",this.writeBuffer.length),this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emit("flush"))},r.prototype.write=r.prototype.send=function(t,e,n){return this.sendPacket("message",t,e,n),this},r.prototype.sendPacket=function(t,e,n,r){if("function"==typeof e&&(r=e,e=void 0),"function"==typeof n&&(r=n,n=null),"closing"!=this.readyState&&"closed"!=this.readyState){n=n||{},n.compress=!1!==n.compress;var i={type:t,data:e,options:n};this.emit("packetCreate",i),this.writeBuffer.push(i),r&&this.once("flush",r),this.flush()}},r.prototype.close=function(){function t(){r.onClose("forced close"),s("socket closing - telling transport to close"),r.transport.close()}function e(){r.removeListener("upgrade",e),r.removeListener("upgradeError",e),t()}function n(){r.once("upgrade",e),r.once("upgradeError",e)}if("opening"==this.readyState||"open"==this.readyState){this.readyState="closing";var r=this;this.writeBuffer.length?this.once("drain",function(){this.upgrading?n():t()}):this.upgrading?n():t()}return this},r.prototype.onError=function(t){s("socket error %j",t),r.priorWebsocketSuccess=!1,this.emit("error",t),this.onClose("transport error",t)},r.prototype.onClose=function(t,e){if("opening"==this.readyState||"open"==this.readyState||"closing"==this.readyState){s('socket close with reason: "%s"',t);var n=this;clearTimeout(this.pingIntervalTimer),clearTimeout(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),this.readyState="closed",this.id=null,this.emit("close",t,e),n.writeBuffer=[],n.prevBufferLen=0}},r.prototype.filterUpgrades=function(t){for(var e=[],n=0,r=t.length;r>n;n++)~u(this.transports,t[n])&&e.push(t[n]);return e}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./transport":18,"./transports":19,"component-emitter":11,debug:13,"engine.io-parser":25,indexof:37,parsejson:47,parseqs:48,parseuri:49}],18:[function(t,e,n){function r(t){this.path=t.path,this.hostname=t.hostname,this.port=t.port,this.secure=t.secure,this.query=t.query,this.timestampParam=t.timestampParam,this.timestampRequests=t.timestampRequests,this.readyState="",this.agent=t.agent||!1,this.socket=t.socket,this.enablesXDR=t.enablesXDR,this.pfx=t.pfx,this.key=t.key,this.passphrase=t.passphrase,this.cert=t.cert,this.ca=t.ca,this.ciphers=t.ciphers,this.rejectUnauthorized=t.rejectUnauthorized,this.extraHeaders=t.extraHeaders}var i=t("engine.io-parser"),o=t("component-emitter");e.exports=r,o(r.prototype),r.prototype.onError=function(t,e){var n=new Error(t);return n.type="TransportError",n.description=e,this.emit("error",n),this},r.prototype.open=function(){return("closed"==this.readyState||""==this.readyState)&&(this.readyState="opening",this.doOpen()),this},r.prototype.close=function(){return("opening"==this.readyState||"open"==this.readyState)&&(this.doClose(),this.onClose()),this},r.prototype.send=function(t){if("open"!=this.readyState)throw new Error("Transport not open");this.write(t)},r.prototype.onOpen=function(){this.readyState="open",this.writable=!0,this.emit("open")},r.prototype.onData=function(t){var e=i.decodePacket(t,this.socket.binaryType);this.onPacket(e)},r.prototype.onPacket=function(t){this.emit("packet",t)},r.prototype.onClose=function(){this.readyState="closed",this.emit("close")}},{"component-emitter":11,"engine.io-parser":25}],19:[function(t,e,n){(function(e){function r(t){var n,r=!1,s=!1,u=!1!==t.jsonp;if(e.location){var c="https:"==location.protocol,f=location.port;f||(f=c?443:80),r=t.hostname!=location.hostname||f!=t.port,s=t.secure!=c}if(t.xdomain=r,t.xscheme=s,n=new i(t),"open"in n&&!t.forceJSONP)return new o(t);if(!u)throw new Error("JSONP disabled");return new a(t)}var i=t("xmlhttprequest-ssl"),o=t("./polling-xhr"),a=t("./polling-jsonp"),s=t("./websocket");n.polling=r,n.websocket=s}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./polling-jsonp":20,"./polling-xhr":21,"./websocket":23,"xmlhttprequest-ssl":24}],20:[function(t,e,n){(function(n){function r(){}function i(t){o.call(this,t),this.query=this.query||{},s||(n.___eio||(n.___eio=[]),s=n.___eio),this.index=s.length;var e=this;s.push(function(t){e.onData(t)}),this.query.j=this.index,n.document&&n.addEventListener&&n.addEventListener("beforeunload",function(){e.script&&(e.script.onerror=r)},!1)}var o=t("./polling"),a=t("component-inherit");e.exports=i;var s,u=/\n/g,c=/\\n/g;a(i,o),i.prototype.supportsBinary=!1,i.prototype.doClose=function(){this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),this.form&&(this.form.parentNode.removeChild(this.form),this.form=null,this.iframe=null),o.prototype.doClose.call(this)},i.prototype.doPoll=function(){var t=this,e=document.createElement("script");this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),e.async=!0,e.src=this.uri(),e.onerror=function(e){t.onError("jsonp poll error",e)};var n=document.getElementsByTagName("script")[0];n?n.parentNode.insertBefore(e,n):(document.head||document.body).appendChild(e),this.script=e;var r="undefined"!=typeof navigator&&/gecko/i.test(navigator.userAgent);r&&setTimeout(function(){var t=document.createElement("iframe");document.body.appendChild(t),document.body.removeChild(t)},100)},i.prototype.doWrite=function(t,e){function n(){r(),e()}function r(){if(i.iframe)try{i.form.removeChild(i.iframe)}catch(t){i.onError("jsonp polling iframe removal error",t)}try{var e='<iframe src="javascript:0" name="'+i.iframeId+'">';o=document.createElement(e)}catch(t){o=document.createElement("iframe"),o.name=i.iframeId,o.src="javascript:0"}o.id=i.iframeId,i.form.appendChild(o),i.iframe=o}var i=this;if(!this.form){var o,a=document.createElement("form"),s=document.createElement("textarea"),f=this.iframeId="eio_iframe_"+this.index;a.className="socketio",a.style.position="absolute",a.style.top="-1000px",a.style.left="-1000px",a.target=f,a.method="POST",a.setAttribute("accept-charset","utf-8"),s.name="d",a.appendChild(s),document.body.appendChild(a),this.form=a,this.area=s}this.form.action=this.uri(),r(),t=t.replace(c,"\\\n"),this.area.value=t.replace(u,"\\n");try{this.form.submit()}catch(l){}this.iframe.attachEvent?this.iframe.onreadystatechange=function(){"complete"==i.iframe.readyState&&n()}:this.iframe.onload=n}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./polling":22,"component-inherit":12}],21:[function(t,e,n){(function(n){function r(){}function i(t){if(u.call(this,t),n.location){var e="https:"==location.protocol,r=location.port;r||(r=e?443:80),this.xd=t.hostname!=n.location.hostname||r!=t.port,this.xs=t.secure!=e}else this.extraHeaders=t.extraHeaders}function o(t){this.method=t.method||"GET",this.uri=t.uri,this.xd=!!t.xd,this.xs=!!t.xs,this.async=!1!==t.async,this.data=void 0!=t.data?t.data:null,this.agent=t.agent,this.isBinary=t.isBinary,this.supportsBinary=t.supportsBinary,this.enablesXDR=t.enablesXDR,this.pfx=t.pfx,this.key=t.key,this.passphrase=t.passphrase,this.cert=t.cert,this.ca=t.ca,this.ciphers=t.ciphers,this.rejectUnauthorized=t.rejectUnauthorized,this.extraHeaders=t.extraHeaders,this.create()}function a(){for(var t in o.requests)o.requests.hasOwnProperty(t)&&o.requests[t].abort()}var s=t("xmlhttprequest-ssl"),u=t("./polling"),c=t("component-emitter"),f=t("component-inherit"),l=t("debug")("engine.io-client:polling-xhr");e.exports=i,e.exports.Request=o,f(i,u),i.prototype.supportsBinary=!0,i.prototype.request=function(t){return t=t||{},t.uri=this.uri(),t.xd=this.xd,t.xs=this.xs,t.agent=this.agent||!1,t.supportsBinary=this.supportsBinary,t.enablesXDR=this.enablesXDR,t.pfx=this.pfx,t.key=this.key,t.passphrase=this.passphrase,t.cert=this.cert,t.ca=this.ca,t.ciphers=this.ciphers,t.rejectUnauthorized=this.rejectUnauthorized,t.extraHeaders=this.extraHeaders,new o(t)},i.prototype.doWrite=function(t,e){var n="string"!=typeof t&&void 0!==t,r=this.request({method:"POST",data:t,isBinary:n}),i=this;r.on("success",e),r.on("error",function(t){i.onError("xhr post error",t)}),this.sendXhr=r},i.prototype.doPoll=function(){l("xhr poll");var t=this.request(),e=this;t.on("data",function(t){e.onData(t)}),t.on("error",function(t){e.onError("xhr poll error",t)}),this.pollXhr=t},c(o.prototype),o.prototype.create=function(){var t={agent:this.agent,xdomain:this.xd,xscheme:this.xs,enablesXDR:this.enablesXDR};t.pfx=this.pfx,t.key=this.key,t.passphrase=this.passphrase,t.cert=this.cert,t.ca=this.ca,t.ciphers=this.ciphers,t.rejectUnauthorized=this.rejectUnauthorized;var e=this.xhr=new s(t),r=this;try{l("xhr open %s: %s",this.method,this.uri),e.open(this.method,this.uri,this.async);try{if(this.extraHeaders){e.setDisableHeaderCheck(!0);for(var i in this.extraHeaders)this.extraHeaders.hasOwnProperty(i)&&e.setRequestHeader(i,this.extraHeaders[i])}}catch(a){}if(this.supportsBinary&&(e.responseType="arraybuffer"),"POST"==this.method)try{this.isBinary?e.setRequestHeader("Content-type","application/octet-stream"):e.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(a){}"withCredentials"in e&&(e.withCredentials=!0),this.hasXDR()?(e.onload=function(){r.onLoad()},e.onerror=function(){r.onError(e.responseText)}):e.onreadystatechange=function(){4==e.readyState&&(200==e.status||1223==e.status?r.onLoad():setTimeout(function(){r.onError(e.status)},0))},l("xhr data %s",this.data),e.send(this.data)}catch(a){return void setTimeout(function(){r.onError(a)},0)}n.document&&(this.index=o.requestsCount++,o.requests[this.index]=this)},o.prototype.onSuccess=function(){this.emit("success"),this.cleanup()},o.prototype.onData=function(t){this.emit("data",t),this.onSuccess()},o.prototype.onError=function(t){this.emit("error",t),this.cleanup(!0)},o.prototype.cleanup=function(t){if("undefined"!=typeof this.xhr&&null!==this.xhr){if(this.hasXDR()?this.xhr.onload=this.xhr.onerror=r:this.xhr.onreadystatechange=r,t)try{this.xhr.abort()}catch(e){}n.document&&delete o.requests[this.index],this.xhr=null}},o.prototype.onLoad=function(){var t;try{var e;try{e=this.xhr.getResponseHeader("Content-Type").split(";")[0]}catch(n){}if("application/octet-stream"===e)t=this.xhr.response;else if(this.supportsBinary)try{t=String.fromCharCode.apply(null,new Uint8Array(this.xhr.response))}catch(n){for(var r=new Uint8Array(this.xhr.response),i=[],o=0,a=r.length;a>o;o++)i.push(r[o]);t=String.fromCharCode.apply(null,i)}else t=this.xhr.responseText}catch(n){this.onError(n)}null!=t&&this.onData(t)},o.prototype.hasXDR=function(){return"undefined"!=typeof n.XDomainRequest&&!this.xs&&this.enablesXDR},o.prototype.abort=function(){this.cleanup()},n.document&&(o.requestsCount=0,o.requests={},n.attachEvent?n.attachEvent("onunload",a):n.addEventListener&&n.addEventListener("beforeunload",a,!1))}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./polling":22,"component-emitter":11,"component-inherit":12,debug:13,"xmlhttprequest-ssl":24}],22:[function(t,e,n){function r(t){var e=t&&t.forceBase64;(!f||e)&&(this.supportsBinary=!1),i.call(this,t)}var i=t("../transport"),o=t("parseqs"),a=t("engine.io-parser"),s=t("component-inherit"),u=t("yeast"),c=t("debug")("engine.io-client:polling");e.exports=r;var f=function(){var e=t("xmlhttprequest-ssl"),n=new e({xdomain:!1});return null!=n.responseType}();s(r,i),r.prototype.name="polling",r.prototype.doOpen=function(){this.poll()},r.prototype.pause=function(t){function e(){c("paused"),n.readyState="paused",t()}var n=this;if(this.readyState="pausing",this.polling||!this.writable){var r=0;this.polling&&(c("we are currently polling - waiting to pause"),r++,this.once("pollComplete",function(){c("pre-pause polling complete"),--r||e()})),this.writable||(c("we are currently writing - waiting to pause"),r++,this.once("drain",function(){c("pre-pause writing complete"),--r||e()}))}else e()},r.prototype.poll=function(){c("polling"),this.polling=!0,this.doPoll(),this.emit("poll")},r.prototype.onData=function(t){var e=this;c("polling got data %s",t);var n=function(t,n,r){return"opening"==e.readyState&&e.onOpen(),"close"==t.type?(e.onClose(),!1):void e.onPacket(t)};a.decodePayload(t,this.socket.binaryType,n),"closed"!=this.readyState&&(this.polling=!1,this.emit("pollComplete"),"open"==this.readyState?this.poll():c('ignoring poll - transport state "%s"',this.readyState))},r.prototype.doClose=function(){function t(){c("writing close packet"),e.write([{type:"close"}])}var e=this;"open"==this.readyState?(c("transport open - closing"),t()):(c("transport not open - deferring close"),this.once("open",t))},r.prototype.write=function(t){var e=this;this.writable=!1;var n=function(){e.writable=!0,e.emit("drain")},e=this;a.encodePayload(t,this.supportsBinary,function(t){e.doWrite(t,n)})},r.prototype.uri=function(){var t=this.query||{},e=this.secure?"https":"http",n="";!1!==this.timestampRequests&&(t[this.timestampParam]=u()),this.supportsBinary||t.sid||(t.b64=1),t=o.encode(t),this.port&&("https"==e&&443!=this.port||"http"==e&&80!=this.port)&&(n=":"+this.port),t.length&&(t="?"+t);var r=-1!==this.hostname.indexOf(":");return e+"://"+(r?"["+this.hostname+"]":this.hostname)+n+this.path+t}},{"../transport":18,"component-inherit":12,debug:13,"engine.io-parser":25,parseqs:48,"xmlhttprequest-ssl":24,yeast:62}],23:[function(t,e,n){(function(n){function r(t){var e=t&&t.forceBase64;e&&(this.supportsBinary=!1),this.perMessageDeflate=t.perMessageDeflate,i.call(this,t)}var i=t("../transport"),o=t("engine.io-parser"),a=t("parseqs"),s=t("component-inherit"),u=t("yeast"),c=t("debug")("engine.io-client:websocket"),f=n.WebSocket||n.MozWebSocket,l=f;if(!l&&"undefined"==typeof window)try{l=t("ws")}catch(h){}e.exports=r,s(r,i),r.prototype.name="websocket",r.prototype.supportsBinary=!0,r.prototype.doOpen=function(){if(this.check()){var t=this.uri(),e=void 0,n={agent:this.agent,perMessageDeflate:this.perMessageDeflate};n.pfx=this.pfx,n.key=this.key,n.passphrase=this.passphrase,n.cert=this.cert,n.ca=this.ca,n.ciphers=this.ciphers,n.rejectUnauthorized=this.rejectUnauthorized,this.extraHeaders&&(n.headers=this.extraHeaders),this.ws=f?new l(t):new l(t,e,n),void 0===this.ws.binaryType&&(this.supportsBinary=!1),this.ws.supports&&this.ws.supports.binary?(this.supportsBinary=!0,this.ws.binaryType="buffer"):this.ws.binaryType="arraybuffer",this.addEventListeners()}},r.prototype.addEventListeners=function(){var t=this;this.ws.onopen=function(){t.onOpen()},this.ws.onclose=function(){t.onClose()},this.ws.onmessage=function(e){t.onData(e.data)},this.ws.onerror=function(e){t.onError("websocket error",e)}},"undefined"!=typeof navigator&&/iPad|iPhone|iPod/i.test(navigator.userAgent)&&(r.prototype.onData=function(t){var e=this;setTimeout(function(){i.prototype.onData.call(e,t)},0)}),r.prototype.write=function(t){function e(){r.emit("flush"),setTimeout(function(){r.writable=!0,r.emit("drain")},0)}var r=this;this.writable=!1;for(var i=t.length,a=0,s=i;s>a;a++)!function(t){o.encodePacket(t,r.supportsBinary,function(o){if(!f){var a={};if(t.options&&(a.compress=t.options.compress),r.perMessageDeflate){var s="string"==typeof o?n.Buffer.byteLength(o):o.length;s<r.perMessageDeflate.threshold&&(a.compress=!1)}}try{f?r.ws.send(o):r.ws.send(o,a)}catch(u){c("websocket closed before onclose event")}--i||e()})}(t[a])},r.prototype.onClose=function(){i.prototype.onClose.call(this)},r.prototype.doClose=function(){"undefined"!=typeof this.ws&&this.ws.close()},r.prototype.uri=function(){var t=this.query||{},e=this.secure?"wss":"ws",n="";this.port&&("wss"==e&&443!=this.port||"ws"==e&&80!=this.port)&&(n=":"+this.port),this.timestampRequests&&(t[this.timestampParam]=u()),this.supportsBinary||(t.b64=1),t=a.encode(t),t.length&&(t="?"+t);var r=-1!==this.hostname.indexOf(":");return e+"://"+(r?"["+this.hostname+"]":this.hostname)+n+this.path+t},r.prototype.check=function(){return!(!l||"__initialize"in l&&this.name===r.prototype.name)}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../transport":18,"component-inherit":12,debug:13,"engine.io-parser":25,parseqs:48,ws:7,yeast:62}],24:[function(t,e,n){var r=t("has-cors");e.exports=function(t){var e=t.xdomain,n=t.xscheme,i=t.enablesXDR;try{if("undefined"!=typeof XMLHttpRequest&&(!e||r))return new XMLHttpRequest}catch(o){}try{if("undefined"!=typeof XDomainRequest&&!n&&i)return new XDomainRequest}catch(o){}if(!e)try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(o){}}},{"has-cors":35}],25:[function(t,e,n){(function(e){function r(t,e){var r="b"+n.packets[t.type]+t.data.data;return e(r)}function i(t,e,r){if(!e)return n.encodeBase64Packet(t,r);var i=t.data,o=new Uint8Array(i),a=new Uint8Array(1+i.byteLength);a[0]=v[t.type];for(var s=0;s<o.length;s++)a[s+1]=o[s];return r(a.buffer)}function o(t,e,r){if(!e)return n.encodeBase64Packet(t,r);var i=new FileReader;return i.onload=function(){t.data=i.result,n.encodePacket(t,e,!0,r)},i.readAsArrayBuffer(t.data)}function a(t,e,r){if(!e)return n.encodeBase64Packet(t,r);if(g)return o(t,e,r);var i=new Uint8Array(1);i[0]=v[t.type];var a=new b([i.buffer,t.data]);return r(a)}function s(t,e,n){for(var r=new Array(t.length),i=h(t.length,n),o=function(t,n,i){e(n,function(e,n){r[t]=n,i(e,r)})},a=0;a<t.length;a++)o(a,t[a],i)}var u=t("./keys"),c=t("has-binary"),f=t("arraybuffer.slice"),l=t("base64-arraybuffer"),h=t("after"),p=t("utf8"),d=navigator.userAgent.match(/Android/i),y=/PhantomJS/i.test(navigator.userAgent),g=d||y;n.protocol=3;var v=n.packets={open:0,close:1,ping:2,pong:3,message:4,upgrade:5,noop:6},_=u(v),m={type:"error",data:"parser error"},b=t("blob");n.encodePacket=function(t,n,o,s){"function"==typeof n&&(s=n,n=!1),"function"==typeof o&&(s=o,o=null);var u=void 0===t.data?void 0:t.data.buffer||t.data;if(e.ArrayBuffer&&u instanceof ArrayBuffer)return i(t,n,s);if(b&&u instanceof e.Blob)return a(t,n,s);if(u&&u.base64)return r(t,s);var c=v[t.type];return void 0!==t.data&&(c+=o?p.encode(String(t.data)):String(t.data)),s(""+c)},n.encodeBase64Packet=function(t,r){var i="b"+n.packets[t.type];if(b&&t.data instanceof e.Blob){var o=new FileReader;return o.onload=function(){var t=o.result.split(",")[1];r(i+t)},o.readAsDataURL(t.data)}var a;try{a=String.fromCharCode.apply(null,new Uint8Array(t.data))}catch(s){for(var u=new Uint8Array(t.data),c=new Array(u.length),f=0;f<u.length;f++)c[f]=u[f];a=String.fromCharCode.apply(null,c)}return i+=e.btoa(a),r(i)},n.decodePacket=function(t,e,r){if("string"==typeof t||void 0===t){if("b"==t.charAt(0))return n.decodeBase64Packet(t.substr(1),e);if(r)try{t=p.decode(t)}catch(i){return m}var o=t.charAt(0);return Number(o)==o&&_[o]?t.length>1?{type:_[o],data:t.substring(1)}:{type:_[o]}:m}var a=new Uint8Array(t),o=a[0],s=f(t,1);return b&&"blob"===e&&(s=new b([s])),{type:_[o],data:s}},n.decodeBase64Packet=function(t,n){var r=_[t.charAt(0)];if(!e.ArrayBuffer)return{type:r,data:{base64:!0,data:t.substr(1)}};var i=l.decode(t.substr(1));return"blob"===n&&b&&(i=new b([i])),{type:r,data:i}},n.encodePayload=function(t,e,r){function i(t){return t.length+":"+t}function o(t,r){n.encodePacket(t,a?e:!1,!0,function(t){r(null,i(t))})}"function"==typeof e&&(r=e,e=null);var a=c(t);return e&&a?b&&!g?n.encodePayloadAsBlob(t,r):n.encodePayloadAsArrayBuffer(t,r):t.length?void s(t,o,function(t,e){return r(e.join(""))}):r("0:")},n.decodePayload=function(t,e,r){if("string"!=typeof t)return n.decodePayloadAsBinary(t,e,r);"function"==typeof e&&(r=e,e=null);var i;if(""==t)return r(m,0,1);for(var o,a,s="",u=0,c=t.length;c>u;u++){var f=t.charAt(u);if(":"!=f)s+=f;else{if(""==s||s!=(o=Number(s)))return r(m,0,1);if(a=t.substr(u+1,o),s!=a.length)return r(m,0,1);if(a.length){if(i=n.decodePacket(a,e,!0),m.type==i.type&&m.data==i.data)return r(m,0,1);var l=r(i,u+o,c);if(!1===l)return}u+=o,s=""}}return""!=s?r(m,0,1):void 0},n.encodePayloadAsArrayBuffer=function(t,e){function r(t,e){n.encodePacket(t,!0,!0,function(t){return e(null,t)})}return t.length?void s(t,r,function(t,n){var r=n.reduce(function(t,e){var n;return n="string"==typeof e?e.length:e.byteLength,t+n.toString().length+n+2},0),i=new Uint8Array(r),o=0;return n.forEach(function(t){var e="string"==typeof t,n=t;if(e){for(var r=new Uint8Array(t.length),a=0;a<t.length;a++)r[a]=t.charCodeAt(a);n=r.buffer}e?i[o++]=0:i[o++]=1;for(var s=n.byteLength.toString(),a=0;a<s.length;a++)i[o++]=parseInt(s[a]);i[o++]=255;for(var r=new Uint8Array(n),a=0;a<r.length;a++)i[o++]=r[a]}),e(i.buffer)}):e(new ArrayBuffer(0))},n.encodePayloadAsBlob=function(t,e){function r(t,e){n.encodePacket(t,!0,!0,function(t){var n=new Uint8Array(1);if(n[0]=1,"string"==typeof t){for(var r=new Uint8Array(t.length),i=0;i<t.length;i++)r[i]=t.charCodeAt(i);t=r.buffer,n[0]=0}for(var o=t instanceof ArrayBuffer?t.byteLength:t.size,a=o.toString(),s=new Uint8Array(a.length+1),i=0;i<a.length;i++)s[i]=parseInt(a[i]);if(s[a.length]=255,b){var u=new b([n.buffer,s.buffer,t]);e(null,u)}})}s(t,r,function(t,n){return e(new b(n))})},n.decodePayloadAsBinary=function(t,e,r){"function"==typeof e&&(r=e,e=null);for(var i=t,o=[],a=!1;i.byteLength>0;){for(var s=new Uint8Array(i),u=0===s[0],c="",l=1;255!=s[l];l++){if(c.length>310){a=!0;break}c+=s[l]}if(a)return r(m,0,1);i=f(i,2+c.length),c=parseInt(c);var h=f(i,0,c);if(u)try{h=String.fromCharCode.apply(null,new Uint8Array(h))}catch(p){var d=new Uint8Array(h);h="";for(var l=0;l<d.length;l++)h+=String.fromCharCode(d[l])}o.push(h),i=f(i,c)}var y=o.length;o.forEach(function(t,i){r(n.decodePacket(t,e,!0),i,y)})}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./keys":26,after:1,"arraybuffer.slice":2,"base64-arraybuffer":4,blob:6,"has-binary":27,utf8:61}],26:[function(t,e,n){e.exports=Object.keys||function(t){var e=[],n=Object.prototype.hasOwnProperty;for(var r in t)n.call(t,r)&&e.push(r);return e}},{}],27:[function(t,e,n){(function(n){function r(t){function e(t){if(!t)return!1;if(n.Buffer&&n.Buffer.isBuffer(t)||n.ArrayBuffer&&t instanceof ArrayBuffer||n.Blob&&t instanceof Blob||n.File&&t instanceof File)return!0;if(i(t)){for(var r=0;r<t.length;r++)if(e(t[r]))return!0}else if(t&&"object"==typeof t){t.toJSON&&(t=t.toJSON());for(var o in t)if(Object.prototype.hasOwnProperty.call(t,o)&&e(t[o]))return!0}return!1}return e(t)}var i=t("isarray");e.exports=r}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{isarray:39}],28:[function(t,e,n){(function(n,r){"use strict";function i(t,e){if(t&&"name"===e||f.call(p,e)>=0)throw new Error("Enum key "+e+" is a reserved word!")}var o=function(t){return t&&t.__esModule?t["default"]:t},a=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},s=o(t("os")),u=o(t("./enumItem")),c=t("./isType").isString,f=t("./indexOf").indexOf,l=s.endianness(),h=function(){function t(e,n){var r=this;if(a(this,t),this.size=4,this.indirection=1,n&&c(n)&&(n={name:n}),this._options=n||{},this._options.separator=this._options.separator||" | ",this._options.endianness=this._options.endianness||l,this._options.ignoreCase=this._options.ignoreCase||!1,this._options.freez=this._options.freez||!1,this.enums=[],e.length){this._enumLastIndex=e.length;var o=e;e={};for(var s=0;s<o.length;s++)e[o[s]]=Math.pow(2,s)}for(var f in e)i(this._options.name,f),this[f]=new u(f,e[f],{ignoreCase:this._options.ignoreCase}),this.enums.push(this[f]);this._enumMap=e,this._options.ignoreCase&&(this.getLowerCaseEnums=function(){for(var t={},e=0,n=this.enums.length;n>e;e++)t[this.enums[e].key.toLowerCase()]=this.enums[e];return t}),this._options.name&&(this.name=this._options.name);var h=function(){for(var t=0,e=r.enums.length;e>t;t++){var n=r.enums[t];if(0===n.value||n.value&n.value-1)return!1}return!0};this.isFlaggable=h(),this._options.freez&&this.freezeEnums()}return t.prototype.getKey=function(t){var e=this.get(t);return e?e.key:void 0},t.prototype.getValue=function(t){var e=this.get(t);return e?e.value:void 0},t.prototype.get=function(t,e){if(null!==t&&void 0!==t){if(n.isBuffer(t)&&(t=t["readUInt32"+this._options.endianness](e||0)),u.isEnumItem(t)){var r=f.call(this.enums,t);if(r>=0)return t;if(!this.isFlaggable||this.isFlaggable&&t.key.indexOf(this._options.separator)<0)return;return this.get(t.key)}if(c(t)){var i=this;if(this._options.ignoreCase&&(i=this.getLowerCaseEnums(),t=t.toLowerCase()),t.indexOf(this._options.separator)>0){for(var o=t.split(this._options.separator),a=0,s=0;s<o.length;s++){var l=o[s];a|=i[l].value}return new u(t,a)}return i[t]}for(var h in this)if(this.hasOwnProperty(h)&&this[h].value===t)return this[h];var p=null;if(this.isFlaggable)for(var d in this)this.hasOwnProperty(d)&&0!==(t&this[d].value)&&(p?p+=this._options.separator:p="",p+=d);return this.get(p||null)}},t.prototype.set=function(t,e,n){var r=this.get(n);return r?t["writeUInt32"+this._options.endianness](r.value,e||0):void 0},t.prototype.freezeEnums=function(){function t(){return Object.isFrozen&&Object.isSealed&&Object.getOwnPropertyNames&&Object.getOwnPropertyDescriptor&&Object.defineProperties&&Object.__defineGetter__&&Object.__defineSetter__}function e(t){var e=Object.getOwnPropertyNames(t);return e.forEach(function(e){Object.getOwnPropertyDescriptor(t,e).configurable&&Object.defineProperties(t,e,{writable:!1,configurable:!1})}),t}function n(t){return t}function r(t){if("object"==typeof t&&null!==t&&!Object.isFrozen(t)&&!Object.isSealed(t)){for(var i in t)t.hasOwnProperty(i)&&(t.__defineGetter__(i,n.bind(null,t[i])),t.__defineSetter__(i,function(t){throw TypeError("Cannot redefine property; Enum Type is not extensible.")}),r(t[i]));Object.freeze?Object.freeze(t):e(t)}}return t()&&r(this),this},t.prototype.toJSON=function(){return this._enumMap},t.prototype.extend=function(t){if(t.length){var e=t;t={};for(var n=0;n<e.length;n++){var r=this._enumLastIndex+n;t[e[n]]=Math.pow(2,r)}for(var o in t)i(this._options.name,o),this[o]=new u(o,t[o],{ignoreCase:this._options.ignoreCase}),this.enums.push(this[o]);for(var a in this._enumMap)t[a]=this._enumMap[a];this._enumLastIndex+=t.length,this._enumMap=t,this._options.freez&&this.freezeEnums()}},t.register=function(){var e=void 0===arguments[0]?"Enum":arguments[0];r[e]||(r[e]=t)},t}();e.exports=h;var p=["_options","get","getKey","getValue","enums","isFlaggable","_enumMap","toJSON","_enumLastIndex"]}).call(this,{isBuffer:t("../../is-buffer/index.js")},"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../is-buffer/index.js":38,"./enumItem":29,"./indexOf":30,"./isType":31,os:46}],29:[function(t,e,n){"use strict";var r=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},i=t("./isType"),o=i.isObject,a=i.isString,s=function(){function t(e,n){var i=void 0===arguments[2]?{}:arguments[2];r(this,t),this.key=e,this.value=n,this._options=i,this._options.ignoreCase=this._options.ignoreCase||!1}return t.prototype.has=function(e){return t.isEnumItem(e)?0!==(this.value&e.value):a(e)?this._options.ignoreCase?this.key.toLowerCase().indexOf(e.toLowerCase())>=0:this.key.indexOf(e)>=0:0!==(this.value&e)},t.prototype.is=function(e){return t.isEnumItem(e)?this.key===e.key:a(e)?this._options.ignoreCase?this.key.toLowerCase()===e.toLowerCase():this.key===e:this.value===e},t.prototype.toString=function(){return this.key},t.prototype.toJSON=function(){return this.key},t.prototype.valueOf=function(){return this.value},t.isEnumItem=function(e){return e instanceof t||o(e)&&void 0!==e.key&&void 0!==e.value},t}();e.exports=s},{"./isType":31}],30:[function(t,e,n){"use strict";n.__esModule=!0;var r=Array.prototype.indexOf||function(t,e){void 0===e&&(e=0),0>e&&(e+=this.length),0>e&&(e=0);for(var n=this.length;n>e;e++)if(e in this&&this[e]===t)return e;return-1};n.indexOf=r},{}],31:[function(t,e,n){"use strict";n.__esModule=!0;var r=function(t,e){return typeof e===t};n.isType=r;var i=function(t){return r("object",t)};n.isObject=i;var o=function(t){return r("string",t)};n.isString=o},{}],32:[function(t,e,n){e.exports=t("./dist/enum")},{"./dist/enum":28}],33:[function(t,e,n){function r(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function i(t){return"function"==typeof t}function o(t){return"number"==typeof t}function a(t){return"object"==typeof t&&null!==t}function s(t){return void 0===t;
}e.exports=r,r.EventEmitter=r,r.prototype._events=void 0,r.prototype._maxListeners=void 0,r.defaultMaxListeners=10,r.prototype.setMaxListeners=function(t){if(!o(t)||0>t||isNaN(t))throw TypeError("n must be a positive number");return this._maxListeners=t,this},r.prototype.emit=function(t){var e,n,r,o,u,c;if(this._events||(this._events={}),"error"===t&&(!this._events.error||a(this._events.error)&&!this._events.error.length)){if(e=arguments[1],e instanceof Error)throw e;throw TypeError('Uncaught, unspecified "error" event.')}if(n=this._events[t],s(n))return!1;if(i(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:o=Array.prototype.slice.call(arguments,1),n.apply(this,o)}else if(a(n))for(o=Array.prototype.slice.call(arguments,1),c=n.slice(),r=c.length,u=0;r>u;u++)c[u].apply(this,o);return!0},r.prototype.addListener=function(t,e){var n;if(!i(e))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",t,i(e.listener)?e.listener:e),this._events[t]?a(this._events[t])?this._events[t].push(e):this._events[t]=[this._events[t],e]:this._events[t]=e,a(this._events[t])&&!this._events[t].warned&&(n=s(this._maxListeners)?r.defaultMaxListeners:this._maxListeners,n&&n>0&&this._events[t].length>n&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),"function"==typeof console.trace&&console.trace())),this},r.prototype.on=r.prototype.addListener,r.prototype.once=function(t,e){function n(){this.removeListener(t,n),r||(r=!0,e.apply(this,arguments))}if(!i(e))throw TypeError("listener must be a function");var r=!1;return n.listener=e,this.on(t,n),this},r.prototype.removeListener=function(t,e){var n,r,o,s;if(!i(e))throw TypeError("listener must be a function");if(!this._events||!this._events[t])return this;if(n=this._events[t],o=n.length,r=-1,n===e||i(n.listener)&&n.listener===e)delete this._events[t],this._events.removeListener&&this.emit("removeListener",t,e);else if(a(n)){for(s=o;s-- >0;)if(n[s]===e||n[s].listener&&n[s].listener===e){r=s;break}if(0>r)return this;1===n.length?(n.length=0,delete this._events[t]):n.splice(r,1),this._events.removeListener&&this.emit("removeListener",t,e)}return this},r.prototype.removeAllListeners=function(t){var e,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[t]&&delete this._events[t],this;if(0===arguments.length){for(e in this._events)"removeListener"!==e&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[t],i(n))this.removeListener(t,n);else if(n)for(;n.length;)this.removeListener(t,n[n.length-1]);return delete this._events[t],this},r.prototype.listeners=function(t){var e;return e=this._events&&this._events[t]?i(this._events[t])?[this._events[t]]:this._events[t].slice():[]},r.prototype.listenerCount=function(t){if(this._events){var e=this._events[t];if(i(e))return 1;if(e)return e.length}return 0},r.listenerCount=function(t,e){return t.listenerCount(e)}},{}],34:[function(t,e,n){(function(n){function r(t){function e(t){if(!t)return!1;if(n.Buffer&&n.Buffer.isBuffer&&n.Buffer.isBuffer(t)||n.ArrayBuffer&&t instanceof ArrayBuffer||n.Blob&&t instanceof Blob||n.File&&t instanceof File)return!0;if(i(t)){for(var r=0;r<t.length;r++)if(e(t[r]))return!0}else if(t&&"object"==typeof t){t.toJSON&&"function"==typeof t.toJSON&&(t=t.toJSON());for(var o in t)if(Object.prototype.hasOwnProperty.call(t,o)&&e(t[o]))return!0}return!1}return e(t)}var i=t("isarray");e.exports=r}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{isarray:39}],35:[function(t,e,n){try{e.exports="undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(r){e.exports=!1}},{}],36:[function(t,e,n){n.read=function(t,e,n,r,i){var o,a,s=8*i-r-1,u=(1<<s)-1,c=u>>1,f=-7,l=n?i-1:0,h=n?-1:1,p=t[e+l];for(l+=h,o=p&(1<<-f)-1,p>>=-f,f+=s;f>0;o=256*o+t[e+l],l+=h,f-=8);for(a=o&(1<<-f)-1,o>>=-f,f+=r;f>0;a=256*a+t[e+l],l+=h,f-=8);if(0===o)o=1-c;else{if(o===u)return a?NaN:(p?-1:1)*(1/0);a+=Math.pow(2,r),o-=c}return(p?-1:1)*a*Math.pow(2,o-r)},n.write=function(t,e,n,r,i,o){var a,s,u,c=8*o-i-1,f=(1<<c)-1,l=f>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=r?0:o-1,d=r?1:-1,y=0>e||0===e&&0>1/e?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,a=f):(a=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-a))<1&&(a--,u*=2),e+=a+l>=1?h/u:h*Math.pow(2,1-l),e*u>=2&&(a++,u/=2),a+l>=f?(s=0,a=f):a+l>=1?(s=(e*u-1)*Math.pow(2,i),a+=l):(s=e*Math.pow(2,l-1)*Math.pow(2,i),a=0));i>=8;t[n+p]=255&s,p+=d,s/=256,i-=8);for(a=a<<i|s,c+=i;c>0;t[n+p]=255&a,p+=d,a/=256,c-=8);t[n+p-d]|=128*y}},{}],37:[function(t,e,n){var r=[].indexOf;e.exports=function(t,e){if(r)return t.indexOf(e);for(var n=0;n<t.length;++n)if(t[n]===e)return n;return-1}},{}],38:[function(t,e,n){e.exports=function(t){return!(null==t||!(t._isBuffer||t.constructor&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)))}},{}],39:[function(t,e,n){e.exports=Array.isArray||function(t){return"[object Array]"==Object.prototype.toString.call(t)}},{}],40:[function(t,e,n){function r(t){this.index=0,this.dataBuffer=t,this.dataView=new Uint8Array(this.dataBuffer),this.length=this.dataBuffer.byteLength}function i(){this.bufferBuilder=new s}function o(t){var e=t.charCodeAt(0);return 2047>=e?"00":65535>=e?"000":2097151>=e?"0000":67108863>=e?"00000":"000000"}function a(t){return t.length>600?new Blob([t]).size:t.replace(/[^\u0000-\u007F]/g,o).length}var s=t("./bufferbuilder").BufferBuilder,u=t("./bufferbuilder").binaryFeatures,c={unpack:function(t){var e=new r(t);return e.unpack()},pack:function(t){var e=new i;e.pack(t);var n=e.getBuffer();return n}};e.exports=c,r.prototype.unpack=function(){var t=this.unpack_uint8();if(128>t){var e=t;return e}if(32>(224^t)){var n=(224^t)-32;return n}var r;if((r=160^t)<=15)return this.unpack_raw(r);if((r=176^t)<=15)return this.unpack_string(r);if((r=144^t)<=15)return this.unpack_array(r);if((r=128^t)<=15)return this.unpack_map(r);switch(t){case 192:return null;case 193:return;case 194:return!1;case 195:return!0;case 202:return this.unpack_float();case 203:return this.unpack_double();case 204:return this.unpack_uint8();case 205:return this.unpack_uint16();case 206:return this.unpack_uint32();case 207:return this.unpack_uint64();case 208:return this.unpack_int8();case 209:return this.unpack_int16();case 210:return this.unpack_int32();case 211:return this.unpack_int64();case 212:return;case 213:return;case 214:return;case 215:return;case 216:return r=this.unpack_uint16(),this.unpack_string(r);case 217:return r=this.unpack_uint32(),this.unpack_string(r);case 218:return r=this.unpack_uint16(),this.unpack_raw(r);case 219:return r=this.unpack_uint32(),this.unpack_raw(r);case 220:return r=this.unpack_uint16(),this.unpack_array(r);case 221:return r=this.unpack_uint32(),this.unpack_array(r);case 222:return r=this.unpack_uint16(),this.unpack_map(r);case 223:return r=this.unpack_uint32(),this.unpack_map(r)}},r.prototype.unpack_uint8=function(){var t=255&this.dataView[this.index];return this.index++,t},r.prototype.unpack_uint16=function(){var t=this.read(2),e=256*(255&t[0])+(255&t[1]);return this.index+=2,e},r.prototype.unpack_uint32=function(){var t=this.read(4),e=256*(256*(256*t[0]+t[1])+t[2])+t[3];return this.index+=4,e},r.prototype.unpack_uint64=function(){var t=this.read(8),e=256*(256*(256*(256*(256*(256*(256*t[0]+t[1])+t[2])+t[3])+t[4])+t[5])+t[6])+t[7];return this.index+=8,e},r.prototype.unpack_int8=function(){var t=this.unpack_uint8();return 128>t?t:t-256},r.prototype.unpack_int16=function(){var t=this.unpack_uint16();return 32768>t?t:t-65536},r.prototype.unpack_int32=function(){var t=this.unpack_uint32();return t<Math.pow(2,31)?t:t-Math.pow(2,32)},r.prototype.unpack_int64=function(){var t=this.unpack_uint64();return t<Math.pow(2,63)?t:t-Math.pow(2,64)},r.prototype.unpack_raw=function(t){if(this.length<this.index+t)throw new Error("BinaryPackFailure: index is out of range "+this.index+" "+t+" "+this.length);var e=this.dataBuffer.slice(this.index,this.index+t);return this.index+=t,e},r.prototype.unpack_string=function(t){for(var e,n,r=this.read(t),i=0,o="";t>i;)e=r[i],128>e?(o+=String.fromCharCode(e),i++):32>(192^e)?(n=(192^e)<<6|63&r[i+1],o+=String.fromCharCode(n),i+=2):(n=(15&e)<<12|(63&r[i+1])<<6|63&r[i+2],o+=String.fromCharCode(n),i+=3);return this.index+=t,o},r.prototype.unpack_array=function(t){for(var e=new Array(t),n=0;t>n;n++)e[n]=this.unpack();return e},r.prototype.unpack_map=function(t){for(var e={},n=0;t>n;n++){var r=this.unpack(),i=this.unpack();e[r]=i}return e},r.prototype.unpack_float=function(){var t=this.unpack_uint32(),e=t>>31,n=(t>>23&255)-127,r=8388607&t|8388608;return(0==e?1:-1)*r*Math.pow(2,n-23)},r.prototype.unpack_double=function(){var t=this.unpack_uint32(),e=this.unpack_uint32(),n=t>>31,r=(t>>20&2047)-1023,i=1048575&t|1048576,o=i*Math.pow(2,r-20)+e*Math.pow(2,r-52);return(0==n?1:-1)*o},r.prototype.read=function(t){var e=this.index;if(e+t<=this.length)return this.dataView.subarray(e,e+t);throw new Error("BinaryPackFailure: read index out of range")},i.prototype.getBuffer=function(){return this.bufferBuilder.getBuffer()},i.prototype.pack=function(t){var e=typeof t;if("string"==e)this.pack_string(t);else if("number"==e)Math.floor(t)===t?this.pack_integer(t):this.pack_double(t);else if("boolean"==e)t===!0?this.bufferBuilder.append(195):t===!1&&this.bufferBuilder.append(194);else if("undefined"==e)this.bufferBuilder.append(192);else{if("object"!=e)throw new Error('Type "'+e+'" not yet supported');if(null===t)this.bufferBuilder.append(192);else{var n=t.constructor;if(n==Array)this.pack_array(t);else if(n==Blob||n==File)this.pack_bin(t);else if(n==ArrayBuffer)u.useArrayBufferView?this.pack_bin(new Uint8Array(t)):this.pack_bin(t);else if("BYTES_PER_ELEMENT"in t)u.useArrayBufferView?this.pack_bin(new Uint8Array(t.buffer)):this.pack_bin(t.buffer);else if(n==Object)this.pack_object(t);else if(n==Date)this.pack_string(t.toString());else{if("function"!=typeof t.toBinaryPack)throw new Error('Type "'+n.toString()+'" not yet supported');this.bufferBuilder.append(t.toBinaryPack())}}}this.bufferBuilder.flush()},i.prototype.pack_bin=function(t){var e=t.length||t.byteLength||t.size;if(15>=e)this.pack_uint8(160+e);else if(65535>=e)this.bufferBuilder.append(218),this.pack_uint16(e);else{if(!(4294967295>=e))throw new Error("Invalid length");this.bufferBuilder.append(219),this.pack_uint32(e)}this.bufferBuilder.append(t)},i.prototype.pack_string=function(t){var e=a(t);if(15>=e)this.pack_uint8(176+e);else if(65535>=e)this.bufferBuilder.append(216),this.pack_uint16(e);else{if(!(4294967295>=e))throw new Error("Invalid length");this.bufferBuilder.append(217),this.pack_uint32(e)}this.bufferBuilder.append(t)},i.prototype.pack_array=function(t){var e=t.length;if(15>=e)this.pack_uint8(144+e);else if(65535>=e)this.bufferBuilder.append(220),this.pack_uint16(e);else{if(!(4294967295>=e))throw new Error("Invalid length");this.bufferBuilder.append(221),this.pack_uint32(e)}for(var n=0;e>n;n++)this.pack(t[n])},i.prototype.pack_integer=function(t){if(t>=-32&&127>=t)this.bufferBuilder.append(255&t);else if(t>=0&&255>=t)this.bufferBuilder.append(204),this.pack_uint8(t);else if(t>=-128&&127>=t)this.bufferBuilder.append(208),this.pack_int8(t);else if(t>=0&&65535>=t)this.bufferBuilder.append(205),this.pack_uint16(t);else if(t>=-32768&&32767>=t)this.bufferBuilder.append(209),this.pack_int16(t);else if(t>=0&&4294967295>=t)this.bufferBuilder.append(206),this.pack_uint32(t);else if(t>=-2147483648&&2147483647>=t)this.bufferBuilder.append(210),this.pack_int32(t);else if(t>=-0x8000000000000000&&0x8000000000000000>=t)this.bufferBuilder.append(211),this.pack_int64(t);else{if(!(t>=0&&0x10000000000000000>=t))throw new Error("Invalid integer");this.bufferBuilder.append(207),this.pack_uint64(t)}},i.prototype.pack_double=function(t){var e=0;0>t&&(e=1,t=-t);var n=Math.floor(Math.log(t)/Math.LN2),r=t/Math.pow(2,n)-1,i=Math.floor(r*Math.pow(2,52)),o=Math.pow(2,32),a=e<<31|n+1023<<20|i/o&1048575,s=i%o;this.bufferBuilder.append(203),this.pack_int32(a),this.pack_int32(s)},i.prototype.pack_object=function(t){var e=Object.keys(t),n=e.length;if(15>=n)this.pack_uint8(128+n);else if(65535>=n)this.bufferBuilder.append(222),this.pack_uint16(n);else{if(!(4294967295>=n))throw new Error("Invalid length");this.bufferBuilder.append(223),this.pack_uint32(n)}for(var r in t)t.hasOwnProperty(r)&&(this.pack(r),this.pack(t[r]))},i.prototype.pack_uint8=function(t){this.bufferBuilder.append(t)},i.prototype.pack_uint16=function(t){this.bufferBuilder.append(t>>8),this.bufferBuilder.append(255&t)},i.prototype.pack_uint32=function(t){var e=4294967295&t;this.bufferBuilder.append((4278190080&e)>>>24),this.bufferBuilder.append((16711680&e)>>>16),this.bufferBuilder.append((65280&e)>>>8),this.bufferBuilder.append(255&e)},i.prototype.pack_uint64=function(t){var e=t/Math.pow(2,32),n=t%Math.pow(2,32);this.bufferBuilder.append((4278190080&e)>>>24),this.bufferBuilder.append((16711680&e)>>>16),this.bufferBuilder.append((65280&e)>>>8),this.bufferBuilder.append(255&e),this.bufferBuilder.append((4278190080&n)>>>24),this.bufferBuilder.append((16711680&n)>>>16),this.bufferBuilder.append((65280&n)>>>8),this.bufferBuilder.append(255&n)},i.prototype.pack_int8=function(t){this.bufferBuilder.append(255&t)},i.prototype.pack_int16=function(t){this.bufferBuilder.append((65280&t)>>8),this.bufferBuilder.append(255&t)},i.prototype.pack_int32=function(t){this.bufferBuilder.append(t>>>24&255),this.bufferBuilder.append((16711680&t)>>>16),this.bufferBuilder.append((65280&t)>>>8),this.bufferBuilder.append(255&t)},i.prototype.pack_int64=function(t){var e=Math.floor(t/Math.pow(2,32)),n=t%Math.pow(2,32);this.bufferBuilder.append((4278190080&e)>>>24),this.bufferBuilder.append((16711680&e)>>>16),this.bufferBuilder.append((65280&e)>>>8),this.bufferBuilder.append(255&e),this.bufferBuilder.append((4278190080&n)>>>24),this.bufferBuilder.append((16711680&n)>>>16),this.bufferBuilder.append((65280&n)>>>8),this.bufferBuilder.append(255&n)}},{"./bufferbuilder":41}],41:[function(t,e,n){function r(){this._pieces=[],this._parts=[]}var i={};i.useBlobBuilder=function(){try{return new Blob([]),!1}catch(t){return!0}}(),i.useArrayBufferView=!i.useBlobBuilder&&function(){try{return 0===new Blob([new Uint8Array([])]).size}catch(t){return!0}}(),e.exports.binaryFeatures=i;var o=e.exports.BlobBuilder;"undefined"!=typeof window&&(o=e.exports.BlobBuilder=window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder||window.BlobBuilder),r.prototype.append=function(t){"number"==typeof t?this._pieces.push(t):(this.flush(),this._parts.push(t))},r.prototype.flush=function(){if(this._pieces.length>0){var t=new Uint8Array(this._pieces);i.useArrayBufferView||(t=t.buffer),this._parts.push(t),this._pieces=[]}},r.prototype.getBuffer=function(){if(this.flush(),i.useBlobBuilder){for(var t=new o,e=0,n=this._parts.length;n>e;e++)t.append(this._parts[e]);return t.getBlob()}return new Blob(this._parts)},e.exports.BufferBuilder=r},{}],42:[function(t,e,n){function r(t){if(t=""+t,!(t.length>1e4)){var e=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(t);if(e){var n=parseFloat(e[1]),r=(e[2]||"ms").toLowerCase();switch(r){case"years":case"year":case"yrs":case"yr":case"y":return n*l;case"days":case"day":case"d":return n*f;case"hours":case"hour":case"hrs":case"hr":case"h":return n*c;case"minutes":case"minute":case"mins":case"min":case"m":return n*u;case"seconds":case"second":case"secs":case"sec":case"s":return n*s;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n}}}}function i(t){return t>=f?Math.round(t/f)+"d":t>=c?Math.round(t/c)+"h":t>=u?Math.round(t/u)+"m":t>=s?Math.round(t/s)+"s":t+"ms"}function o(t){return a(t,f,"day")||a(t,c,"hour")||a(t,u,"minute")||a(t,s,"second")||t+" ms"}function a(t,e,n){return e>t?void 0:1.5*e>t?Math.floor(t/e)+" "+n:Math.ceil(t/e)+" "+n+"s"}var s=1e3,u=60*s,c=60*u,f=24*c,l=365.25*f;e.exports=function(t,e){return e=e||{},"string"==typeof t?r(t):e["long"]?o(t):i(t)}},{}],43:[function(t,e,n){e.exports={STRING:2,BOOLEAN:4,NUMBER:8}},{}],44:[function(t,e,n){(function(n){"use strict";function r(t){if(i.isObject(t)){if(n.isBuffer(t))return t.length;var e=0;return i.forOwn(t,function(t,n){e+=r(n);try{e+=r(t)}catch(i){i instanceof RangeError&&(e=0)}}),e}return i.isString(t)?t.length*o.STRING:i.isBoolean(t)?o.BOOLEAN:i.isNumber(t)?o.NUMBER:0}var i=t("lodash"),o=t("./byte_size");e.exports=r}).call(this,{isBuffer:t("../is-buffer/index.js")})},{"../is-buffer/index.js":38,"./byte_size":43,lodash:45}],45:[function(e,n,r){(function(e){(function(){function i(t,e){return t.set(e[0],e[1]),t}function o(t,e){return t.add(e),t}function a(t,e,n){var r=n.length;switch(r){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function s(t,e,n,r){for(var i=-1,o=t.length;++i<o;){var a=t[i];e(r,a,n(a),t)}return r}function u(t,e){for(var n=-1,r=t.length,i=-1,o=e.length,a=Array(r+o);++n<r;)a[n]=t[n];for(;++i<o;)a[n++]=e[i];return a}function c(t,e){for(var n=-1,r=t.length;++n<r&&e(t[n],n,t)!==!1;);return t}function f(t,e){for(var n=t.length;n--&&e(t[n],n,t)!==!1;);return t}function l(t,e){for(var n=-1,r=t.length;++n<r;)if(!e(t[n],n,t))return!1;return!0}function h(t,e){for(var n=-1,r=t.length,i=0,o=[];++n<r;){var a=t[n];e(a,n,t)&&(o[i++]=a)}return o}function p(t,e){return!!t.length&&E(t,e,0)>-1}function d(t,e,n){for(var r=-1,i=t.length;++r<i;)if(n(e,t[r]))return!0;return!1}function y(t,e){for(var n=-1,r=t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}function g(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}function v(t,e,n,r){var i=-1,o=t.length;for(r&&o&&(n=t[++i]);++i<o;)n=e(n,t[i],i,t);return n}function _(t,e,n,r){var i=t.length;for(r&&i&&(n=t[--i]);i--;)n=e(n,t[i],i,t);return n}function m(t,e){for(var n=-1,r=t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}function b(t,e,n){for(var r=-1,i=t.length;++r<i;){var o=t[r],a=e(o);if(null!=a&&(s===tt?a===a:n(a,s)))var s=a,u=o}return u}function w(t,e,n,r){var i;return n(t,function(t,n,o){return e(t,n,o)?(i=r?n:t,!1):void 0}),i}function k(t,e,n){for(var r=t.length,i=n?r:-1;n?i--:++i<r;)if(e(t[i],i,t))return i;return-1}function E(t,e,n){if(e!==e)return F(t,n);for(var r=n-1,i=t.length;++r<i;)if(t[r]===e)return r;return-1}function S(t,e,n,r){for(var i=n-1,o=t.length;++i<o;)if(r(t[i],e))return i;return-1}function A(t,e){var n=t?t.length:0;return n?B(t,e)/n:Bt}function x(t,e,n,r,i){return i(t,function(t,i,o){n=r?(r=!1,t):e(n,t,i,o)}),n}function C(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}function B(t,e){for(var n,r=-1,i=t.length;++r<i;){var o=e(t[r]);o!==tt&&(n=n===tt?o:n+o)}return n}function O(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}function T(t,e){return y(e,function(e){return[e,t[e]]})}function R(t){return function(e){return t(e)}}function P(t,e){return y(e,function(e){return t[e]})}function I(t,e){for(var n=-1,r=t.length;++n<r&&E(e,t[n],0)>-1;);return n}function j(t,e){for(var n=t.length;n--&&E(e,t[n],0)>-1;);return n}function L(t){return t&&t.Object===Object?t:null}function M(t,e){if(t!==e){var n=null===t,r=t===tt,i=t===t,o=null===e,a=e===tt,s=e===e;if(t>e&&!o||!i||n&&!a&&s||r&&s)return 1;if(e>t&&!n||!s||o&&!r&&i||a&&i)return-1}return 0}function N(t,e,n){for(var r=-1,i=t.criteria,o=e.criteria,a=i.length,s=n.length;++r<a;){var u=M(i[r],o[r]);if(u){if(r>=s)return u;var c=n[r];return u*("desc"==c?-1:1)}}return t.index-e.index}function U(t,e){for(var n=t.length,r=0;n--;)t[n]===e&&r++;return r}function D(t){return function(e,n){var r;return e===tt&&n===tt?0:(e!==tt&&(r=e),n!==tt&&(r=r===tt?n:t(r,n)),r)}}function z(t){return Cn[t]}function q(t){return Bn[t]}function Y(t){return"\\"+Rn[t]}function F(t,e,n){for(var r=t.length,i=e+(n?0:-1);n?i--:++i<r;){var o=t[i];if(o!==o)return i}return-1}function V(t){var e=!1;if(null!=t&&"function"!=typeof t.toString)try{e=!!(t+"")}catch(n){}return e}function W(t,e){return t="number"==typeof t||Pe.test(t)?+t:-1,e=null==e?xt:e,t>-1&&t%1==0&&e>t}function H(t){for(var e,n=[];!(e=t.next()).done;)n.push(e.value);return n}function J(t){var e=-1,n=Array(t.size);return t.forEach(function(t,r){n[++e]=[r,t]}),n}function $(t,e){for(var n=-1,r=t.length,i=0,o=[];++n<r;){var a=t[n];(a===e||a===ot)&&(t[n]=ot,o[i++]=n)}return o}function G(t){var e=-1,n=Array(t.size);return t.forEach(function(t){n[++e]=t}),n}function X(t){if(!t||!mn.test(t))return t.length;for(var e=_n.lastIndex=0;_n.test(t);)e++;return e}function K(t){return t.match(_n)}function Z(t){return On[t]}function Q(t){function e(t){if(rs(t)&&!Hf(t)&&!(t instanceof L)){if(t instanceof r)return t;if(cc.call(t,"__wrapped__"))return $i(t)}return new r(t)}function n(){}function r(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=tt}function L(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Ot,this.__views__=[]}function Pe(){var t=new L(this.__wrapped__);return t.__actions__=Hr(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=Hr(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=Hr(this.__views__),t}function Me(){if(this.__filtered__){var t=new L(this);t.__dir__=-1,t.__filtered__=!0}else t=this.clone(),t.__dir__*=-1;return t}function Ne(){var t=this.__wrapped__.value(),e=this.__dir__,n=Hf(t),r=0>e,i=n?t.length:0,o=Bi(0,i,this.__views__),a=o.start,s=o.end,u=s-a,c=r?s:a-1,f=this.__iteratees__,l=f.length,h=0,p=jc(u,this.__takeCount__);if(!n||nt>i||i==u&&p==u)return Ir(t,this.__actions__);var d=[];t:for(;u--&&p>h;){c+=e;for(var y=-1,g=t[c];++y<l;){var v=f[y],_=v.iteratee,m=v.type,b=_(g);if(m==Et)g=b;else if(!b){if(m==kt)continue t;break t}}d[h++]=g}return d}function Ue(){}function De(t,e){return qe(t,e)&&delete t[e]}function ze(t,e){if(Fc){var n=t[e];return n===it?tt:n}return cc.call(t,e)?t[e]:tt}function qe(t,e){return Fc?t[e]!==tt:cc.call(t,e)}function Ye(t,e,n){t[e]=Fc&&n===tt?it:n}function Fe(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function Ve(){this.__data__={hash:new Ue,map:Dc?new Dc:[],string:new Ue}}function We(t){var e=this.__data__;return Ui(t)?De("string"==typeof t?e.string:e.hash,t):Dc?e.map["delete"](t):on(e.map,t)}function He(t){var e=this.__data__;return Ui(t)?ze("string"==typeof t?e.string:e.hash,t):Dc?e.map.get(t):an(e.map,t)}function Je(t){var e=this.__data__;return Ui(t)?qe("string"==typeof t?e.string:e.hash,t):Dc?e.map.has(t):sn(e.map,t)}function $e(t,e){var n=this.__data__;return Ui(t)?Ye("string"==typeof t?n.string:n.hash,t,e):Dc?n.map.set(t,e):cn(n.map,t,e),this}function Ge(t){var e=-1,n=t?t.length:0;for(this.__data__=new Fe;++e<n;)this.push(t[e])}function Xe(t,e){var n=t.__data__;if(Ui(e)){var r=n.__data__,i="string"==typeof e?r.string:r.hash;return i[e]===it}return n.has(e)}function Ke(t){var e=this.__data__;if(Ui(t)){var n=e.__data__,r="string"==typeof t?n.string:n.hash;r[t]=it}else e.set(t,it)}function Ze(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function Qe(){this.__data__={array:[],map:null}}function tn(t){var e=this.__data__,n=e.array;return n?on(n,t):e.map["delete"](t)}function en(t){var e=this.__data__,n=e.array;return n?an(n,t):e.map.get(t)}function nn(t){var e=this.__data__,n=e.array;return n?sn(n,t):e.map.has(t)}function rn(t,e){var n=this.__data__,r=n.array;r&&(r.length<nt-1?cn(r,t,e):(n.array=null,n.map=new Fe(r)));var i=n.map;return i&&i.set(t,e),this}function on(t,e){var n=un(t,e);if(0>n)return!1;var r=t.length-1;return n==r?t.pop():xc.call(t,n,1),!0}function an(t,e){var n=un(t,e);return 0>n?tt:t[n][1]}function sn(t,e){return un(t,e)>-1}function un(t,e){for(var n=t.length;n--;)if(Ua(t[n][0],e))return n;return-1}function cn(t,e,n){var r=un(t,e);0>r?t.push([e,n]):t[r][1]=n}function fn(t,e,n,r){return t===tt||Ua(t,sc[n])&&!cc.call(r,n)?e:t}function ln(t,e,n){(n!==tt&&!Ua(t[e],n)||"number"==typeof e&&n===tt&&!(e in t))&&(t[e]=n)}function hn(t,e,n){var r=t[e];cc.call(t,e)&&Ua(r,n)&&(n!==tt||e in t)||(t[e]=n)}function pn(t,e,n,r){return ef(t,function(t,i,o){e(r,t,n(t),o)}),r}function dn(t,e){return t&&Jr(e,Fs(e),t)}function yn(t,e){for(var n=-1,r=null==t,i=e.length,o=Array(i);++n<i;)o[n]=r?tt:zs(t,e[n]);return o}function gn(t){return Va(t)?t:[]}function _n(t){return"function"==typeof t?t:ju}function Cn(t){return"string"==typeof t||vs(t)?t:t+""}function Bn(t){return Hf(t)?t:hf(t)}function On(t,e,n){return t===t&&(n!==tt&&(t=n>=t?t:n),e!==tt&&(t=t>=e?t:e)),t}function Tn(t,e,n,r,i,o,a){var s;if(r&&(s=o?r(t,i,o,a):r(t)),s!==tt)return s;if(!ns(t))return t;var u=Hf(t);if(u){if(s=Ti(t),!e)return Hr(t,s)}else{var f=Ci(t),l=f==Nt||f==Ut;if(Jf(t))return Mr(t,e);if(f==qt||f==Pt||l&&!o){if(V(t))return o?t:{};if(s=Ri(l?{}:t),!e)return Gr(t,dn(s,t))}else{if(!xn[f])return o?t:{};s=Pi(t,f,Tn,e)}}a||(a=new Ze);var h=a.get(t);if(h)return h;if(a.set(t,s),!u)var p=n?_i(t):Fs(t);return c(p||t,function(i,o){p&&(o=i,i=t[o]),hn(s,o,Tn(i,e,n,r,o,t,a))}),s}function Rn(t){var e=Fs(t),n=e.length;return function(r){if(null==r)return!n;for(var i=n;i--;){var o=e[i],a=t[o],s=r[o];if(s===tt&&!(o in Object(r))||!a(s))return!1}return!0}}function jn(t){return ns(t)?Ec(t):{}}function Ln(t,e,n){if("function"!=typeof t)throw new oc(rt);return Ac(function(){t.apply(tt,n)},e)}function Nn(t,e,n,r){var i=-1,o=p,a=!0,s=t.length,u=[],c=e.length;if(!s)return u;n&&(e=y(e,R(n))),r?(o=d,a=!1):e.length>=nt&&(o=Xe,a=!1,e=new Ge(e));t:for(;++i<s;){var f=t[i],l=n?n(f):f;if(a&&l===l){for(var h=c;h--;)if(e[h]===l)continue t;u.push(f)}else o(e,l,r)||u.push(f)}return u}function Un(t,e){var n=!0;return ef(t,function(t,r,i){return n=!!e(t,r,i)}),n}function Dn(t,e,n,r){var i=t.length;for(n=As(n),0>n&&(n=-n>i?0:i+n),r=r===tt||r>i?i:As(r),0>r&&(r+=i),r=n>r?0:xs(r);r>n;)t[n++]=e;return t}function zn(t,e){var n=[];return ef(t,function(t,r,i){e(t,r,i)&&n.push(t)}),n}function Fn(t,e,n,r,i){var o=-1,a=t.length;for(n||(n=ji),i||(i=[]);++o<a;){var s=t[o];e>0&&n(s)?e>1?Fn(s,e-1,n,r,i):g(i,s):r||(i[i.length]=s)}return i}function Vn(t,e){return t&&rf(t,e,Fs)}function Wn(t,e){return t&&of(t,e,Fs)}function Hn(t,e){return h(e,function(e){return Qa(t[e])})}function Jn(t,e){e=Ni(e,t)?[e]:Bn(e);for(var n=0,r=e.length;null!=t&&r>n;)t=t[e[n++]];return n&&n==r?t:tt}function $n(t,e,n){var r=e(t);return Hf(t)?r:g(r,n(t))}function Gn(t,e){return cc.call(t,e)||"object"==typeof t&&e in t&&null===Ai(t)}function Xn(t,e){return e in Object(t)}function Kn(t,e,n){return t>=jc(e,n)&&t<Ic(e,n)}function Zn(t,e,n){for(var r=n?d:p,i=t[0].length,o=t.length,a=o,s=Array(o),u=1/0,c=[];a--;){var f=t[a];a&&e&&(f=y(f,R(e))),u=jc(f.length,u),s[a]=!n&&(e||i>=120&&f.length>=120)?new Ge(a&&f):tt}f=t[0];var l=-1,h=s[0];t:for(;++l<i&&c.length<u;){var g=f[l],v=e?e(g):g;if(!(h?Xe(h,v):r(c,v,n))){for(a=o;--a;){var _=s[a];if(!(_?Xe(_,v):r(t[a],v,n)))continue t}h&&h.push(v),c.push(g)}}return c}function Qn(t,e,n,r){return Vn(t,function(t,i,o){e(r,n(t),i,o)}),r}function tr(t,e,n){Ni(e,t)||(e=Bn(e),t=Wi(t,e),e=po(e));var r=null==t?t:t[e];return null==r?tt:a(r,t,n)}function er(t,e,n,r,i){return t===e?!0:null==t||null==e||!ns(t)&&!rs(e)?t!==t&&e!==e:nr(t,e,er,n,r,i)}function nr(t,e,n,r,i,o){var a=Hf(t),s=Hf(e),u=It,c=It;a||(u=Ci(t),u=u==Pt?qt:u),s||(c=Ci(e),c=c==Pt?qt:c);var f=u==qt&&!V(t),l=c==qt&&!V(e),h=u==c;if(h&&!f)return o||(o=new Ze),a||_s(t)?yi(t,e,n,r,i,o):gi(t,e,u,n,r,i,o);if(!(i&vt)){var p=f&&cc.call(t,"__wrapped__"),d=l&&cc.call(e,"__wrapped__");if(p||d){var y=p?t.value():t,g=d?e.value():e;return o||(o=new Ze),n(y,g,r,i,o)}}return h?(o||(o=new Ze),vi(t,e,n,r,i,o)):!1}function rr(t,e,n,r){var i=n.length,o=i,a=!r;if(null==t)return!o;for(t=Object(t);i--;){var s=n[i];if(a&&s[2]?s[1]!==t[s[0]]:!(s[0]in t))return!1}for(;++i<o;){s=n[i];var u=s[0],c=t[u],f=s[1];if(a&&s[2]){if(c===tt&&!(u in t))return!1}else{var l=new Ze;if(r)var h=r(c,f,u,t,e,l);if(!(h===tt?er(f,c,r,gt|vt,l):h))return!1}}return!0}function ir(t){return"function"==typeof t?t:null==t?ju:"object"==typeof t?Hf(t)?cr(t[0],t[1]):ur(t):Yu(t)}function or(t){return Pc(Object(t))}function ar(t){t=null==t?t:Object(t);var e=[];for(var n in t)e.push(n);return e}function sr(t,e){var n=-1,r=Fa(t)?Array(t.length):[];return ef(t,function(t,i,o){r[++n]=e(t,i,o)}),r}function ur(t){var e=ki(t);return 1==e.length&&e[0][2]?Yi(e[0][0],e[0][1]):function(n){return n===t||rr(n,t,e)}}function cr(t,e){return Ni(t)&&qi(e)?Yi(t,e):function(n){var r=zs(n,t);return r===tt&&r===e?Ys(n,t):er(e,r,tt,gt|vt)}}function fr(t,e,n,r,i){if(t!==e){if(!Hf(e)&&!_s(e))var o=Vs(e);c(o||e,function(a,s){if(o&&(s=a,a=e[s]),ns(a))i||(i=new Ze),lr(t,e,s,n,fr,r,i);else{var u=r?r(t[s],a,s+"",t,e,i):tt;u===tt&&(u=a),ln(t,s,u)}})}}function lr(t,e,n,r,i,o,a){var s=t[n],u=e[n],c=a.get(u);if(c)return void ln(t,n,c);var f=o?o(s,u,n+"",t,e,a):tt,l=f===tt;l&&(f=u,Hf(u)||_s(u)?Hf(s)?f=s:Va(s)?f=Hr(s):(l=!1,f=Tn(u,!0)):hs(u)||qa(u)?qa(s)?f=Bs(s):!ns(s)||r&&Qa(s)?(l=!1,f=Tn(u,!0)):f=s:l=!1),a.set(u,f),l&&i(f,u,r,o,a),a["delete"](u),ln(t,n,f)}function hr(t,e,n){var r=-1;e=y(e.length?e:[ju],wi());var i=sr(t,function(t,n,i){var o=y(e,function(e){return e(t)});return{criteria:o,index:++r,value:t}});return C(i,function(t,e){return N(t,e,n)})}function pr(t,e){return t=Object(t),v(e,function(e,n){return n in t&&(e[n]=t[n]),e},{})}function dr(t,e){for(var n=-1,r=mi(t),i=r.length,o={};++n<i;){var a=r[n],s=t[a];e(s,a)&&(o[a]=s)}return o}function yr(t){return function(e){return null==e?tt:e[t]}}function gr(t){return function(e){return Jn(e,t)}}function vr(t,e,n,r){var i=r?S:E,o=-1,a=e.length,s=t;for(n&&(s=y(t,R(n)));++o<a;)for(var u=0,c=e[o],f=n?n(c):c;(u=i(s,f,u,r))>-1;)s!==t&&xc.call(s,u,1),xc.call(t,u,1);return t}function _r(t,e){for(var n=t?e.length:0,r=n-1;n--;){var i=e[n];if(r==n||i!=o){var o=i;if(W(i))xc.call(t,i,1);else if(Ni(i,t))delete t[i];else{var a=Bn(i),s=Wi(t,a);null!=s&&delete s[po(a)]}}}return t}function mr(t,e){return t+Bc(Mc()*(e-t+1))}function br(t,e,n,r){for(var i=-1,o=Ic(Cc((e-t)/(n||1)),0),a=Array(o);o--;)a[r?o:++i]=t,t+=n;return a}function wr(t,e){var n="";if(!t||1>e||e>xt)return n;do e%2&&(n+=t),e=Bc(e/2),e&&(t+=t);while(e);return n}function kr(t,e,n,r){e=Ni(e,t)?[e]:Bn(e);for(var i=-1,o=e.length,a=o-1,s=t;null!=s&&++i<o;){var u=e[i];if(ns(s)){var c=n;if(i!=a){var f=s[u];c=r?r(f,u,s):tt,c===tt&&(c=null==f?W(e[i+1])?[]:{}:f)}hn(s,u,c)}s=s[u]}return t}function Er(t,e,n){var r=-1,i=t.length;0>e&&(e=-e>i?0:i+e),n=n>i?i:n,0>n&&(n+=i),i=e>n?0:n-e>>>0,e>>>=0;for(var o=Array(i);++r<i;)o[r]=t[r+e];return o}function Sr(t,e){var n;return ef(t,function(t,r,i){return n=e(t,r,i),!n}),!!n}function Ar(t,e,n){var r=0,i=t?t.length:r;if("number"==typeof e&&e===e&&Rt>=i){for(;i>r;){var o=r+i>>>1,a=t[o];(n?e>=a:e>a)&&null!==a?r=o+1:i=o}return i}return xr(t,e,ju,n)}function xr(t,e,n,r){e=n(e);for(var i=0,o=t?t.length:0,a=e!==e,s=null===e,u=e===tt;o>i;){var c=Bc((i+o)/2),f=n(t[c]),l=f!==tt,h=f===f;if(a)var p=h||r;else p=s?h&&l&&(r||null!=f):u?h&&(r||l):null==f?!1:r?e>=f:e>f;p?i=c+1:o=c}return jc(o,Tt)}function Cr(t){return Br(t)}function Br(t,e){for(var n=0,r=t.length,i=t[0],o=e?e(i):i,a=o,s=1,u=[i];++n<r;)i=t[n],o=e?e(i):i,Ua(o,a)||(a=o,u[s++]=i);return u}function Or(t,e,n){var r=-1,i=p,o=t.length,a=!0,s=[],u=s;if(n)a=!1,i=d;else if(o>=nt){var c=e?null:sf(t);if(c)return G(c);a=!1,i=Xe,u=new Ge}else u=e?[]:s;t:for(;++r<o;){var f=t[r],l=e?e(f):f;if(a&&l===l){for(var h=u.length;h--;)if(u[h]===l)continue t;e&&u.push(l),s.push(f)}else i(u,l,n)||(u!==s&&u.push(l),s.push(f))}return s}function Tr(t,e){e=Ni(e,t)?[e]:Bn(e),t=Wi(t,e);var n=po(e);return null!=t&&qs(t,n)?delete t[n]:!0;
}function Rr(t,e,n,r){return kr(t,e,n(Jn(t,e)),r)}function Pr(t,e,n,r){for(var i=t.length,o=r?i:-1;(r?o--:++o<i)&&e(t[o],o,t););return n?Er(t,r?0:o,r?o+1:i):Er(t,r?o+1:0,r?i:o)}function Ir(t,e){var n=t;return n instanceof L&&(n=n.value()),v(e,function(t,e){return e.func.apply(e.thisArg,g([t],e.args))},n)}function jr(t,e,n){for(var r=-1,i=t.length;++r<i;)var o=o?g(Nn(o,t[r],e,n),Nn(t[r],o,e,n)):t[r];return o&&o.length?Or(o,e,n):[]}function Lr(t,e,n){for(var r=-1,i=t.length,o=e.length,a={};++r<i;){var s=o>r?e[r]:tt;n(a,t[r],s)}return a}function Mr(t,e){if(e)return t.slice();var n=new t.constructor(t.length);return t.copy(n),n}function Nr(t){var e=new t.constructor(t.byteLength);return new _c(e).set(new _c(t)),e}function Ur(t,e){var n=e?Nr(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}function Dr(t,e,n){var r=e?n(J(t),!0):J(t);return v(r,i,new t.constructor)}function zr(t){var e=new t.constructor(t.source,xe.exec(t));return e.lastIndex=t.lastIndex,e}function qr(t,e,n){var r=e?n(G(t),!0):G(t);return v(r,o,new t.constructor)}function Yr(t){return Qc?Object(Qc.call(t)):{}}function Fr(t,e){var n=e?Nr(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}function Vr(t,e,n,r){for(var i=-1,o=t.length,a=n.length,s=-1,u=e.length,c=Ic(o-a,0),f=Array(u+c),l=!r;++s<u;)f[s]=e[s];for(;++i<a;)(l||o>i)&&(f[n[i]]=t[i]);for(;c--;)f[s++]=t[i++];return f}function Wr(t,e,n,r){for(var i=-1,o=t.length,a=-1,s=n.length,u=-1,c=e.length,f=Ic(o-s,0),l=Array(f+c),h=!r;++i<f;)l[i]=t[i];for(var p=i;++u<c;)l[p+u]=e[u];for(;++a<s;)(h||o>i)&&(l[p+n[a]]=t[i++]);return l}function Hr(t,e){var n=-1,r=t.length;for(e||(e=Array(r));++n<r;)e[n]=t[n];return e}function Jr(t,e,n){return $r(t,e,n)}function $r(t,e,n,r){n||(n={});for(var i=-1,o=e.length;++i<o;){var a=e[i],s=r?r(n[a],t[a],a,n,t):t[a];hn(n,a,s)}return n}function Gr(t,e){return Jr(t,xi(t),e)}function Xr(t,e){return function(n,r){var i=Hf(n)?s:pn,o=e?e():{};return i(n,t,wi(r),o)}}function Kr(t){return Ba(function(e,n){var r=-1,i=n.length,o=i>1?n[i-1]:tt,a=i>2?n[2]:tt;for(o="function"==typeof o?(i--,o):tt,a&&Mi(n[0],n[1],a)&&(o=3>i?tt:o,i=1),e=Object(e);++r<i;){var s=n[r];s&&t(e,s,r,o)}return e})}function Zr(t,e){return function(n,r){if(null==n)return n;if(!Fa(n))return t(n,r);for(var i=n.length,o=e?i:-1,a=Object(n);(e?o--:++o<i)&&r(a[o],o,a)!==!1;);return n}}function Qr(t){return function(e,n,r){for(var i=-1,o=Object(e),a=r(e),s=a.length;s--;){var u=a[t?s:++i];if(n(o[u],u,o)===!1)break}return e}}function ti(t,e,n){function r(){var e=this&&this!==qn&&this instanceof r?o:t;return e.apply(i?n:this,arguments)}var i=e&at,o=ri(t);return r}function ei(t){return function(e){e=Ts(e);var n=mn.test(e)?K(e):tt,r=n?n[0]:e.charAt(0),i=n?n.slice(1).join(""):e.slice(1);return r[t]()+i}}function ni(t){return function(e){return v(Tu(fu(e)),t,"")}}function ri(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var n=jn(t.prototype),r=t.apply(n,e);return ns(r)?r:n}}function ii(t,e,n){function r(){for(var o=arguments.length,s=Array(o),u=o,c=Si(r);u--;)s[u]=arguments[u];var f=3>o&&s[0]!==c&&s[o-1]!==c?[]:$(s,c);if(o-=f.length,n>o)return hi(t,e,ai,r.placeholder,tt,s,f,tt,tt,n-o);var l=this&&this!==qn&&this instanceof r?i:t;return a(l,this,s)}var i=ri(t);return r}function oi(t){return Ba(function(e){e=Fn(e,1);var n=e.length,i=n,o=r.prototype.thru;for(t&&e.reverse();i--;){var a=e[i];if("function"!=typeof a)throw new oc(rt);if(o&&!s&&"wrapper"==bi(a))var s=new r([],!0)}for(i=s?i:n;++i<n;){a=e[i];var u=bi(a),c="wrapper"==u?uf(a):tt;s=c&&Di(c[0])&&c[1]==(pt|ct|lt|dt)&&!c[4].length&&1==c[9]?s[bi(c[0])].apply(s,c[3]):1==a.length&&Di(a)?s[u]():s.thru(a)}return function(){var t=arguments,r=t[0];if(s&&1==t.length&&Hf(r)&&r.length>=nt)return s.plant(r).value();for(var i=0,o=n?e[i].apply(this,t):r;++i<n;)o=e[i].call(this,o);return o}})}function ai(t,e,n,r,i,o,a,s,u,c){function f(){for(var v=arguments.length,_=v,m=Array(v);_--;)m[_]=arguments[_];if(d)var b=Si(f),w=U(m,b);if(r&&(m=Vr(m,r,i,d)),o&&(m=Wr(m,o,a,d)),v-=w,d&&c>v){var k=$(m,b);return hi(t,e,ai,f.placeholder,n,m,k,s,u,c-v)}var E=h?n:this,S=p?E[t]:t;return v=m.length,s?m=Hi(m,s):y&&v>1&&m.reverse(),l&&v>u&&(m.length=u),this&&this!==qn&&this instanceof f&&(S=g||ri(S)),S.apply(E,m)}var l=e&pt,h=e&at,p=e&st,d=e&(ct|ft),y=e&yt,g=p?tt:ri(t);return f}function si(t,e){return function(n,r){return Qn(n,t,e(r),{})}}function ui(t){return Ba(function(e){return e=y(Fn(e,1,Li),wi()),Ba(function(n){var r=this;return t(e,function(t){return a(t,r,n)})})})}function ci(t,e){e=e===tt?" ":e+"";var n=e.length;if(2>n)return n?wr(e,t):e;var r=wr(e,Cc(t/X(e)));return mn.test(e)?K(r).slice(0,t).join(""):r.slice(0,t)}function fi(t,e,n,r){function i(){for(var e=-1,u=arguments.length,c=-1,f=r.length,l=Array(f+u),h=this&&this!==qn&&this instanceof i?s:t;++c<f;)l[c]=r[c];for(;u--;)l[c++]=arguments[++e];return a(h,o?n:this,l)}var o=e&at,s=ri(t);return i}function li(t){return function(e,n,r){return r&&"number"!=typeof r&&Mi(e,n,r)&&(n=r=tt),e=Cs(e),e=e===e?e:0,n===tt?(n=e,e=0):n=Cs(n)||0,r=r===tt?n>e?1:-1:Cs(r)||0,br(e,n,r,t)}}function hi(t,e,n,r,i,o,a,s,u,c){var f=e&ct,l=s?Hr(s):tt,h=f?a:tt,p=f?tt:a,d=f?o:tt,y=f?tt:o;e|=f?lt:ht,e&=~(f?ht:lt),e&ut||(e&=~(at|st));var g=[t,e,i,d,h,y,p,l,u,c],v=n.apply(tt,g);return Di(t)&&lf(v,g),v.placeholder=r,v}function pi(t){var e=rc[t];return function(t,n){if(t=Cs(t),n=As(n)){var r=(Ts(t)+"e").split("e"),i=e(r[0]+"e"+(+r[1]+n));return r=(Ts(i)+"e").split("e"),+(r[0]+"e"+(+r[1]-n))}return e(t)}}function di(t,e,n,r,i,o,a,s){var u=e&st;if(!u&&"function"!=typeof t)throw new oc(rt);var c=r?r.length:0;if(c||(e&=~(lt|ht),r=i=tt),a=a===tt?a:Ic(As(a),0),s=s===tt?s:As(s),c-=i?i.length:0,e&ht){var f=r,l=i;r=i=tt}var h=u?tt:uf(t),p=[t,e,n,r,i,f,l,o,a,s];if(h&&Fi(p,h),t=p[0],e=p[1],n=p[2],r=p[3],i=p[4],s=p[9]=null==p[9]?u?0:t.length:Ic(p[9]-c,0),!s&&e&(ct|ft)&&(e&=~(ct|ft)),e&&e!=at)d=e==ct||e==ft?ii(t,e,s):e!=lt&&e!=(at|lt)||i.length?ai.apply(tt,p):fi(t,e,n,r);else var d=ti(t,e,n);var y=h?af:lf;return y(d,p)}function yi(t,e,n,r,i,o){var a=-1,s=i&vt,u=i&gt,c=t.length,f=e.length;if(c!=f&&!(s&&f>c))return!1;var l=o.get(t);if(l)return l==e;var h=!0;for(o.set(t,e);++a<c;){var p=t[a],d=e[a];if(r)var y=s?r(d,p,a,e,t,o):r(p,d,a,t,e,o);if(y!==tt){if(y)continue;h=!1;break}if(u){if(!m(e,function(t){return p===t||n(p,t,r,i,o)})){h=!1;break}}else if(p!==d&&!n(p,d,r,i,o)){h=!1;break}}return o["delete"](t),h}function gi(t,e,n,r,i,o,a){switch(n){case Xt:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case Gt:return t.byteLength==e.byteLength&&r(new _c(t),new _c(e))?!0:!1;case jt:case Lt:return+t==+e;case Mt:return t.name==e.name&&t.message==e.message;case zt:return t!=+t?e!=+e:t==+e;case Ft:case Wt:return t==e+"";case Dt:var s=J;case Vt:var u=o&vt;if(s||(s=G),t.size!=e.size&&!u)return!1;var c=a.get(t);return c?c==e:(o|=gt,a.set(t,e),yi(s(t),s(e),r,i,o,a));case Ht:if(Qc)return Qc.call(t)==Qc.call(e)}return!1}function vi(t,e,n,r,i,o){var a=i&vt,s=Fs(t),u=s.length,c=Fs(e),f=c.length;if(u!=f&&!a)return!1;for(var l=u;l--;){var h=s[l];if(!(a?h in e:Gn(e,h)))return!1}var p=o.get(t);if(p)return p==e;var d=!0;o.set(t,e);for(var y=a;++l<u;){h=s[l];var g=t[h],v=e[h];if(r)var _=a?r(v,g,h,e,t,o):r(g,v,h,t,e,o);if(!(_===tt?g===v||n(g,v,r,i,o):_)){d=!1;break}y||(y="constructor"==h)}if(d&&!y){var m=t.constructor,b=e.constructor;m!=b&&"constructor"in t&&"constructor"in e&&!("function"==typeof m&&m instanceof m&&"function"==typeof b&&b instanceof b)&&(d=!1)}return o["delete"](t),d}function _i(t){return $n(t,Fs,xi)}function mi(t){return $n(t,Vs,ff)}function bi(t){for(var e=t.name+"",n=Hc[e],r=cc.call(Hc,e)?n.length:0;r--;){var i=n[r],o=i.func;if(null==o||o==t)return i.name}return e}function wi(){var t=e.iteratee||Lu;return t=t===Lu?ir:t,arguments.length?t(arguments[0],arguments[1]):t}function ki(t){for(var e=Zs(t),n=e.length;n--;)e[n][2]=qi(e[n][1]);return e}function Ei(t,e){var n=t[e];return us(n)?n:tt}function Si(t){var n=cc.call(e,"placeholder")?e:t;return n.placeholder}function Ai(t){return Oc(Object(t))}function xi(t){return wc(Object(t))}function Ci(t){return hc.call(t)}function Bi(t,e,n){for(var r=-1,i=n.length;++r<i;){var o=n[r],a=o.size;switch(o.type){case"drop":t+=a;break;case"dropRight":e-=a;break;case"take":e=jc(e,t+a);break;case"takeRight":t=Ic(t,e-a)}}return{start:t,end:e}}function Oi(t,e,n){e=Ni(e,t)?[e]:Bn(e);for(var r,i=-1,o=e.length;++i<o;){var a=e[i];if(!(r=null!=t&&n(t,a)))break;t=t[a]}if(r)return r;var o=t?t.length:0;return!!o&&es(o)&&W(a,o)&&(Hf(t)||gs(t)||qa(t))}function Ti(t){var e=t.length,n=t.constructor(e);return e&&"string"==typeof t[0]&&cc.call(t,"index")&&(n.index=t.index,n.input=t.input),n}function Ri(t){return"function"!=typeof t.constructor||zi(t)?{}:jn(Ai(t))}function Pi(t,e,n,r){var i=t.constructor;switch(e){case Gt:return Nr(t);case jt:case Lt:return new i(+t);case Xt:return Ur(t,r);case Kt:case Zt:case Qt:case te:case ee:case ne:case re:case ie:case oe:return Fr(t,r);case Dt:return Dr(t,r,n);case zt:case Wt:return new i(t);case Ft:return zr(t);case Vt:return qr(t,r,n);case Ht:return Yr(t)}}function Ii(t){var e=t?t.length:tt;return es(e)&&(Hf(t)||gs(t)||qa(t))?O(e,String):null}function ji(t){return Va(t)&&(Hf(t)||qa(t))}function Li(t){return Hf(t)&&!(2==t.length&&!Qa(t[0]))}function Mi(t,e,n){if(!ns(n))return!1;var r=typeof e;return("number"==r?Fa(n)&&W(e,n.length):"string"==r&&e in n)?Ua(n[e],t):!1}function Ni(t,e){var n=typeof t;return"number"==n||"symbol"==n?!0:!Hf(t)&&(vs(t)||ve.test(t)||!ge.test(t)||null!=e&&t in Object(e))}function Ui(t){var e=typeof t;return"number"==e||"boolean"==e||"string"==e&&"__proto__"!=t||null==t}function Di(t){var n=bi(t),r=e[n];if("function"!=typeof r||!(n in L.prototype))return!1;if(t===r)return!0;var i=uf(r);return!!i&&t===i[0]}function zi(t){var e=t&&t.constructor,n="function"==typeof e&&e.prototype||sc;return t===n}function qi(t){return t===t&&!ns(t)}function Yi(t,e){return function(n){return null==n?!1:n[t]===e&&(e!==tt||t in Object(n))}}function Fi(t,e){var n=t[1],r=e[1],i=n|r,o=(at|st|pt)>i,a=r==pt&&n==ct||r==pt&&n==dt&&t[7].length<=e[8]||r==(pt|dt)&&e[7].length<=e[8]&&n==ct;if(!o&&!a)return t;r&at&&(t[2]=e[2],i|=n&at?0:ut);var s=e[3];if(s){var u=t[3];t[3]=u?Vr(u,s,e[4]):Hr(s),t[4]=u?$(t[3],ot):Hr(e[4])}return s=e[5],s&&(u=t[5],t[5]=u?Wr(u,s,e[6]):Hr(s),t[6]=u?$(t[5],ot):Hr(e[6])),s=e[7],s&&(t[7]=Hr(s)),r&pt&&(t[8]=null==t[8]?e[8]:jc(t[8],e[8])),null==t[9]&&(t[9]=e[9]),t[0]=e[0],t[1]=i,t}function Vi(t,e,n,r,i,o){return ns(t)&&ns(e)&&fr(t,e,tt,Vi,o.set(e,t)),t}function Wi(t,e){return 1==e.length?t:Jn(t,Er(e,0,-1))}function Hi(t,e){for(var n=t.length,r=jc(e.length,n),i=Hr(t);r--;){var o=e[r];t[r]=W(o,n)?i[o]:tt}return t}function Ji(t){if(null!=t){try{return uc.call(t)}catch(e){}try{return t+""}catch(e){}}return""}function $i(t){if(t instanceof L)return t.clone();var e=new r(t.__wrapped__,t.__chain__);return e.__actions__=Hr(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}function Gi(t,e,n){e=(n?Mi(t,e,n):e===tt)?1:Ic(As(e),0);var r=t?t.length:0;if(!r||1>e)return[];for(var i=0,o=0,a=Array(Cc(r/e));r>i;)a[o++]=Er(t,i,i+=e);return a}function Xi(t){for(var e=-1,n=t?t.length:0,r=0,i=[];++e<n;){var o=t[e];o&&(i[r++]=o)}return i}function Ki(){var t=arguments.length,e=Ia(arguments[0]);if(2>t)return t?Hr(e):[];for(var n=Array(t-1);t--;)n[t-1]=arguments[t];return u(e,Fn(n,1))}function Zi(t,e,n){var r=t?t.length:0;return r?(e=n||e===tt?1:As(e),Er(t,0>e?0:e,r)):[]}function Qi(t,e,n){var r=t?t.length:0;return r?(e=n||e===tt?1:As(e),e=r-e,Er(t,0,0>e?0:e)):[]}function to(t,e){return t&&t.length?Pr(t,wi(e,3),!0,!0):[]}function eo(t,e){return t&&t.length?Pr(t,wi(e,3),!0):[]}function no(t,e,n,r){var i=t?t.length:0;return i?(n&&"number"!=typeof n&&Mi(t,e,n)&&(n=0,r=i),Dn(t,e,n,r)):[]}function ro(t,e){return t&&t.length?k(t,wi(e,3)):-1}function io(t,e){return t&&t.length?k(t,wi(e,3),!0):-1}function oo(t){var e=t?t.length:0;return e?Fn(t,1):[]}function ao(t){var e=t?t.length:0;return e?Fn(t,At):[]}function so(t,e){var n=t?t.length:0;return n?(e=e===tt?1:As(e),Fn(t,e)):[]}function uo(t){for(var e=-1,n=t?t.length:0,r={};++e<n;){var i=t[e];r[i[0]]=i[1]}return r}function co(t){return t?t[0]:tt}function fo(t,e,n){var r=t?t.length:0;return r?(n=As(n),0>n&&(n=Ic(r+n,0)),E(t,e,n)):-1}function lo(t){return Qi(t,1)}function ho(t,e){return t?Rc.call(t,e):""}function po(t){var e=t?t.length:0;return e?t[e-1]:tt}function yo(t,e,n){var r=t?t.length:0;if(!r)return-1;var i=r;if(n!==tt&&(i=As(n),i=(0>i?Ic(r+i,0):jc(i,r-1))+1),e!==e)return F(t,i,!0);for(;i--;)if(t[i]===e)return i;return-1}function go(t,e){return t&&t.length&&e&&e.length?vr(t,e):t}function vo(t,e,n){return t&&t.length&&e&&e.length?vr(t,e,wi(n)):t}function _o(t,e,n){return t&&t.length&&e&&e.length?vr(t,e,tt,n):t}function mo(t,e){var n=[];if(!t||!t.length)return n;var r=-1,i=[],o=t.length;for(e=wi(e,3);++r<o;){var a=t[r];e(a,r,t)&&(n.push(a),i.push(r))}return _r(t,i),n}function bo(t){return t?Nc.call(t):t}function wo(t,e,n){var r=t?t.length:0;return r?(n&&"number"!=typeof n&&Mi(t,e,n)?(e=0,n=r):(e=null==e?0:As(e),n=n===tt?r:As(n)),Er(t,e,n)):[]}function ko(t,e){return Ar(t,e)}function Eo(t,e,n){return xr(t,e,wi(n))}function So(t,e){var n=t?t.length:0;if(n){var r=Ar(t,e);if(n>r&&Ua(t[r],e))return r}return-1}function Ao(t,e){return Ar(t,e,!0)}function xo(t,e,n){return xr(t,e,wi(n),!0)}function Co(t,e){var n=t?t.length:0;if(n){var r=Ar(t,e,!0)-1;if(Ua(t[r],e))return r}return-1}function Bo(t){return t&&t.length?Cr(t):[]}function Oo(t,e){return t&&t.length?Br(t,wi(e)):[]}function To(t){return Zi(t,1)}function Ro(t,e,n){return t&&t.length?(e=n||e===tt?1:As(e),Er(t,0,0>e?0:e)):[]}function Po(t,e,n){var r=t?t.length:0;return r?(e=n||e===tt?1:As(e),e=r-e,Er(t,0>e?0:e,r)):[]}function Io(t,e){return t&&t.length?Pr(t,wi(e,3),!1,!0):[]}function jo(t,e){return t&&t.length?Pr(t,wi(e,3)):[]}function Lo(t){return t&&t.length?Or(t):[]}function Mo(t,e){return t&&t.length?Or(t,wi(e)):[]}function No(t,e){return t&&t.length?Or(t,tt,e):[]}function Uo(t){if(!t||!t.length)return[];var e=0;return t=h(t,function(t){return Va(t)?(e=Ic(t.length,e),!0):void 0}),O(e,function(e){return y(t,yr(e))})}function Do(t,e){if(!t||!t.length)return[];var n=Uo(t);return null==e?n:y(n,function(t){return a(e,tt,t)})}function zo(t,e){return Lr(t||[],e||[],hn)}function qo(t,e){return Lr(t||[],e||[],kr)}function Yo(t){var n=e(t);return n.__chain__=!0,n}function Fo(t,e){return e(t),t}function Vo(t,e){return e(t)}function Wo(){return Yo(this)}function Ho(){return new r(this.value(),this.__chain__)}function Jo(){this.__values__===tt&&(this.__values__=Ss(this.value()));var t=this.__index__>=this.__values__.length,e=t?tt:this.__values__[this.__index__++];return{done:t,value:e}}function $o(){return this}function Go(t){for(var e,r=this;r instanceof n;){var i=$i(r);i.__index__=0,i.__values__=tt,e?o.__wrapped__=i:e=i;var o=i;r=r.__wrapped__}return o.__wrapped__=t,e}function Xo(){var t=this.__wrapped__;if(t instanceof L){var e=t;return this.__actions__.length&&(e=new L(this)),e=e.reverse(),e.__actions__.push({func:Vo,args:[bo],thisArg:tt}),new r(e,this.__chain__)}return this.thru(bo)}function Ko(){return Ir(this.__wrapped__,this.__actions__)}function Zo(t,e,n){var r=Hf(t)?l:Un;return n&&Mi(t,e,n)&&(e=tt),r(t,wi(e,3))}function Qo(t,e){var n=Hf(t)?h:zn;return n(t,wi(e,3))}function ta(t,e){if(e=wi(e,3),Hf(t)){var n=k(t,e);return n>-1?t[n]:tt}return w(t,e,ef)}function ea(t,e){if(e=wi(e,3),Hf(t)){var n=k(t,e,!0);return n>-1?t[n]:tt}return w(t,e,nf)}function na(t,e){return Fn(ua(t,e),1)}function ra(t,e){return Fn(ua(t,e),At)}function ia(t,e,n){return n=n===tt?1:As(n),Fn(ua(t,e),n)}function oa(t,e){return"function"==typeof e&&Hf(t)?c(t,e):ef(t,wi(e))}function aa(t,e){return"function"==typeof e&&Hf(t)?f(t,e):nf(t,wi(e))}function sa(t,e,n,r){t=Fa(t)?t:iu(t),n=n&&!r?As(n):0;var i=t.length;return 0>n&&(n=Ic(i+n,0)),gs(t)?i>=n&&t.indexOf(e,n)>-1:!!i&&E(t,e,n)>-1}function ua(t,e){var n=Hf(t)?y:sr;return n(t,wi(e,3))}function ca(t,e,n,r){return null==t?[]:(Hf(e)||(e=null==e?[]:[e]),n=r?tt:n,Hf(n)||(n=null==n?[]:[n]),hr(t,e,n))}function fa(t,e,n){var r=Hf(t)?v:x,i=arguments.length<3;return r(t,wi(e,4),n,i,ef)}function la(t,e,n){var r=Hf(t)?_:x,i=arguments.length<3;return r(t,wi(e,4),n,i,nf)}function ha(t,e){var n=Hf(t)?h:zn;return e=wi(e,3),n(t,function(t,n,r){return!e(t,n,r)})}function pa(t){var e=Fa(t)?t:iu(t),n=e.length;return n>0?e[mr(0,n-1)]:tt}function da(t,e,n){var r=-1,i=Ss(t),o=i.length,a=o-1;for(e=(n?Mi(t,e,n):e===tt)?1:On(As(e),0,o);++r<e;){var s=mr(r,a),u=i[s];i[s]=i[r],i[r]=u}return i.length=e,i}function ya(t){return da(t,Ot)}function ga(t){if(null==t)return 0;if(Fa(t)){var e=t.length;return e&&gs(t)?X(t):e}if(rs(t)){var n=Ci(t);if(n==Dt||n==Vt)return t.size}return Fs(t).length}function va(t,e,n){var r=Hf(t)?m:Sr;return n&&Mi(t,e,n)&&(e=tt),r(t,wi(e,3))}function _a(t,e){if("function"!=typeof e)throw new oc(rt);return t=As(t),function(){return--t<1?e.apply(this,arguments):void 0}}function ma(t,e,n){return e=n?tt:e,e=t&&null==e?t.length:e,di(t,pt,tt,tt,tt,tt,e)}function ba(t,e){var n;if("function"!=typeof e)throw new oc(rt);return t=As(t),function(){return--t>0&&(n=e.apply(this,arguments)),1>=t&&(e=tt),n}}function wa(t,e,n){e=n?tt:e;var r=di(t,ct,tt,tt,tt,tt,tt,e);return r.placeholder=wa.placeholder,r}function ka(t,e,n){e=n?tt:e;var r=di(t,ft,tt,tt,tt,tt,tt,e);return r.placeholder=ka.placeholder,r}function Ea(t,e,n){function r(e){var n=h,r=p;return h=p=tt,v=e,d=t.apply(r,n)}function i(t){return v=t,y=Ac(s,e),_?r(t):d}function o(t){var n=t-g,r=t-v,i=e-n;return m===!1?i:jc(i,m-r)}function a(t){var n=t-g,r=t-v;return!g||n>=e||0>n||m!==!1&&r>=m}function s(){var t=Nf();return a(t)?u(t):void(y=Ac(s,o(t)))}function u(t){return mc(y),y=tt,b&&h?r(t):(h=p=tt,d)}function c(){y!==tt&&mc(y),g=v=0,h=p=y=tt}function f(){return y===tt?d:u(Nf())}function l(){var t=Nf(),n=a(t);return h=arguments,p=this,g=t,n?y===tt?i(g):(mc(y),y=Ac(s,e),r(g)):d}var h,p,d,y,g=0,v=0,_=!1,m=!1,b=!0;if("function"!=typeof t)throw new oc(rt);return e=Cs(e)||0,ns(n)&&(_=!!n.leading,m="maxWait"in n&&Ic(Cs(n.maxWait)||0,e),b="trailing"in n?!!n.trailing:b),l.cancel=c,l.flush=f,l}function Sa(t){return di(t,yt)}function Aa(t,e){if("function"!=typeof t||e&&"function"!=typeof e)throw new oc(rt);var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=t.apply(this,r);return n.cache=o.set(i,a),a};return n.cache=new(Aa.Cache||Fe),n}function xa(t){if("function"!=typeof t)throw new oc(rt);return function(){return!t.apply(this,arguments)}}function Ca(t){return ba(2,t)}function Ba(t,e){if("function"!=typeof t)throw new oc(rt);return e=Ic(e===tt?t.length-1:As(e),0),function(){for(var n=arguments,r=-1,i=Ic(n.length-e,0),o=Array(i);++r<i;)o[r]=n[e+r];switch(e){case 0:return t.call(this,o);case 1:return t.call(this,n[0],o);case 2:return t.call(this,n[0],n[1],o)}var s=Array(e+1);for(r=-1;++r<e;)s[r]=n[r];return s[e]=o,a(t,this,s)}}function Oa(t,e){if("function"!=typeof t)throw new oc(rt);return e=e===tt?0:Ic(As(e),0),Ba(function(n){var r=n[e],i=n.slice(0,e);return r&&g(i,r),a(t,this,i)})}function Ta(t,e,n){var r=!0,i=!0;if("function"!=typeof t)throw new oc(rt);return ns(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),Ea(t,e,{leading:r,maxWait:e,trailing:i})}function Ra(t){return ma(t,1)}function Pa(t,e){return e=null==e?ju:e,Ff(e,t)}function Ia(){if(!arguments.length)return[];var t=arguments[0];return Hf(t)?t:[t]}function ja(t){return Tn(t,!1,!0)}function La(t,e){return Tn(t,!1,!0,e)}function Ma(t){return Tn(t,!0,!0)}function Na(t,e){return Tn(t,!0,!0,e)}function Ua(t,e){return t===e||t!==t&&e!==e}function Da(t,e){return t>e}function za(t,e){return t>=e}function qa(t){return Va(t)&&cc.call(t,"callee")&&(!Sc.call(t,"callee")||hc.call(t)==Pt)}function Ya(t){return rs(t)&&hc.call(t)==Gt}function Fa(t){return null!=t&&es(cf(t))&&!Qa(t)}function Va(t){return rs(t)&&Fa(t)}function Wa(t){return t===!0||t===!1||rs(t)&&hc.call(t)==jt}function Ha(t){return rs(t)&&hc.call(t)==Lt}function Ja(t){return!!t&&1===t.nodeType&&rs(t)&&!hs(t)}function $a(t){if(Fa(t)&&(Hf(t)||gs(t)||Qa(t.splice)||qa(t)||Jf(t)))return!t.length;if(rs(t)){var e=Ci(t);if(e==Dt||e==Vt)return!t.size}for(var n in t)if(cc.call(t,n))return!1;return!(Wc&&Fs(t).length)}function Ga(t,e){return er(t,e)}function Xa(t,e,n){n="function"==typeof n?n:tt;var r=n?n(t,e):tt;return r===tt?er(t,e,n):!!r}function Ka(t){return rs(t)?hc.call(t)==Mt||"string"==typeof t.message&&"string"==typeof t.name:!1}function Za(t){return"number"==typeof t&&Tc(t)}function Qa(t){var e=ns(t)?hc.call(t):"";return e==Nt||e==Ut}function ts(t){return"number"==typeof t&&t==As(t)}function es(t){return"number"==typeof t&&t>-1&&t%1==0&&xt>=t}function ns(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function rs(t){return!!t&&"object"==typeof t}function is(t){return rs(t)&&Ci(t)==Dt}function os(t,e){return t===e||rr(t,e,ki(e))}function as(t,e,n){return n="function"==typeof n?n:tt,rr(t,e,ki(e),n)}function ss(t){return ls(t)&&t!=+t}function us(t){if(!ns(t))return!1;var e=Qa(t)||V(t)?dc:Te;return e.test(Ji(t))}function cs(t){return null===t}function fs(t){return null==t}function ls(t){return"number"==typeof t||rs(t)&&hc.call(t)==zt}function hs(t){if(!rs(t)||hc.call(t)!=qt||V(t))return!1;var e=Ai(t);if(null===e)return!0;var n=cc.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&uc.call(n)==lc}function ps(t){return ns(t)&&hc.call(t)==Ft}function ds(t){return ts(t)&&t>=-xt&&xt>=t}function ys(t){return rs(t)&&Ci(t)==Vt}function gs(t){return"string"==typeof t||!Hf(t)&&rs(t)&&hc.call(t)==Wt}function vs(t){return"symbol"==typeof t||rs(t)&&hc.call(t)==Ht}function _s(t){return rs(t)&&es(t.length)&&!!An[hc.call(t)]}function ms(t){return t===tt}function bs(t){return rs(t)&&Ci(t)==Jt}function ws(t){return rs(t)&&hc.call(t)==$t}function ks(t,e){return e>t}function Es(t,e){return e>=t}function Ss(t){if(!t)return[];if(Fa(t))return gs(t)?K(t):Hr(t);if(kc&&t[kc])return H(t[kc]());var e=Ci(t),n=e==Dt?J:e==Vt?G:iu;return n(t)}function As(t){if(!t)return 0===t?t:0;if(t=Cs(t),t===At||t===-At){var e=0>t?-1:1;return e*Ct}var n=t%1;return t===t?n?t-n:t:0}function xs(t){return t?On(As(t),0,Ot):0}function Cs(t){if("number"==typeof t)return t;if(vs(t))return Bt;if(ns(t)){var e=Qa(t.valueOf)?t.valueOf():t;t=ns(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(we,"");var n=Oe.test(t);return n||Re.test(t)?In(t.slice(2),n?2:8):Be.test(t)?Bt:+t}function Bs(t){return Jr(t,Vs(t))}function Os(t){return On(As(t),-xt,xt)}function Ts(t){if("string"==typeof t)return t;if(null==t)return"";if(vs(t))return tf?tf.call(t):"";var e=t+"";return"0"==e&&1/t==-At?"-0":e}function Rs(t,e){var n=jn(t);return e?dn(n,e):n}function Ps(t,e){return w(t,wi(e,3),Vn,!0)}function Is(t,e){return w(t,wi(e,3),Wn,!0)}function js(t,e){return null==t?t:rf(t,wi(e),Vs)}function Ls(t,e){return null==t?t:of(t,wi(e),Vs)}function Ms(t,e){return t&&Vn(t,wi(e))}function Ns(t,e){return t&&Wn(t,wi(e))}function Us(t){return null==t?[]:Hn(t,Fs(t))}function Ds(t){return null==t?[]:Hn(t,Vs(t))}function zs(t,e,n){var r=null==t?tt:Jn(t,e);return r===tt?n:r}function qs(t,e){return null!=t&&Oi(t,e,Gn)}function Ys(t,e){return null!=t&&Oi(t,e,Xn)}function Fs(t){var e=zi(t);if(!e&&!Fa(t))return or(t);var n=Ii(t),r=!!n,i=n||[],o=i.length;for(var a in t)!Gn(t,a)||r&&("length"==a||W(a,o))||e&&"constructor"==a||i.push(a);return i}function Vs(t){for(var e=-1,n=zi(t),r=ar(t),i=r.length,o=Ii(t),a=!!o,s=o||[],u=s.length;++e<i;){var c=r[e];a&&("length"==c||W(c,u))||"constructor"==c&&(n||!cc.call(t,c))||s.push(c)}return s}function Ws(t,e){var n={};return e=wi(e,3),Vn(t,function(t,r,i){n[e(t,r,i)]=t}),n}function Hs(t,e){var n={};return e=wi(e,3),Vn(t,function(t,r,i){n[r]=e(t,r,i)}),n}function Js(t,e){return e=wi(e),dr(t,function(t,n){return!e(t,n)})}function $s(t,e){return null==t?{}:dr(t,wi(e))}function Gs(t,e,n){e=Ni(e,t)?[e]:Bn(e);var r=-1,i=e.length;for(i||(t=tt,i=1);++r<i;){var o=null==t?tt:t[e[r]];o===tt&&(r=i,o=n),t=Qa(o)?o.call(t):o}return t}function Xs(t,e,n){return null==t?t:kr(t,e,n)}function Ks(t,e,n,r){return r="function"==typeof r?r:tt,null==t?t:kr(t,e,n,r)}function Zs(t){return T(t,Fs(t))}function Qs(t){return T(t,Vs(t))}function tu(t,e,n){var r=Hf(t)||_s(t);if(e=wi(e,4),null==n)if(r||ns(t)){var i=t.constructor;n=r?Hf(t)?new i:[]:Qa(i)?jn(Ai(t)):{}}else n={};return(r?c:Vn)(t,function(t,r,i){return e(n,t,r,i)}),n}function eu(t,e){return null==t?!0:Tr(t,e)}function nu(t,e,n){return null==t?t:Rr(t,e,_n(n))}function ru(t,e,n,r){return r="function"==typeof r?r:tt,null==t?t:Rr(t,e,_n(n),r)}function iu(t){return t?P(t,Fs(t)):[]}function ou(t){return null==t?[]:P(t,Vs(t))}function au(t,e,n){return n===tt&&(n=e,e=tt),n!==tt&&(n=Cs(n),n=n===n?n:0),e!==tt&&(e=Cs(e),e=e===e?e:0),On(Cs(t),e,n)}function su(t,e,n){return e=Cs(e)||0,n===tt?(n=e,e=0):n=Cs(n)||0,t=Cs(t),Kn(t,e,n)}function uu(t,e,n){if(n&&"boolean"!=typeof n&&Mi(t,e,n)&&(e=n=tt),n===tt&&("boolean"==typeof e?(n=e,e=tt):"boolean"==typeof t&&(n=t,t=tt)),t===tt&&e===tt?(t=0,e=1):(t=Cs(t)||0,e===tt?(e=t,t=0):e=Cs(e)||0),t>e){var r=t;t=e,e=r}if(n||t%1||e%1){var i=Mc();return jc(t+i*(e-t+Pn("1e-"+((i+"").length-1))),e)}return mr(t,e)}function cu(t){return yl(Ts(t).toLowerCase())}function fu(t){return t=Ts(t),t&&t.replace(Ie,z).replace(vn,"")}function lu(t,e,n){t=Ts(t),e="string"==typeof e?e:e+"";var r=t.length;return n=n===tt?r:On(As(n),0,r),n-=e.length,n>=0&&t.indexOf(e,n)==n}function hu(t){return t=Ts(t),t&&he.test(t)?t.replace(fe,q):t}function pu(t){return t=Ts(t),t&&be.test(t)?t.replace(me,"\\$&"):t}function du(t,e,n){t=Ts(t),e=As(e);var r=e?X(t):0;if(!e||r>=e)return t;var i=(e-r)/2;return ci(Bc(i),n)+t+ci(Cc(i),n)}function yu(t,e,n){t=Ts(t),e=As(e);var r=e?X(t):0;return e&&e>r?t+ci(e-r,n):t}function gu(t,e,n){t=Ts(t),e=As(e);var r=e?X(t):0;return e&&e>r?ci(e-r,n)+t:t}function vu(t,e,n){return n||null==e?e=0:e&&(e=+e),t=Ts(t).replace(we,""),Lc(t,e||(Ce.test(t)?16:10))}function _u(t,e,n){return e=(n?Mi(t,e,n):e===tt)?1:As(e),wr(Ts(t),e)}function mu(){var t=arguments,e=Ts(t[0]);return t.length<3?e:e.replace(t[1],t[2])}function bu(t,e,n){if(t=Ts(t),t&&("string"==typeof e||null!=e&&!ps(e))&&(e+="",""==e&&mn.test(t))){var r=K(t);return n===tt?r:r.slice(0,0>n?0:n)}return t.split(e,n)}function wu(t,e,n){return t=Ts(t),n=On(As(n),0,t.length),t.lastIndexOf(e,n)==n}function ku(t,n,r){var i=e.templateSettings;r&&Mi(t,n,r)&&(n=tt),t=Ts(t),n=Xf({},n,i,fn);var o,a,s=Xf({},n.imports,i.imports,fn),u=Fs(s),c=P(s,u),f=0,l=n.interpolate||je,h="__p += '",p=ic((n.escape||je).source+"|"+l.source+"|"+(l===ye?Ae:je).source+"|"+(n.evaluate||je).source+"|$","g"),d="//# sourceURL="+("sourceURL"in n?n.sourceURL:"lodash.templateSources["+ ++Sn+"]")+"\n";t.replace(p,function(e,n,r,i,s,u){return r||(r=i),h+=t.slice(f,u).replace(Le,Y),n&&(o=!0,h+="' +\n__e("+n+") +\n'"),s&&(a=!0,h+="';\n"+s+";\n__p += '"),r&&(h+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),f=u+e.length,e}),h+="';\n";var y=n.variable;y||(h="with (obj) {\n"+h+"\n}\n"),h=(a?h.replace(ae,""):h).replace(se,"$1").replace(ue,"$1;"),h="function("+(y||"obj")+") {\n"+(y?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(o?", __e = _.escape":"")+(a?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+h+"return __p\n}";var g=gl(function(){return Function(u,d+"return "+h).apply(tt,c)});if(g.source=h,Ka(g))throw g;return g}function Eu(t){return Ts(t).toLowerCase()}function Su(t){return Ts(t).toUpperCase()}function Au(t,e,n){if(t=Ts(t),!t)return t;if(n||e===tt)return t.replace(we,"");if(e+="",!e)return t;var r=K(t),i=K(e);return r.slice(I(r,i),j(r,i)+1).join("")}function xu(t,e,n){if(t=Ts(t),!t)return t;if(n||e===tt)return t.replace(Ee,"");if(e+="",!e)return t;var r=K(t);return r.slice(0,j(r,K(e))+1).join("")}function Cu(t,e,n){if(t=Ts(t),!t)return t;if(n||e===tt)return t.replace(ke,"");if(e+="",!e)return t;var r=K(t);return r.slice(I(r,K(e))).join("")}function Bu(t,e){var n=_t,r=mt;if(ns(e)){var i="separator"in e?e.separator:i;n="length"in e?As(e.length):n,r="omission"in e?Ts(e.omission):r}t=Ts(t);var o=t.length;if(mn.test(t)){var a=K(t);o=a.length}if(n>=o)return t;var s=n-X(r);if(1>s)return r;var u=a?a.slice(0,s).join(""):t.slice(0,s);if(i===tt)return u+r;if(a&&(s+=u.length-s),ps(i)){if(t.slice(s).search(i)){var c,f=u;for(i.global||(i=ic(i.source,Ts(xe.exec(i))+"g")),i.lastIndex=0;c=i.exec(f);)var l=c.index;u=u.slice(0,l===tt?s:l)}}else if(t.indexOf(i,s)!=s){var h=u.lastIndexOf(i);h>-1&&(u=u.slice(0,h))}return u+r}function Ou(t){return t=Ts(t),t&&le.test(t)?t.replace(ce,Z):t}function Tu(t,e,n){return t=Ts(t),e=n?tt:e,e===tt&&(e=kn.test(t)?wn:bn),t.match(e)||[]}function Ru(t){var e=t?t.length:0,n=wi();return t=e?y(t,function(t){if("function"!=typeof t[1])throw new oc(rt);return[n(t[0]),t[1]]}):[],Ba(function(n){for(var r=-1;++r<e;){var i=t[r];if(a(i[0],this,n))return a(i[1],this,n)}})}function Pu(t){return Rn(Tn(t,!0))}function Iu(t){return function(){return t}}function ju(t){return t}function Lu(t){return ir("function"==typeof t?t:Tn(t,!0))}function Mu(t){return ur(Tn(t,!0))}function Nu(t,e){return cr(t,Tn(e,!0))}function Uu(t,e,n){var r=Fs(e),i=Hn(e,r);null!=n||ns(e)&&(i.length||!r.length)||(n=e,e=t,t=this,i=Hn(e,Fs(e)));var o=ns(n)&&"chain"in n?n.chain:!0,a=Qa(t);return c(i,function(n){var r=e[n];t[n]=r,a&&(t.prototype[n]=function(){var e=this.__chain__;if(o||e){var n=t(this.__wrapped__),i=n.__actions__=Hr(this.__actions__);return i.push({func:r,args:arguments,thisArg:t}),n.__chain__=e,n}return r.apply(t,g([this.value()],arguments))})}),t}function Du(){return qn._===this&&(qn._=pc),this}function zu(){}function qu(t){return t=As(t),function(){return arguments[t]}}function Yu(t){return Ni(t)?yr(t):gr(t)}function Fu(t){return function(e){return null==t?tt:Jn(t,e)}}function Vu(t,e){if(t=As(t),1>t||t>xt)return[];var n=Ot,r=jc(t,Ot);e=wi(e),t-=Ot;for(var i=O(r,e);++n<t;)e(n);return i}function Wu(t){return Hf(t)?y(t,Cn):vs(t)?[t]:Hr(hf(t))}function Hu(t){var e=++fc;return Ts(t)+e}function Ju(t){return t&&t.length?b(t,ju,Da):tt}function $u(t,e){return t&&t.length?b(t,wi(e),Da):tt}function Gu(t){return A(t,ju)}function Xu(t,e){return A(t,wi(e))}function Ku(t){return t&&t.length?b(t,ju,ks):tt}function Zu(t,e){return t&&t.length?b(t,wi(e),ks):tt}function Qu(t){return t&&t.length?B(t,ju):0}function tc(t,e){return t&&t.length?B(t,wi(e)):0}t=t?Yn.defaults({},t,Yn.pick(qn,En)):qn;var ec=t.Date,nc=t.Error,rc=t.Math,ic=t.RegExp,oc=t.TypeError,ac=t.Array.prototype,sc=t.Object.prototype,uc=t.Function.prototype.toString,cc=sc.hasOwnProperty,fc=0,lc=uc.call(Object),hc=sc.toString,pc=qn._,dc=ic("^"+uc.call(cc).replace(me,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),yc=Mn?t.Buffer:tt,gc=t.Reflect,vc=t.Symbol,_c=t.Uint8Array,mc=t.clearTimeout,bc=gc?gc.enumerate:tt,wc=Object.getOwnPropertySymbols,kc="symbol"==typeof(kc=vc&&vc.iterator)?kc:tt,Ec=Object.create,Sc=sc.propertyIsEnumerable,Ac=t.setTimeout,xc=ac.splice,Cc=rc.ceil,Bc=rc.floor,Oc=Object.getPrototypeOf,Tc=t.isFinite,Rc=ac.join,Pc=Object.keys,Ic=rc.max,jc=rc.min,Lc=t.parseInt,Mc=rc.random,Nc=ac.reverse,Uc=Ei(t,"DataView"),Dc=Ei(t,"Map"),zc=Ei(t,"Promise"),qc=Ei(t,"Set"),Yc=Ei(t,"WeakMap"),Fc=Ei(Object,"create"),Vc=Yc&&new Yc,Wc=!Sc.call({valueOf:1},"valueOf"),Hc={},Jc=Ji(Uc),$c=Ji(Dc),Gc=Ji(zc),Xc=Ji(qc),Kc=Ji(Yc),Zc=vc?vc.prototype:tt,Qc=Zc?Zc.valueOf:tt,tf=Zc?Zc.toString:tt;e.templateSettings={escape:pe,evaluate:de,interpolate:ye,variable:"",imports:{_:e}},e.prototype=n.prototype,e.prototype.constructor=e,r.prototype=jn(n.prototype),r.prototype.constructor=r,L.prototype=jn(n.prototype),L.prototype.constructor=L,Ue.prototype=Fc?Fc(null):sc,Fe.prototype.clear=Ve,Fe.prototype["delete"]=We,
Fe.prototype.get=He,Fe.prototype.has=Je,Fe.prototype.set=$e,Ge.prototype.push=Ke,Ze.prototype.clear=Qe,Ze.prototype["delete"]=tn,Ze.prototype.get=en,Ze.prototype.has=nn,Ze.prototype.set=rn;var ef=Zr(Vn),nf=Zr(Wn,!0),rf=Qr(),of=Qr(!0);bc&&!Sc.call({valueOf:1},"valueOf")&&(ar=function(t){return H(bc(t))});var af=Vc?function(t,e){return Vc.set(t,e),t}:ju,sf=qc&&2===new qc([1,2]).size?function(t){return new qc(t)}:zu,uf=Vc?function(t){return Vc.get(t)}:zu,cf=yr("length");wc||(xi=function(){return[]});var ff=wc?function(t){for(var e=[];t;)g(e,xi(t)),t=Ai(t);return e}:xi;(Uc&&Ci(new Uc(new ArrayBuffer(1)))!=Xt||Dc&&Ci(new Dc)!=Dt||zc&&Ci(zc.resolve())!=Yt||qc&&Ci(new qc)!=Vt||Yc&&Ci(new Yc)!=Jt)&&(Ci=function(t){var e=hc.call(t),n=e==qt?t.constructor:tt,r=n?Ji(n):tt;if(r)switch(r){case Jc:return Xt;case $c:return Dt;case Gc:return Yt;case Xc:return Vt;case Kc:return Jt}return e});var lf=function(){var t=0,e=0;return function(n,r){var i=Nf(),o=wt-(i-e);if(e=i,o>0){if(++t>=bt)return n}else t=0;return af(n,r)}}(),hf=Aa(function(t){var e=[];return Ts(t).replace(_e,function(t,n,r,i){e.push(r?i.replace(Se,"$1"):n||t)}),e}),pf=Ba(function(t,e){return Va(t)?Nn(t,Fn(e,1,Va,!0)):[]}),df=Ba(function(t,e){var n=po(e);return Va(n)&&(n=tt),Va(t)?Nn(t,Fn(e,1,Va,!0),wi(n)):[]}),yf=Ba(function(t,e){var n=po(e);return Va(n)&&(n=tt),Va(t)?Nn(t,Fn(e,1,Va,!0),tt,n):[]}),gf=Ba(function(t){var e=y(t,gn);return e.length&&e[0]===t[0]?Zn(e):[]}),vf=Ba(function(t){var e=po(t),n=y(t,gn);return e===po(n)?e=tt:n.pop(),n.length&&n[0]===t[0]?Zn(n,wi(e)):[]}),_f=Ba(function(t){var e=po(t),n=y(t,gn);return e===po(n)?e=tt:n.pop(),n.length&&n[0]===t[0]?Zn(n,tt,e):[]}),mf=Ba(go),bf=Ba(function(t,e){e=y(Fn(e,1),String);var n=yn(t,e);return _r(t,e.sort(M)),n}),wf=Ba(function(t){return Or(Fn(t,1,Va,!0))}),kf=Ba(function(t){var e=po(t);return Va(e)&&(e=tt),Or(Fn(t,1,Va,!0),wi(e))}),Ef=Ba(function(t){var e=po(t);return Va(e)&&(e=tt),Or(Fn(t,1,Va,!0),tt,e)}),Sf=Ba(function(t,e){return Va(t)?Nn(t,e):[]}),Af=Ba(function(t){return jr(h(t,Va))}),xf=Ba(function(t){var e=po(t);return Va(e)&&(e=tt),jr(h(t,Va),wi(e))}),Cf=Ba(function(t){var e=po(t);return Va(e)&&(e=tt),jr(h(t,Va),tt,e)}),Bf=Ba(Uo),Of=Ba(function(t){var e=t.length,n=e>1?t[e-1]:tt;return n="function"==typeof n?(t.pop(),n):tt,Do(t,n)}),Tf=Ba(function(t){t=Fn(t,1);var e=t.length,n=e?t[0]:0,i=this.__wrapped__,o=function(e){return yn(e,t)};return!(e>1||this.__actions__.length)&&i instanceof L&&W(n)?(i=i.slice(n,+n+(e?1:0)),i.__actions__.push({func:Vo,args:[o],thisArg:tt}),new r(i,this.__chain__).thru(function(t){return e&&!t.length&&t.push(tt),t})):this.thru(o)}),Rf=Xr(function(t,e,n){cc.call(t,n)?++t[n]:t[n]=1}),Pf=Xr(function(t,e,n){cc.call(t,n)?t[n].push(e):t[n]=[e]}),If=Ba(function(t,e,n){var r=-1,i="function"==typeof e,o=Ni(e),s=Fa(t)?Array(t.length):[];return ef(t,function(t){var u=i?e:o&&null!=t?t[e]:tt;s[++r]=u?a(u,t,n):tr(t,e,n)}),s}),jf=Xr(function(t,e,n){t[n]=e}),Lf=Xr(function(t,e,n){t[n?0:1].push(e)},function(){return[[],[]]}),Mf=Ba(function(t,e){if(null==t)return[];var n=e.length;return n>1&&Mi(t,e[0],e[1])?e=[]:n>2&&Mi(e[0],e[1],e[2])&&(e.length=1),hr(t,Fn(e,1),[])}),Nf=ec.now,Uf=Ba(function(t,e,n){var r=at;if(n.length){var i=$(n,Si(Uf));r|=lt}return di(t,r,e,n,i)}),Df=Ba(function(t,e,n){var r=at|st;if(n.length){var i=$(n,Si(Df));r|=lt}return di(e,r,t,n,i)}),zf=Ba(function(t,e){return Ln(t,1,e)}),qf=Ba(function(t,e,n){return Ln(t,Cs(e)||0,n)});Aa.Cache=Fe;var Yf=Ba(function(t,e){e=y(Fn(e,1,Li),wi());var n=e.length;return Ba(function(r){for(var i=-1,o=jc(r.length,n);++i<o;)r[i]=e[i].call(this,r[i]);return a(t,this,r)})}),Ff=Ba(function(t,e){var n=$(e,Si(Ff));return di(t,lt,tt,e,n)}),Vf=Ba(function(t,e){var n=$(e,Si(Vf));return di(t,ht,tt,e,n)}),Wf=Ba(function(t,e){return di(t,dt,tt,tt,tt,Fn(e,1))}),Hf=Array.isArray,Jf=yc?function(t){return t instanceof yc}:Iu(!1),$f=Kr(function(t,e){if(Wc||zi(e)||Fa(e))return void Jr(e,Fs(e),t);for(var n in e)cc.call(e,n)&&hn(t,n,e[n])}),Gf=Kr(function(t,e){if(Wc||zi(e)||Fa(e))return void Jr(e,Vs(e),t);for(var n in e)hn(t,n,e[n])}),Xf=Kr(function(t,e,n,r){$r(e,Vs(e),t,r)}),Kf=Kr(function(t,e,n,r){$r(e,Fs(e),t,r)}),Zf=Ba(function(t,e){return yn(t,Fn(e,1))}),Qf=Ba(function(t){return t.push(tt,fn),a(Xf,tt,t)}),tl=Ba(function(t){return t.push(tt,Vi),a(ol,tt,t)}),el=si(function(t,e,n){t[e]=n},Iu(ju)),nl=si(function(t,e,n){cc.call(t,e)?t[e].push(n):t[e]=[n]},wi),rl=Ba(tr),il=Kr(function(t,e,n){fr(t,e,n)}),ol=Kr(function(t,e,n,r){fr(t,e,n,r)}),al=Ba(function(t,e){return null==t?{}:(e=y(Fn(e,1),Cn),pr(t,Nn(mi(t),e)))}),sl=Ba(function(t,e){return null==t?{}:pr(t,Fn(e,1))}),ul=ni(function(t,e,n){return e=e.toLowerCase(),t+(n?cu(e):e)}),cl=ni(function(t,e,n){return t+(n?"-":"")+e.toLowerCase()}),fl=ni(function(t,e,n){return t+(n?" ":"")+e.toLowerCase()}),ll=ei("toLowerCase"),hl=ni(function(t,e,n){return t+(n?"_":"")+e.toLowerCase()}),pl=ni(function(t,e,n){return t+(n?" ":"")+yl(e)}),dl=ni(function(t,e,n){return t+(n?" ":"")+e.toUpperCase()}),yl=ei("toUpperCase"),gl=Ba(function(t,e){try{return a(t,tt,e)}catch(n){return Ka(n)?n:new nc(n)}}),vl=Ba(function(t,e){return c(Fn(e,1),function(e){t[e]=Uf(t[e],t)}),t}),_l=oi(),ml=oi(!0),bl=Ba(function(t,e){return function(n){return tr(n,t,e)}}),wl=Ba(function(t,e){return function(n){return tr(t,n,e)}}),kl=ui(y),El=ui(l),Sl=ui(m),Al=li(),xl=li(!0),Cl=D(function(t,e){return t+e}),Bl=pi("ceil"),Ol=D(function(t,e){return t/e}),Tl=pi("floor"),Rl=D(function(t,e){return t*e}),Pl=pi("round"),Il=D(function(t,e){return t-e});return e.after=_a,e.ary=ma,e.assign=$f,e.assignIn=Gf,e.assignInWith=Xf,e.assignWith=Kf,e.at=Zf,e.before=ba,e.bind=Uf,e.bindAll=vl,e.bindKey=Df,e.castArray=Ia,e.chain=Yo,e.chunk=Gi,e.compact=Xi,e.concat=Ki,e.cond=Ru,e.conforms=Pu,e.constant=Iu,e.countBy=Rf,e.create=Rs,e.curry=wa,e.curryRight=ka,e.debounce=Ea,e.defaults=Qf,e.defaultsDeep=tl,e.defer=zf,e.delay=qf,e.difference=pf,e.differenceBy=df,e.differenceWith=yf,e.drop=Zi,e.dropRight=Qi,e.dropRightWhile=to,e.dropWhile=eo,e.fill=no,e.filter=Qo,e.flatMap=na,e.flatMapDeep=ra,e.flatMapDepth=ia,e.flatten=oo,e.flattenDeep=ao,e.flattenDepth=so,e.flip=Sa,e.flow=_l,e.flowRight=ml,e.fromPairs=uo,e.functions=Us,e.functionsIn=Ds,e.groupBy=Pf,e.initial=lo,e.intersection=gf,e.intersectionBy=vf,e.intersectionWith=_f,e.invert=el,e.invertBy=nl,e.invokeMap=If,e.iteratee=Lu,e.keyBy=jf,e.keys=Fs,e.keysIn=Vs,e.map=ua,e.mapKeys=Ws,e.mapValues=Hs,e.matches=Mu,e.matchesProperty=Nu,e.memoize=Aa,e.merge=il,e.mergeWith=ol,e.method=bl,e.methodOf=wl,e.mixin=Uu,e.negate=xa,e.nthArg=qu,e.omit=al,e.omitBy=Js,e.once=Ca,e.orderBy=ca,e.over=kl,e.overArgs=Yf,e.overEvery=El,e.overSome=Sl,e.partial=Ff,e.partialRight=Vf,e.partition=Lf,e.pick=sl,e.pickBy=$s,e.property=Yu,e.propertyOf=Fu,e.pull=mf,e.pullAll=go,e.pullAllBy=vo,e.pullAllWith=_o,e.pullAt=bf,e.range=Al,e.rangeRight=xl,e.rearg=Wf,e.reject=ha,e.remove=mo,e.rest=Ba,e.reverse=bo,e.sampleSize=da,e.set=Xs,e.setWith=Ks,e.shuffle=ya,e.slice=wo,e.sortBy=Mf,e.sortedUniq=Bo,e.sortedUniqBy=Oo,e.split=bu,e.spread=Oa,e.tail=To,e.take=Ro,e.takeRight=Po,e.takeRightWhile=Io,e.takeWhile=jo,e.tap=Fo,e.throttle=Ta,e.thru=Vo,e.toArray=Ss,e.toPairs=Zs,e.toPairsIn=Qs,e.toPath=Wu,e.toPlainObject=Bs,e.transform=tu,e.unary=Ra,e.union=wf,e.unionBy=kf,e.unionWith=Ef,e.uniq=Lo,e.uniqBy=Mo,e.uniqWith=No,e.unset=eu,e.unzip=Uo,e.unzipWith=Do,e.update=nu,e.updateWith=ru,e.values=iu,e.valuesIn=ou,e.without=Sf,e.words=Tu,e.wrap=Pa,e.xor=Af,e.xorBy=xf,e.xorWith=Cf,e.zip=Bf,e.zipObject=zo,e.zipObjectDeep=qo,e.zipWith=Of,e.entries=Zs,e.entriesIn=Qs,e.extend=Gf,e.extendWith=Xf,Uu(e,e),e.add=Cl,e.attempt=gl,e.camelCase=ul,e.capitalize=cu,e.ceil=Bl,e.clamp=au,e.clone=ja,e.cloneDeep=Ma,e.cloneDeepWith=Na,e.cloneWith=La,e.deburr=fu,e.divide=Ol,e.endsWith=lu,e.eq=Ua,e.escape=hu,e.escapeRegExp=pu,e.every=Zo,e.find=ta,e.findIndex=ro,e.findKey=Ps,e.findLast=ea,e.findLastIndex=io,e.findLastKey=Is,e.floor=Tl,e.forEach=oa,e.forEachRight=aa,e.forIn=js,e.forInRight=Ls,e.forOwn=Ms,e.forOwnRight=Ns,e.get=zs,e.gt=Da,e.gte=za,e.has=qs,e.hasIn=Ys,e.head=co,e.identity=ju,e.includes=sa,e.indexOf=fo,e.inRange=su,e.invoke=rl,e.isArguments=qa,e.isArray=Hf,e.isArrayBuffer=Ya,e.isArrayLike=Fa,e.isArrayLikeObject=Va,e.isBoolean=Wa,e.isBuffer=Jf,e.isDate=Ha,e.isElement=Ja,e.isEmpty=$a,e.isEqual=Ga,e.isEqualWith=Xa,e.isError=Ka,e.isFinite=Za,e.isFunction=Qa,e.isInteger=ts,e.isLength=es,e.isMap=is,e.isMatch=os,e.isMatchWith=as,e.isNaN=ss,e.isNative=us,e.isNil=fs,e.isNull=cs,e.isNumber=ls,e.isObject=ns,e.isObjectLike=rs,e.isPlainObject=hs,e.isRegExp=ps,e.isSafeInteger=ds,e.isSet=ys,e.isString=gs,e.isSymbol=vs,e.isTypedArray=_s,e.isUndefined=ms,e.isWeakMap=bs,e.isWeakSet=ws,e.join=ho,e.kebabCase=cl,e.last=po,e.lastIndexOf=yo,e.lowerCase=fl,e.lowerFirst=ll,e.lt=ks,e.lte=Es,e.max=Ju,e.maxBy=$u,e.mean=Gu,e.meanBy=Xu,e.min=Ku,e.minBy=Zu,e.multiply=Rl,e.noConflict=Du,e.noop=zu,e.now=Nf,e.pad=du,e.padEnd=yu,e.padStart=gu,e.parseInt=vu,e.random=uu,e.reduce=fa,e.reduceRight=la,e.repeat=_u,e.replace=mu,e.result=Gs,e.round=Pl,e.runInContext=Q,e.sample=pa,e.size=ga,e.snakeCase=hl,e.some=va,e.sortedIndex=ko,e.sortedIndexBy=Eo,e.sortedIndexOf=So,e.sortedLastIndex=Ao,e.sortedLastIndexBy=xo,e.sortedLastIndexOf=Co,e.startCase=pl,e.startsWith=wu,e.subtract=Il,e.sum=Qu,e.sumBy=tc,e.template=ku,e.times=Vu,e.toInteger=As,e.toLength=xs,e.toLower=Eu,e.toNumber=Cs,e.toSafeInteger=Os,e.toString=Ts,e.toUpper=Su,e.trim=Au,e.trimEnd=xu,e.trimStart=Cu,e.truncate=Bu,e.unescape=Ou,e.uniqueId=Hu,e.upperCase=dl,e.upperFirst=yl,e.each=oa,e.eachRight=aa,e.first=co,Uu(e,function(){var t={};return Vn(e,function(n,r){cc.call(e.prototype,r)||(t[r]=n)}),t}(),{chain:!1}),e.VERSION=et,c(["bind","bindKey","curry","curryRight","partial","partialRight"],function(t){e[t].placeholder=e}),c(["drop","take"],function(t,e){L.prototype[t]=function(n){var r=this.__filtered__;if(r&&!e)return new L(this);n=n===tt?1:Ic(As(n),0);var i=this.clone();return r?i.__takeCount__=jc(n,i.__takeCount__):i.__views__.push({size:jc(n,Ot),type:t+(i.__dir__<0?"Right":"")}),i},L.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()}}),c(["filter","map","takeWhile"],function(t,e){var n=e+1,r=n==kt||n==St;L.prototype[t]=function(t){var e=this.clone();return e.__iteratees__.push({iteratee:wi(t,3),type:n}),e.__filtered__=e.__filtered__||r,e}}),c(["head","last"],function(t,e){var n="take"+(e?"Right":"");L.prototype[t]=function(){return this[n](1).value()[0]}}),c(["initial","tail"],function(t,e){var n="drop"+(e?"":"Right");L.prototype[t]=function(){return this.__filtered__?new L(this):this[n](1)}}),L.prototype.compact=function(){return this.filter(ju)},L.prototype.find=function(t){return this.filter(t).head()},L.prototype.findLast=function(t){return this.reverse().find(t)},L.prototype.invokeMap=Ba(function(t,e){return"function"==typeof t?new L(this):this.map(function(n){return tr(n,t,e)})}),L.prototype.reject=function(t){return t=wi(t,3),this.filter(function(e){return!t(e)})},L.prototype.slice=function(t,e){t=As(t);var n=this;return n.__filtered__&&(t>0||0>e)?new L(n):(0>t?n=n.takeRight(-t):t&&(n=n.drop(t)),e!==tt&&(e=As(e),n=0>e?n.dropRight(-e):n.take(e-t)),n)},L.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},L.prototype.toArray=function(){return this.take(Ot)},Vn(L.prototype,function(t,n){var i=/^(?:filter|find|map|reject)|While$/.test(n),o=/^(?:head|last)$/.test(n),a=e[o?"take"+("last"==n?"Right":""):n],s=o||/^find/.test(n);a&&(e.prototype[n]=function(){var n=this.__wrapped__,u=o?[1]:arguments,c=n instanceof L,f=u[0],l=c||Hf(n),h=function(t){var n=a.apply(e,g([t],u));return o&&p?n[0]:n};l&&i&&"function"==typeof f&&1!=f.length&&(c=l=!1);var p=this.__chain__,d=!!this.__actions__.length,y=s&&!p,v=c&&!d;if(!s&&l){n=v?n:new L(this);var _=t.apply(n,u);return _.__actions__.push({func:Vo,args:[h],thisArg:tt}),new r(_,p)}return y&&v?t.apply(this,u):(_=this.thru(h),y?o?_.value()[0]:_.value():_)})}),c(["pop","push","shift","sort","splice","unshift"],function(t){var n=ac[t],r=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",i=/^(?:pop|shift)$/.test(t);e.prototype[t]=function(){var t=arguments;if(i&&!this.__chain__){var e=this.value();return n.apply(Hf(e)?e:[],t)}return this[r](function(e){return n.apply(Hf(e)?e:[],t)})}}),Vn(L.prototype,function(t,n){var r=e[n];if(r){var i=r.name+"",o=Hc[i]||(Hc[i]=[]);o.push({name:n,func:r})}}),Hc[ai(tt,st).name]=[{name:"wrapper",func:tt}],L.prototype.clone=Pe,L.prototype.reverse=Me,L.prototype.value=Ne,e.prototype.at=Tf,e.prototype.chain=Wo,e.prototype.commit=Ho,e.prototype.next=Jo,e.prototype.plant=Go,e.prototype.reverse=Xo,e.prototype.toJSON=e.prototype.valueOf=e.prototype.value=Ko,kc&&(e.prototype[kc]=$o),e}var tt,et="4.9.0",nt=200,rt="Expected a function",it="__lodash_hash_undefined__",ot="__lodash_placeholder__",at=1,st=2,ut=4,ct=8,ft=16,lt=32,ht=64,pt=128,dt=256,yt=512,gt=1,vt=2,_t=30,mt="...",bt=150,wt=16,kt=1,Et=2,St=3,At=1/0,xt=9007199254740991,Ct=1.7976931348623157e308,Bt=NaN,Ot=4294967295,Tt=Ot-1,Rt=Ot>>>1,Pt="[object Arguments]",It="[object Array]",jt="[object Boolean]",Lt="[object Date]",Mt="[object Error]",Nt="[object Function]",Ut="[object GeneratorFunction]",Dt="[object Map]",zt="[object Number]",qt="[object Object]",Yt="[object Promise]",Ft="[object RegExp]",Vt="[object Set]",Wt="[object String]",Ht="[object Symbol]",Jt="[object WeakMap]",$t="[object WeakSet]",Gt="[object ArrayBuffer]",Xt="[object DataView]",Kt="[object Float32Array]",Zt="[object Float64Array]",Qt="[object Int8Array]",te="[object Int16Array]",ee="[object Int32Array]",ne="[object Uint8Array]",re="[object Uint8ClampedArray]",ie="[object Uint16Array]",oe="[object Uint32Array]",ae=/\b__p \+= '';/g,se=/\b(__p \+=) '' \+/g,ue=/(__e\(.*?\)|\b__t\)) \+\n'';/g,ce=/&(?:amp|lt|gt|quot|#39|#96);/g,fe=/[&<>"'`]/g,le=RegExp(ce.source),he=RegExp(fe.source),pe=/<%-([\s\S]+?)%>/g,de=/<%([\s\S]+?)%>/g,ye=/<%=([\s\S]+?)%>/g,ge=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ve=/^\w*$/,_e=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]/g,me=/[\\^$.*+?()[\]{}|]/g,be=RegExp(me.source),we=/^\s+|\s+$/g,ke=/^\s+/,Ee=/\s+$/,Se=/\\(\\)?/g,Ae=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,xe=/\w*$/,Ce=/^0x/i,Be=/^[-+]0x[0-9a-f]+$/i,Oe=/^0b[01]+$/i,Te=/^\[object .+?Constructor\]$/,Re=/^0o[0-7]+$/i,Pe=/^(?:0|[1-9]\d*)$/,Ie=/[\xc0-\xd6\xd8-\xde\xdf-\xf6\xf8-\xff]/g,je=/($^)/,Le=/['\n\r\u2028\u2029\\]/g,Me="\\ud800-\\udfff",Ne="\\u0300-\\u036f\\ufe20-\\ufe23",Ue="\\u20d0-\\u20f0",De="\\u2700-\\u27bf",ze="a-z\\xdf-\\xf6\\xf8-\\xff",qe="\\xac\\xb1\\xd7\\xf7",Ye="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Fe="\\u2018\\u2019\\u201c\\u201d",Ve=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",We="A-Z\\xc0-\\xd6\\xd8-\\xde",He="\\ufe0e\\ufe0f",Je=qe+Ye+Fe+Ve,$e="["+Me+"]",Ge="["+Je+"]",Xe="["+Ne+Ue+"]",Ke="\\d+",Ze="["+De+"]",Qe="["+ze+"]",tn="[^"+Me+Je+Ke+De+ze+We+"]",en="\\ud83c[\\udffb-\\udfff]",nn="(?:"+Xe+"|"+en+")",rn="[^"+Me+"]",on="(?:\\ud83c[\\udde6-\\uddff]){2}",an="[\\ud800-\\udbff][\\udc00-\\udfff]",sn="["+We+"]",un="\\u200d",cn="(?:"+Qe+"|"+tn+")",fn="(?:"+sn+"|"+tn+")",ln=nn+"?",hn="["+He+"]?",pn="(?:"+un+"(?:"+[rn,on,an].join("|")+")"+hn+ln+")*",dn=hn+ln+pn,yn="(?:"+[Ze,on,an].join("|")+")"+dn,gn="(?:"+[rn+Xe+"?",Xe,on,an,$e].join("|")+")",vn=RegExp(Xe,"g"),_n=RegExp(en+"(?="+en+")|"+gn+dn,"g"),mn=RegExp("["+un+Me+Ne+Ue+He+"]"),bn=/[a-zA-Z0-9]+/g,wn=RegExp([sn+"?"+Qe+"+(?="+[Ge,sn,"$"].join("|")+")",fn+"+(?="+[Ge,sn+cn,"$"].join("|")+")",sn+"?"+cn+"+",sn+"+",Ke,yn].join("|"),"g"),kn=/[a-z][A-Z]|[A-Z]{2,}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,En=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","Reflect","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Sn=-1,An={};An[Kt]=An[Zt]=An[Qt]=An[te]=An[ee]=An[ne]=An[re]=An[ie]=An[oe]=!0,An[Pt]=An[It]=An[Gt]=An[jt]=An[Xt]=An[Lt]=An[Mt]=An[Nt]=An[Dt]=An[zt]=An[qt]=An[Ft]=An[Vt]=An[Wt]=An[Jt]=!1;var xn={};xn[Pt]=xn[It]=xn[Gt]=xn[Xt]=xn[jt]=xn[Lt]=xn[Kt]=xn[Zt]=xn[Qt]=xn[te]=xn[ee]=xn[Dt]=xn[zt]=xn[qt]=xn[Ft]=xn[Vt]=xn[Wt]=xn[Ht]=xn[ne]=xn[re]=xn[ie]=xn[oe]=!0,xn[Mt]=xn[Nt]=xn[Jt]=!1;var Cn={"":"A","":"A","":"A","":"A","":"A","":"A","":"a","":"a","":"a","":"a","":"a","":"a","":"C","":"c","":"D","":"d","":"E","":"E","":"E","":"E","":"e","":"e","":"e","":"e","":"I","":"I","":"I","":"I","":"i","":"i","":"i","":"i","":"N","":"n","":"O","":"O","":"O","":"O","":"O","":"O","":"o","":"o","":"o","":"o","":"o","":"o","":"U","":"U","":"U","":"U","":"u","":"u","":"u","":"u","":"Y","":"y","":"y","":"Ae","":"ae","":"Th","":"th","":"ss"},Bn={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"},On={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'","&#96;":"`"},Tn={"function":!0,object:!0},Rn={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Pn=parseFloat,In=parseInt,jn=Tn[typeof r]&&r&&!r.nodeType?r:tt,Ln=Tn[typeof n]&&n&&!n.nodeType?n:tt,Mn=Ln&&Ln.exports===jn?jn:tt,Nn=L(jn&&Ln&&"object"==typeof e&&e),Un=L(Tn[typeof self]&&self),Dn=L(Tn[typeof window]&&window),zn=L(Tn[typeof this]&&this),qn=Nn||Dn!==(zn&&zn.window)&&Dn||Un||zn||Function("return this")(),Yn=Q();(Dn||Un||{})._=Yn,"function"==typeof t&&"object"==typeof t.amd&&t.amd?t(function(){return Yn}):jn&&Ln?(Mn&&((Ln.exports=Yn)._=Yn),jn._=Yn):qn._=Yn}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],46:[function(t,e,n){n.endianness=function(){return"LE"},n.hostname=function(){return"undefined"!=typeof location?location.hostname:""},n.loadavg=function(){return[]},n.uptime=function(){return 0},n.freemem=function(){return Number.MAX_VALUE},n.totalmem=function(){return Number.MAX_VALUE},n.cpus=function(){return[]},n.type=function(){return"Browser"},n.release=function(){return"undefined"!=typeof navigator?navigator.appVersion:""},n.networkInterfaces=n.getNetworkInterfaces=function(){return{}},n.arch=function(){return"javascript"},n.platform=function(){return"browser"},n.tmpdir=n.tmpDir=function(){return"/tmp"},n.EOL="\n"},{}],47:[function(t,e,n){(function(t){var n=/^[\],:{}\s]*$/,r=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,i=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,o=/(?:^|:|,)(?:\s*\[)+/g,a=/^\s+/,s=/\s+$/;e.exports=function(e){return"string"==typeof e&&e?(e=e.replace(a,"").replace(s,""),t.JSON&&JSON.parse?JSON.parse(e):n.test(e.replace(r,"@").replace(i,"]").replace(o,""))?new Function("return "+e)():void 0):null}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],48:[function(t,e,n){n.encode=function(t){var e="";for(var n in t)t.hasOwnProperty(n)&&(e.length&&(e+="&"),e+=encodeURIComponent(n)+"="+encodeURIComponent(t[n]));return e},n.decode=function(t){for(var e={},n=t.split("&"),r=0,i=n.length;i>r;r++){var o=n[r].split("=");e[decodeURIComponent(o[0])]=decodeURIComponent(o[1])}return e}},{}],49:[function(t,e,n){var r=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,i=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];e.exports=function(t){var e=t,n=t.indexOf("["),o=t.indexOf("]");-1!=n&&-1!=o&&(t=t.substring(0,n)+t.substring(n,o).replace(/:/g,";")+t.substring(o,t.length));for(var a=r.exec(t||""),s={},u=14;u--;)s[i[u]]=a[u]||"";return-1!=n&&-1!=o&&(s.source=e,s.host=s.host.substring(1,s.host.length-1).replace(/;/g,":"),s.authority=s.authority.replace("[","").replace("]","").replace(/;/g,":"),s.ipv6uri=!0),s}},{}],50:[function(t,e,n){function r(t,e){"object"==typeof t&&(e=t,t=void 0),e=e||{};var n,r=i(t),o=r.source,c=r.id,f=r.path,l=u[c]&&f in u[c].nsps,h=e.forceNew||e["force new connection"]||!1===e.multiplex||l;return h?(s("ignoring socket cache for %s",o),n=a(o,e)):(u[c]||(s("new io instance for %s",o),u[c]=a(o,e)),n=u[c]),n.socket(r.path)}var i=t("./url"),o=t("socket.io-parser"),a=t("./manager"),s=t("debug")("socket.io-client");e.exports=n=r;var u=n.managers={};n.protocol=o.protocol,n.connect=r,n.Manager=t("./manager"),n.Socket=t("./socket")},{"./manager":51,"./socket":53,"./url":54,debug:13,"socket.io-parser":57}],51:[function(t,e,n){function r(t,e){return this instanceof r?(t&&"object"==typeof t&&(e=t,t=void 0),e=e||{},e.path=e.path||"/socket.io",this.nsps={},this.subs=[],this.opts=e,this.reconnection(e.reconnection!==!1),this.reconnectionAttempts(e.reconnectionAttempts||1/0),this.reconnectionDelay(e.reconnectionDelay||1e3),this.reconnectionDelayMax(e.reconnectionDelayMax||5e3),this.randomizationFactor(e.randomizationFactor||.5),this.backoff=new h({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==e.timeout?2e4:e.timeout),this.readyState="closed",this.uri=t,this.connecting=[],this.lastPing=null,this.encoding=!1,this.packetBuffer=[],this.encoder=new s.Encoder,this.decoder=new s.Decoder,this.autoConnect=e.autoConnect!==!1,void(this.autoConnect&&this.open())):new r(t,e)}var i=t("engine.io-client"),o=t("./socket"),a=t("component-emitter"),s=t("socket.io-parser"),u=t("./on"),c=t("component-bind"),f=t("debug")("socket.io-client:manager"),l=t("indexof"),h=t("backo2"),p=Object.prototype.hasOwnProperty;e.exports=r,r.prototype.emitAll=function(){this.emit.apply(this,arguments);for(var t in this.nsps)p.call(this.nsps,t)&&this.nsps[t].emit.apply(this.nsps[t],arguments)},r.prototype.updateSocketIds=function(){for(var t in this.nsps)p.call(this.nsps,t)&&(this.nsps[t].id=this.engine.id)},a(r.prototype),r.prototype.reconnection=function(t){return arguments.length?(this._reconnection=!!t,this):this._reconnection},r.prototype.reconnectionAttempts=function(t){return arguments.length?(this._reconnectionAttempts=t,this):this._reconnectionAttempts},r.prototype.reconnectionDelay=function(t){return arguments.length?(this._reconnectionDelay=t,this.backoff&&this.backoff.setMin(t),this):this._reconnectionDelay},r.prototype.randomizationFactor=function(t){return arguments.length?(this._randomizationFactor=t,this.backoff&&this.backoff.setJitter(t),this):this._randomizationFactor},r.prototype.reconnectionDelayMax=function(t){return arguments.length?(this._reconnectionDelayMax=t,this.backoff&&this.backoff.setMax(t),this):this._reconnectionDelayMax},r.prototype.timeout=function(t){return arguments.length?(this._timeout=t,this):this._timeout},r.prototype.maybeReconnectOnOpen=function(){!this.reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()},r.prototype.open=r.prototype.connect=function(t){if(f("readyState %s",this.readyState),~this.readyState.indexOf("open"))return this;f("opening %s",this.uri),this.engine=i(this.uri,this.opts);var e=this.engine,n=this;this.readyState="opening",this.skipReconnect=!1;var r=u(e,"open",function(){n.onopen(),t&&t()}),o=u(e,"error",function(e){if(f("connect_error"),n.cleanup(),n.readyState="closed",n.emitAll("connect_error",e),t){var r=new Error("Connection error");r.data=e,t(r)}else n.maybeReconnectOnOpen()});if(!1!==this._timeout){var a=this._timeout;f("connect attempt will timeout after %d",a);var s=setTimeout(function(){f("connect attempt timed out after %d",a),r.destroy(),e.close(),e.emit("error","timeout"),n.emitAll("connect_timeout",a)},a);this.subs.push({destroy:function(){clearTimeout(s)}})}return this.subs.push(r),this.subs.push(o),this},r.prototype.onopen=function(){f("open"),this.cleanup(),this.readyState="open",this.emit("open");var t=this.engine;this.subs.push(u(t,"data",c(this,"ondata"))),this.subs.push(u(t,"ping",c(this,"onping"))),this.subs.push(u(t,"pong",c(this,"onpong"))),this.subs.push(u(t,"error",c(this,"onerror"))),this.subs.push(u(t,"close",c(this,"onclose"))),this.subs.push(u(this.decoder,"decoded",c(this,"ondecoded")))},r.prototype.onping=function(){this.lastPing=new Date,this.emitAll("ping")},r.prototype.onpong=function(){this.emitAll("pong",new Date-this.lastPing)},r.prototype.ondata=function(t){this.decoder.add(t)},r.prototype.ondecoded=function(t){this.emit("packet",t)},r.prototype.onerror=function(t){f("error",t),this.emitAll("error",t)},r.prototype.socket=function(t){function e(){~l(r.connecting,n)||r.connecting.push(n)}var n=this.nsps[t];if(!n){n=new o(this,t),this.nsps[t]=n;var r=this;n.on("connecting",e),n.on("connect",function(){n.id=r.engine.id}),this.autoConnect&&e()}return n},r.prototype.destroy=function(t){var e=l(this.connecting,t);~e&&this.connecting.splice(e,1),this.connecting.length||this.close()},r.prototype.packet=function(t){f("writing packet %j",t);var e=this;e.encoding?e.packetBuffer.push(t):(e.encoding=!0,this.encoder.encode(t,function(n){for(var r=0;r<n.length;r++)e.engine.write(n[r],t.options);e.encoding=!1,e.processPacketQueue()}))},r.prototype.processPacketQueue=function(){if(this.packetBuffer.length>0&&!this.encoding){var t=this.packetBuffer.shift();this.packet(t)}},r.prototype.cleanup=function(){f("cleanup");for(var t;t=this.subs.shift();)t.destroy();this.packetBuffer=[],this.encoding=!1,this.lastPing=null,this.decoder.destroy()},r.prototype.close=r.prototype.disconnect=function(){f("disconnect"),this.skipReconnect=!0,this.reconnecting=!1,"opening"==this.readyState&&this.cleanup(),this.backoff.reset(),this.readyState="closed",this.engine&&this.engine.close()},r.prototype.onclose=function(t){f("onclose"),this.cleanup(),this.backoff.reset(),this.readyState="closed",this.emit("close",t),this._reconnection&&!this.skipReconnect&&this.reconnect()},r.prototype.reconnect=function(){if(this.reconnecting||this.skipReconnect)return this;var t=this;if(this.backoff.attempts>=this._reconnectionAttempts)f("reconnect failed"),this.backoff.reset(),this.emitAll("reconnect_failed"),this.reconnecting=!1;else{var e=this.backoff.duration();f("will wait %dms before reconnect attempt",e),this.reconnecting=!0;var n=setTimeout(function(){t.skipReconnect||(f("attempting reconnect"),t.emitAll("reconnect_attempt",t.backoff.attempts),t.emitAll("reconnecting",t.backoff.attempts),t.skipReconnect||t.open(function(e){e?(f("reconnect attempt error"),t.reconnecting=!1,t.reconnect(),t.emitAll("reconnect_error",e.data)):(f("reconnect success"),t.onreconnect())}))},e);this.subs.push({destroy:function(){clearTimeout(n)}})}},r.prototype.onreconnect=function(){var t=this.backoff.attempts;this.reconnecting=!1,this.backoff.reset(),this.updateSocketIds(),this.emitAll("reconnect",t)}},{"./on":52,"./socket":53,backo2:3,"component-bind":10,"component-emitter":55,debug:13,"engine.io-client":15,indexof:37,"socket.io-parser":57}],52:[function(t,e,n){function r(t,e,n){return t.on(e,n),{destroy:function(){t.removeListener(e,n)}}}e.exports=r},{}],53:[function(t,e,n){function r(t,e){this.io=t,this.nsp=e,this.json=this,this.ids=0,this.acks={},this.receiveBuffer=[],this.sendBuffer=[],this.connected=!1,this.disconnected=!0,this.io.autoConnect&&this.open()}var i=t("socket.io-parser"),o=t("component-emitter"),a=t("to-array"),s=t("./on"),u=t("component-bind"),c=t("debug")("socket.io-client:socket"),f=t("has-binary");e.exports=n=r;var l={connect:1,connect_error:1,connect_timeout:1,connecting:1,disconnect:1,error:1,reconnect:1,reconnect_attempt:1,reconnect_failed:1,reconnect_error:1,reconnecting:1,ping:1,pong:1},h=o.prototype.emit;o(r.prototype),r.prototype.subEvents=function(){if(!this.subs){var t=this.io;this.subs=[s(t,"open",u(this,"onopen")),s(t,"packet",u(this,"onpacket")),s(t,"close",u(this,"onclose"))]}},r.prototype.open=r.prototype.connect=function(){return this.connected?this:(this.subEvents(),this.io.open(),"open"==this.io.readyState&&this.onopen(),this.emit("connecting"),this)},r.prototype.send=function(){var t=a(arguments);return t.unshift("message"),this.emit.apply(this,t),this},r.prototype.emit=function(t){if(l.hasOwnProperty(t))return h.apply(this,arguments),this;var e=a(arguments),n=i.EVENT;f(e)&&(n=i.BINARY_EVENT);var r={type:n,data:e};return r.options={},r.options.compress=!this.flags||!1!==this.flags.compress,"function"==typeof e[e.length-1]&&(c("emitting packet with ack id %d",this.ids),this.acks[this.ids]=e.pop(),r.id=this.ids++),this.connected?this.packet(r):this.sendBuffer.push(r),delete this.flags,this},r.prototype.packet=function(t){t.nsp=this.nsp,this.io.packet(t)},r.prototype.onopen=function(){c("transport is open - connecting"),"/"!=this.nsp&&this.packet({type:i.CONNECT})},r.prototype.onclose=function(t){c("close (%s)",t),this.connected=!1,this.disconnected=!0,delete this.id,this.emit("disconnect",t)},r.prototype.onpacket=function(t){if(t.nsp==this.nsp)switch(t.type){case i.CONNECT:this.onconnect();break;case i.EVENT:this.onevent(t);break;case i.BINARY_EVENT:this.onevent(t);break;case i.ACK:this.onack(t);break;case i.BINARY_ACK:this.onack(t);break;case i.DISCONNECT:this.ondisconnect();break;case i.ERROR:this.emit("error",t.data)}},r.prototype.onevent=function(t){var e=t.data||[];c("emitting event %j",e),null!=t.id&&(c("attaching ack callback to event"),e.push(this.ack(t.id))),this.connected?h.apply(this,e):this.receiveBuffer.push(e)},r.prototype.ack=function(t){var e=this,n=!1;return function(){if(!n){n=!0;var r=a(arguments);c("sending ack %j",r);var o=f(r)?i.BINARY_ACK:i.ACK;e.packet({type:o,id:t,data:r})}}},r.prototype.onack=function(t){var e=this.acks[t.id];"function"==typeof e?(c("calling ack %s with %j",t.id,t.data),e.apply(this,t.data),delete this.acks[t.id]):c("bad ack %s",t.id)},r.prototype.onconnect=function(){this.connected=!0,this.disconnected=!1,this.emit("connect"),this.emitBuffered()},r.prototype.emitBuffered=function(){var t;for(t=0;t<this.receiveBuffer.length;t++)h.apply(this,this.receiveBuffer[t]);for(this.receiveBuffer=[],t=0;t<this.sendBuffer.length;t++)this.packet(this.sendBuffer[t]);this.sendBuffer=[]},r.prototype.ondisconnect=function(){c("server disconnect (%s)",this.nsp),this.destroy(),this.onclose("io server disconnect")},r.prototype.destroy=function(){if(this.subs){for(var t=0;t<this.subs.length;t++)this.subs[t].destroy();this.subs=null}this.io.destroy(this)},r.prototype.close=r.prototype.disconnect=function(){return this.connected&&(c("performing disconnect (%s)",this.nsp),this.packet({type:i.DISCONNECT})),this.destroy(),this.connected&&this.onclose("io client disconnect"),this},r.prototype.compress=function(t){return this.flags=this.flags||{},this.flags.compress=t,this}},{"./on":52,"component-bind":10,"component-emitter":55,debug:13,"has-binary":34,"socket.io-parser":57,"to-array":60}],54:[function(t,e,n){(function(n){function r(t,e){var r=t,e=e||n.location;null==t&&(t=e.protocol+"//"+e.host),"string"==typeof t&&("/"==t.charAt(0)&&(t="/"==t.charAt(1)?e.protocol+t:e.host+t),/^(https?|wss?):\/\//.test(t)||(o("protocol-less url %s",t),t="undefined"!=typeof e?e.protocol+"//"+t:"https://"+t),o("parse %s",t),r=i(t)),r.port||(/^(http|ws)$/.test(r.protocol)?r.port="80":/^(http|ws)s$/.test(r.protocol)&&(r.port="443")),r.path=r.path||"/";var a=-1!==r.host.indexOf(":"),s=a?"["+r.host+"]":r.host;return r.id=r.protocol+"://"+s+":"+r.port,r.href=r.protocol+"://"+s+(e&&e.port==r.port?"":":"+r.port),r}var i=t("parseuri"),o=t("debug")("socket.io-client:url");e.exports=r}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{debug:13,parseuri:49}],55:[function(t,e,n){function r(t){return t?i(t):void 0}function i(t){for(var e in r.prototype)t[e]=r.prototype[e];return t}e.exports=r,r.prototype.on=r.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this},r.prototype.once=function(t,e){function n(){
this.off(t,n),e.apply(this,arguments)}return n.fn=e,this.on(t,n),this},r.prototype.off=r.prototype.removeListener=r.prototype.removeAllListeners=r.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n=this._callbacks["$"+t];if(!n)return this;if(1==arguments.length)return delete this._callbacks["$"+t],this;for(var r,i=0;i<n.length;i++)if(r=n[i],r===e||r.fn===e){n.splice(i,1);break}return this},r.prototype.emit=function(t){this._callbacks=this._callbacks||{};var e=[].slice.call(arguments,1),n=this._callbacks["$"+t];if(n){n=n.slice(0);for(var r=0,i=n.length;i>r;++r)n[r].apply(this,e)}return this},r.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]},r.prototype.hasListeners=function(t){return!!this.listeners(t).length}},{}],56:[function(t,e,n){(function(e){var r=t("isarray"),i=t("./is-buffer");n.deconstructPacket=function(t){function e(t){if(!t)return t;if(i(t)){var o={_placeholder:!0,num:n.length};return n.push(t),o}if(r(t)){for(var a=new Array(t.length),s=0;s<t.length;s++)a[s]=e(t[s]);return a}if("object"==typeof t&&!(t instanceof Date)){var a={};for(var u in t)a[u]=e(t[u]);return a}return t}var n=[],o=t.data,a=t;return a.data=e(o),a.attachments=n.length,{packet:a,buffers:n}},n.reconstructPacket=function(t,e){function n(t){if(t&&t._placeholder){var i=e[t.num];return i}if(r(t)){for(var o=0;o<t.length;o++)t[o]=n(t[o]);return t}if(t&&"object"==typeof t){for(var a in t)t[a]=n(t[a]);return t}return t}return t.data=n(t.data),t.attachments=void 0,t},n.removeBlobs=function(t,n){function o(t,u,c){if(!t)return t;if(e.Blob&&t instanceof Blob||e.File&&t instanceof File){a++;var f=new FileReader;f.onload=function(){c?c[u]=this.result:s=this.result,--a||n(s)},f.readAsArrayBuffer(t)}else if(r(t))for(var l=0;l<t.length;l++)o(t[l],l,t);else if(t&&"object"==typeof t&&!i(t))for(var h in t)o(t[h],h,t)}var a=0,s=t;o(s),a||n(s)}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./is-buffer":58,isarray:39}],57:[function(t,e,n){function r(){}function i(t){var e="",r=!1;return e+=t.type,(n.BINARY_EVENT==t.type||n.BINARY_ACK==t.type)&&(e+=t.attachments,e+="-"),t.nsp&&"/"!=t.nsp&&(r=!0,e+=t.nsp),null!=t.id&&(r&&(e+=",",r=!1),e+=t.id),null!=t.data&&(r&&(e+=","),e+=l.stringify(t.data)),f("encoded %j as %s",t,e),e}function o(t,e){function n(t){var n=p.deconstructPacket(t),r=i(n.packet),o=n.buffers;o.unshift(r),e(o)}p.removeBlobs(t,n)}function a(){this.reconstructor=null}function s(t){var e={},r=0;if(e.type=Number(t.charAt(0)),null==n.types[e.type])return c();if(n.BINARY_EVENT==e.type||n.BINARY_ACK==e.type){for(var i="";"-"!=t.charAt(++r)&&(i+=t.charAt(r),r!=t.length););if(i!=Number(i)||"-"!=t.charAt(r))throw new Error("Illegal attachments");e.attachments=Number(i)}if("/"==t.charAt(r+1))for(e.nsp="";++r;){var o=t.charAt(r);if(","==o)break;if(e.nsp+=o,r==t.length)break}else e.nsp="/";var a=t.charAt(r+1);if(""!==a&&Number(a)==a){for(e.id="";++r;){var o=t.charAt(r);if(null==o||Number(o)!=o){--r;break}if(e.id+=t.charAt(r),r==t.length)break}e.id=Number(e.id)}if(t.charAt(++r))try{e.data=l.parse(t.substr(r))}catch(s){return c()}return f("decoded %s as %j",t,e),e}function u(t){this.reconPack=t,this.buffers=[]}function c(t){return{type:n.ERROR,data:"parser error"}}var f=t("debug")("socket.io-parser"),l=t("json3"),h=(t("isarray"),t("component-emitter")),p=t("./binary"),d=t("./is-buffer");n.protocol=4,n.types=["CONNECT","DISCONNECT","EVENT","ACK","ERROR","BINARY_EVENT","BINARY_ACK"],n.CONNECT=0,n.DISCONNECT=1,n.EVENT=2,n.ACK=3,n.ERROR=4,n.BINARY_EVENT=5,n.BINARY_ACK=6,n.Encoder=r,n.Decoder=a,r.prototype.encode=function(t,e){if(f("encoding packet %j",t),n.BINARY_EVENT==t.type||n.BINARY_ACK==t.type)o(t,e);else{var r=i(t);e([r])}},h(a.prototype),a.prototype.add=function(t){var e;if("string"==typeof t)e=s(t),n.BINARY_EVENT==e.type||n.BINARY_ACK==e.type?(this.reconstructor=new u(e),0===this.reconstructor.reconPack.attachments&&this.emit("decoded",e)):this.emit("decoded",e);else{if(!d(t)&&!t.base64)throw new Error("Unknown type: "+t);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");e=this.reconstructor.takeBinaryData(t),e&&(this.reconstructor=null,this.emit("decoded",e))}},a.prototype.destroy=function(){this.reconstructor&&this.reconstructor.finishedReconstruction()},u.prototype.takeBinaryData=function(t){if(this.buffers.push(t),this.buffers.length==this.reconPack.attachments){var e=p.reconstructPacket(this.reconPack,this.buffers);return this.finishedReconstruction(),e}return null},u.prototype.finishedReconstruction=function(){this.reconPack=null,this.buffers=[]}},{"./binary":56,"./is-buffer":58,"component-emitter":11,debug:13,isarray:39,json3:59}],58:[function(t,e,n){(function(t){function n(e){return t.Buffer&&t.Buffer.isBuffer(e)||t.ArrayBuffer&&e instanceof ArrayBuffer}e.exports=n}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],59:[function(e,n,r){(function(e){(function(){function i(t,e){function n(t){if(n[t]!==g)return n[t];var i;if("bug-string-char-index"==t)i="a"!="a"[0];else if("json"==t)i=n("json-stringify")&&n("json-parse");else{var a,s='{"a":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}';if("json-stringify"==t){var u=e.stringify,f="function"==typeof u&&m;if(f){(a=function(){return 1}).toJSON=a;try{f="0"===u(0)&&"0"===u(new r)&&'""'==u(new o)&&u(_)===g&&u(g)===g&&u()===g&&"1"===u(a)&&"[1]"==u([a])&&"[null]"==u([g])&&"null"==u(null)&&"[null,null,null]"==u([g,_,null])&&u({a:[a,!0,!1,null,"\x00\b\n\f\r	"]})==s&&"1"===u(null,a)&&"[\n 1,\n 2\n]"==u([1,2],null,1)&&'"-271821-04-20T00:00:00.000Z"'==u(new c(-864e13))&&'"+275760-09-13T00:00:00.000Z"'==u(new c(864e13))&&'"-000001-01-01T00:00:00.000Z"'==u(new c(-621987552e5))&&'"1969-12-31T23:59:59.999Z"'==u(new c(-1))}catch(l){f=!1}}i=f}if("json-parse"==t){var h=e.parse;if("function"==typeof h)try{if(0===h("0")&&!h(!1)){a=h(s);var p=5==a.a.length&&1===a.a[0];if(p){try{p=!h('"	"')}catch(l){}if(p)try{p=1!==h("01")}catch(l){}if(p)try{p=1!==h("1.")}catch(l){}}}}catch(l){p=!1}i=p}}return n[t]=!!i}t||(t=u.Object()),e||(e=u.Object());var r=t.Number||u.Number,o=t.String||u.String,s=t.Object||u.Object,c=t.Date||u.Date,f=t.SyntaxError||u.SyntaxError,l=t.TypeError||u.TypeError,h=t.Math||u.Math,p=t.JSON||u.JSON;"object"==typeof p&&p&&(e.stringify=p.stringify,e.parse=p.parse);var d,y,g,v=s.prototype,_=v.toString,m=new c(-0xc782b5b800cec);try{m=-109252==m.getUTCFullYear()&&0===m.getUTCMonth()&&1===m.getUTCDate()&&10==m.getUTCHours()&&37==m.getUTCMinutes()&&6==m.getUTCSeconds()&&708==m.getUTCMilliseconds()}catch(b){}if(!n("json")){var w="[object Function]",k="[object Date]",E="[object Number]",S="[object String]",A="[object Array]",x="[object Boolean]",C=n("bug-string-char-index");if(!m)var B=h.floor,O=[0,31,59,90,120,151,181,212,243,273,304,334],T=function(t,e){return O[e]+365*(t-1970)+B((t-1969+(e=+(e>1)))/4)-B((t-1901+e)/100)+B((t-1601+e)/400)};if((d=v.hasOwnProperty)||(d=function(t){var e,n={};return(n.__proto__=null,n.__proto__={toString:1},n).toString!=_?d=function(t){var e=this.__proto__,n=t in(this.__proto__=null,this);return this.__proto__=e,n}:(e=n.constructor,d=function(t){var n=(this.constructor||e).prototype;return t in this&&!(t in n&&this[t]===n[t])}),n=null,d.call(this,t)}),y=function(t,e){var n,r,i,o=0;(n=function(){this.valueOf=0}).prototype.valueOf=0,r=new n;for(i in r)d.call(r,i)&&o++;return n=r=null,o?y=2==o?function(t,e){var n,r={},i=_.call(t)==w;for(n in t)i&&"prototype"==n||d.call(r,n)||!(r[n]=1)||!d.call(t,n)||e(n)}:function(t,e){var n,r,i=_.call(t)==w;for(n in t)i&&"prototype"==n||!d.call(t,n)||(r="constructor"===n)||e(n);(r||d.call(t,n="constructor"))&&e(n)}:(r=["valueOf","toString","toLocaleString","propertyIsEnumerable","isPrototypeOf","hasOwnProperty","constructor"],y=function(t,e){var n,i,o=_.call(t)==w,s=!o&&"function"!=typeof t.constructor&&a[typeof t.hasOwnProperty]&&t.hasOwnProperty||d;for(n in t)o&&"prototype"==n||!s.call(t,n)||e(n);for(i=r.length;n=r[--i];s.call(t,n)&&e(n));}),y(t,e)},!n("json-stringify")){var R={92:"\\\\",34:'\\"',8:"\\b",12:"\\f",10:"\\n",13:"\\r",9:"\\t"},P="000000",I=function(t,e){return(P+(e||0)).slice(-t)},j="\\u00",L=function(t){for(var e='"',n=0,r=t.length,i=!C||r>10,o=i&&(C?t.split(""):t);r>n;n++){var a=t.charCodeAt(n);switch(a){case 8:case 9:case 10:case 12:case 13:case 34:case 92:e+=R[a];break;default:if(32>a){e+=j+I(2,a.toString(16));break}e+=i?o[n]:t.charAt(n)}}return e+'"'},M=function(t,e,n,r,i,o,a){var s,u,c,f,h,p,v,m,b,w,C,O,R,P,j,N;try{s=e[t]}catch(U){}if("object"==typeof s&&s)if(u=_.call(s),u!=k||d.call(s,"toJSON"))"function"==typeof s.toJSON&&(u!=E&&u!=S&&u!=A||d.call(s,"toJSON"))&&(s=s.toJSON(t));else if(s>-1/0&&1/0>s){if(T){for(h=B(s/864e5),c=B(h/365.2425)+1970-1;T(c+1,0)<=h;c++);for(f=B((h-T(c,0))/30.42);T(c,f+1)<=h;f++);h=1+h-T(c,f),p=(s%864e5+864e5)%864e5,v=B(p/36e5)%24,m=B(p/6e4)%60,b=B(p/1e3)%60,w=p%1e3}else c=s.getUTCFullYear(),f=s.getUTCMonth(),h=s.getUTCDate(),v=s.getUTCHours(),m=s.getUTCMinutes(),b=s.getUTCSeconds(),w=s.getUTCMilliseconds();s=(0>=c||c>=1e4?(0>c?"-":"+")+I(6,0>c?-c:c):I(4,c))+"-"+I(2,f+1)+"-"+I(2,h)+"T"+I(2,v)+":"+I(2,m)+":"+I(2,b)+"."+I(3,w)+"Z"}else s=null;if(n&&(s=n.call(e,t,s)),null===s)return"null";if(u=_.call(s),u==x)return""+s;if(u==E)return s>-1/0&&1/0>s?""+s:"null";if(u==S)return L(""+s);if("object"==typeof s){for(P=a.length;P--;)if(a[P]===s)throw l();if(a.push(s),C=[],j=o,o+=i,u==A){for(R=0,P=s.length;P>R;R++)O=M(R,s,n,r,i,o,a),C.push(O===g?"null":O);N=C.length?i?"[\n"+o+C.join(",\n"+o)+"\n"+j+"]":"["+C.join(",")+"]":"[]"}else y(r||s,function(t){var e=M(t,s,n,r,i,o,a);e!==g&&C.push(L(t)+":"+(i?" ":"")+e)}),N=C.length?i?"{\n"+o+C.join(",\n"+o)+"\n"+j+"}":"{"+C.join(",")+"}":"{}";return a.pop(),N}};e.stringify=function(t,e,n){var r,i,o,s;if(a[typeof e]&&e)if((s=_.call(e))==w)i=e;else if(s==A){o={};for(var u,c=0,f=e.length;f>c;u=e[c++],s=_.call(u),(s==S||s==E)&&(o[u]=1));}if(n)if((s=_.call(n))==E){if((n-=n%1)>0)for(r="",n>10&&(n=10);r.length<n;r+=" ");}else s==S&&(r=n.length<=10?n:n.slice(0,10));return M("",(u={},u[""]=t,u),i,o,r,"",[])}}if(!n("json-parse")){var N,U,D=o.fromCharCode,z={92:"\\",34:'"',47:"/",98:"\b",116:"	",110:"\n",102:"\f",114:"\r"},q=function(){throw N=U=null,f()},Y=function(){for(var t,e,n,r,i,o=U,a=o.length;a>N;)switch(i=o.charCodeAt(N)){case 9:case 10:case 13:case 32:N++;break;case 123:case 125:case 91:case 93:case 58:case 44:return t=C?o.charAt(N):o[N],N++,t;case 34:for(t="@",N++;a>N;)if(i=o.charCodeAt(N),32>i)q();else if(92==i)switch(i=o.charCodeAt(++N)){case 92:case 34:case 47:case 98:case 116:case 110:case 102:case 114:t+=z[i],N++;break;case 117:for(e=++N,n=N+4;n>N;N++)i=o.charCodeAt(N),i>=48&&57>=i||i>=97&&102>=i||i>=65&&70>=i||q();t+=D("0x"+o.slice(e,N));break;default:q()}else{if(34==i)break;for(i=o.charCodeAt(N),e=N;i>=32&&92!=i&&34!=i;)i=o.charCodeAt(++N);t+=o.slice(e,N)}if(34==o.charCodeAt(N))return N++,t;q();default:if(e=N,45==i&&(r=!0,i=o.charCodeAt(++N)),i>=48&&57>=i){for(48==i&&(i=o.charCodeAt(N+1),i>=48&&57>=i)&&q(),r=!1;a>N&&(i=o.charCodeAt(N),i>=48&&57>=i);N++);if(46==o.charCodeAt(N)){for(n=++N;a>n&&(i=o.charCodeAt(n),i>=48&&57>=i);n++);n==N&&q(),N=n}if(i=o.charCodeAt(N),101==i||69==i){for(i=o.charCodeAt(++N),(43==i||45==i)&&N++,n=N;a>n&&(i=o.charCodeAt(n),i>=48&&57>=i);n++);n==N&&q(),N=n}return+o.slice(e,N)}if(r&&q(),"true"==o.slice(N,N+4))return N+=4,!0;if("false"==o.slice(N,N+5))return N+=5,!1;if("null"==o.slice(N,N+4))return N+=4,null;q()}return"$"},F=function(t){var e,n;if("$"==t&&q(),"string"==typeof t){if("@"==(C?t.charAt(0):t[0]))return t.slice(1);if("["==t){for(e=[];t=Y(),"]"!=t;n||(n=!0))n&&(","==t?(t=Y(),"]"==t&&q()):q()),","==t&&q(),e.push(F(t));return e}if("{"==t){for(e={};t=Y(),"}"!=t;n||(n=!0))n&&(","==t?(t=Y(),"}"==t&&q()):q()),(","==t||"string"!=typeof t||"@"!=(C?t.charAt(0):t[0])||":"!=Y())&&q(),e[t.slice(1)]=F(Y());return e}q()}return t},V=function(t,e,n){var r=W(t,e,n);r===g?delete t[e]:t[e]=r},W=function(t,e,n){var r,i=t[e];if("object"==typeof i&&i)if(_.call(i)==A)for(r=i.length;r--;)V(i,r,n);else y(i,function(t){V(i,t,n)});return n.call(t,e,i)};e.parse=function(t,e){var n,r;return N=0,U=""+t,n=F(Y()),"$"!=Y()&&q(),N=U=null,e&&_.call(e)==w?W((r={},r[""]=n,r),"",e):n}}}return e.runInContext=i,e}var o="function"==typeof t&&t.amd,a={"function":!0,object:!0},s=a[typeof r]&&r&&!r.nodeType&&r,u=a[typeof window]&&window||this,c=s&&a[typeof n]&&n&&!n.nodeType&&"object"==typeof e&&e;if(!c||c.global!==c&&c.window!==c&&c.self!==c||(u=c),s&&!o)i(u,s);else{var f=u.JSON,l=u.JSON3,h=!1,p=i(u,u.JSON3={noConflict:function(){return h||(h=!0,u.JSON=f,u.JSON3=l,f=l=null),p}});u.JSON={parse:p.parse,stringify:p.stringify}}o&&t(function(){return p})}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],60:[function(t,e,n){function r(t,e){var n=[];e=e||0;for(var r=e||0;r<t.length;r++)n[r-e]=t[r];return n}e.exports=r},{}],61:[function(e,n,r){(function(e){!function(i){function o(t){for(var e,n,r=[],i=0,o=t.length;o>i;)e=t.charCodeAt(i++),e>=55296&&56319>=e&&o>i?(n=t.charCodeAt(i++),56320==(64512&n)?r.push(((1023&e)<<10)+(1023&n)+65536):(r.push(e),i--)):r.push(e);return r}function a(t){for(var e,n=t.length,r=-1,i="";++r<n;)e=t[r],e>65535&&(e-=65536,i+=b(e>>>10&1023|55296),e=56320|1023&e),i+=b(e);return i}function s(t){if(t>=55296&&57343>=t)throw Error("Lone surrogate U+"+t.toString(16).toUpperCase()+" is not a scalar value")}function u(t,e){return b(t>>e&63|128)}function c(t){if(0==(4294967168&t))return b(t);var e="";return 0==(4294965248&t)?e=b(t>>6&31|192):0==(4294901760&t)?(s(t),e=b(t>>12&15|224),e+=u(t,6)):0==(4292870144&t)&&(e=b(t>>18&7|240),e+=u(t,12),e+=u(t,6)),e+=b(63&t|128)}function f(t){for(var e,n=o(t),r=n.length,i=-1,a="";++i<r;)e=n[i],a+=c(e);return a}function l(){if(m>=_)throw Error("Invalid byte index");var t=255&v[m];if(m++,128==(192&t))return 63&t;throw Error("Invalid continuation byte")}function h(){var t,e,n,r,i;if(m>_)throw Error("Invalid byte index");if(m==_)return!1;if(t=255&v[m],m++,0==(128&t))return t;if(192==(224&t)){var e=l();if(i=(31&t)<<6|e,i>=128)return i;throw Error("Invalid continuation byte")}if(224==(240&t)){if(e=l(),n=l(),i=(15&t)<<12|e<<6|n,i>=2048)return s(i),i;throw Error("Invalid continuation byte")}if(240==(248&t)&&(e=l(),n=l(),r=l(),i=(15&t)<<18|e<<12|n<<6|r,i>=65536&&1114111>=i))return i;throw Error("Invalid UTF-8 detected")}function p(t){v=o(t),_=v.length,m=0;for(var e,n=[];(e=h())!==!1;)n.push(e);return a(n)}var d="object"==typeof r&&r,y="object"==typeof n&&n&&n.exports==d&&n,g="object"==typeof e&&e;(g.global===g||g.window===g)&&(i=g);var v,_,m,b=String.fromCharCode,w={version:"2.0.0",encode:f,decode:p};if("function"==typeof t&&"object"==typeof t.amd&&t.amd)t(function(){return w});else if(d&&!d.nodeType)if(y)y.exports=w;else{var k={},E=k.hasOwnProperty;for(var S in w)E.call(w,S)&&(d[S]=w[S])}else i.utf8=w}(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],62:[function(t,e,n){"use strict";function r(t){var e="";do e=s[t%u]+e,t=Math.floor(t/u);while(t>0);return e}function i(t){var e=0;for(l=0;l<t.length;l++)e=e*u+c[t.charAt(l)];return e}function o(){var t=r(+new Date);return t!==a?(f=0,a=t):t+"."+r(f++)}for(var a,s="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),u=64,c={},f=0,l=0;u>l;l++)c[s[l]]=l;o.encode=r,o.decode=i,e.exports=o},{}],63:[function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=t("./util"),u=t("./negotiator"),c=t("events"),f=t("enum"),l=new f(["candidate","offer","answer"]),h=function(t){function e(t,n){r(this,e);var o=i(this,Object.getPrototypeOf(e).call(this));if(n=n||{},o.constructor===e)throw new TypeError("Cannot construct Connection instances directly");return o.options=n,o.open=!1,o.type=void 0,o.metadata=o.options.metadata,o.remoteId=t,o._negotiator=new u(o),o._idPrefix="c_",o._randomIdSuffix=s.randomToken(),o._setupNegotiatorMessageHandlers(),o}return o(e,t),a(e,[{key:"handleAnswer",value:function(t){this._pcAvailable?(this._negotiator.handleAnswer(t.answer),this.open=!0):(s.log("Queuing ANSWER message in "+this.id+" from "+this.remoteId),this._queuedMessages.push({type:s.MESSAGE_TYPES.ANSWER.key,payload:t}))}},{key:"handleCandidate",value:function(t){this._pcAvailable?this._negotiator.handleCandidate(t.candidate):(s.log("Queuing CANDIDATE message in "+this.id+" from "+this.remoteId),this._queuedMessages.push({type:s.MESSAGE_TYPES.CANDIDATE.key,payload:t}))}},{key:"_handleQueuedMessages",value:function(){var t=!0,e=!1,n=void 0;try{for(var r,i=this._queuedMessages[Symbol.iterator]();!(t=(r=i.next()).done);t=!0){var o=r.value;switch(o.type){case s.MESSAGE_TYPES.ANSWER.key:this.handleAnswer(o.payload);break;case s.MESSAGE_TYPES.CANDIDATE.key:this.handleCandidate(o.payload);break;default:s.warn("Unrecognized message type:",o.type,"from peer:",this.remoteId)}}}catch(a){e=!0,n=a}finally{try{!t&&i["return"]&&i["return"]()}finally{if(e)throw n}}this._queuedMessages=[]}},{key:"close",value:function(){this.open&&(this.open=!1,this._negotiator.cleanup(),this.emit("close"))}},{key:"_setupNegotiatorMessageHandlers",value:function(){var t=this;this._negotiator.on(u.EVENTS.answerCreated.key,function(n){var r={answer:n,dst:t.remoteId,connectionId:t.id,connectionType:t.type};t.emit(e.EVENTS.answer.key,r)}),this._negotiator.on(u.EVENTS.offerCreated.key,function(n){var r={offer:n,dst:t.remoteId,connectionId:t.id,connectionType:t.type,metadata:t.metadata};t.serialization&&(r.serialization=t.serialization),t.label&&(r.label=t.label),t.emit(e.EVENTS.offer.key,r)}),this._negotiator.on(u.EVENTS.iceCandidate.key,function(n){var r={candidate:n,dst:t.remoteId,connectionId:t.id,connectionType:t.type};t.emit(e.EVENTS.candidate.key,r)})}},{key:"id",get:function(){return this.options.connectionId||this._idPrefix+this._randomIdSuffix}},{key:"peer",get:function(){return s.warn(this.constructor.name+".peer is deprecated and may be removed from a future version. Please use "+this.constructor.name+".remoteId instead."),this.remoteId}}],[{key:"EVENTS",get:function(){return l}}]),e}(c);e.exports=h},{"./negotiator":66,"./util":70,"enum":32,events:33}],64:[function(t,e,n){(function(n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=t("./connection"),u=t("./util"),c=t("enum"),f=t("object-sizeof"),l=new c(["open","data","error"]),h=function(t){function e(t,n){r(this,e);var o=i(this,Object.getPrototypeOf(e).call(this,t,n));return o._idPrefix="dc_",o.type="data",o.label=o.options.label||o.id,o.options.serialization?o.serialization=o.options.serialization:o.serialization="binary",o._sendBuffer=[],o._receivedData={},o._queuedMessages=o.options._queuedMessages||[],o.options._payload&&(o._peerBrowser=o.options._payload.browser),o._negotiator.on("dcReady",function(t){o._dc=t,o._dc.binaryType="arraybuffer",o._setupMessageHandlers()}),o._negotiator.startConnection(o.options._payload||{originator:!0,type:"data",label:o.label}),o._pcAvailable=!0,o._handleQueuedMessages(),o}return o(e,t),a(e,[{key:"_setupMessageHandlers",value:function(){var t=this;this._dc.onopen=function(){u.log("Data channel connection success"),t.open=!0,t.emit(e.EVENTS.open.key)},this._dc.onmessage=function(e){t._handleDataMessage(e)},this._dc.onclose=function(){u.log("DataChannel closed for:",t.id),t.close()}}},{key:"_handleDataMessage",value:function(t){var n=this,r=u.unpack(t.data),i=this._receivedData[r.id];if(i||(i=this._receivedData[r.id]={size:r.size,type:r.type,name:r.name,mimeType:r.mimeType,totalParts:r.totalParts,parts:new Array(r.totalParts),receivedParts:0}),i.receivedParts++,i.parts[r.index]=r.data,i.receivedParts===i.totalParts){var o=void 0;o="file"===i.type?new File(i.parts,i.name,{type:i.mimeType}):new Blob(i.parts,{type:i.mimeType}),"binary"===this.serialization||"binary-utf8"===this.serialization?u.blobToArrayBuffer(u.pack(o),function(t){n.emit(e.EVENTS.data.key,u.unpack(t))}):"json"===this.serialization?u.blobToArrayBuffer(o,function(t){n.emit(e.EVENTS.data.key,u.unpack(t))}):"none"===this.serialization&&("string"===i.type?u.blobToBinaryString(o,function(t){n.emit(e.EVENTS.data.key,t)}):"arraybuffer"===i.type?u.blobToArrayBuffer(o,function(t){n.emit(e.EVENTS.data.key,t)}):(this.emit(e.EVENTS.data.key,o),delete this._receivedData[r.id]))}}},{key:"send",value:function(t){var r=this;this.open||this.emit(e.EVENTS.error.key,new Error("Connection is not open. You should listen for the `open` event before sending messages."));var i=void 0,o=void 0;"json"===this.serialization&&(i="json",t=u.pack(t),o=t.size),t instanceof File?(i="file",o=t.size):t instanceof Blob?(i="blob",o=t.size):t instanceof ArrayBuffer?(i="arraybuffer",o=t.byteLength):"string"==typeof t&&(i="string",o=n.byteLength(t,"utf8"));var a={id:u.randomId(),type:i,size:o,totalParts:0};"file"===i&&(a.name=t.name),t instanceof Blob&&(a.mimeType=t.type);var s=u.maxChunkSize-f(a),c=Math.ceil(o/s);a.totalParts=c;for(var l=0;c>l;l++){var h=t.slice(l*s,(l+1)*s);a.index=l,a.data=h,u.blobToArrayBuffer(u.pack(a),function(t){r._sendBuffer.push(t),r._startSendLoop()})}}},{key:"_startSendLoop",value:function(){var t=this;this.sendInterval||(this.sendInterval=setInterval(function(){var e=t._sendBuffer.shift();try{t._dc.send(e)}catch(n){t._sendBuffer.push(e)}0===t._sendBuffer.length&&(clearInterval(t.sendInterval),t.sendInterval=void 0)},u.sendInterval))}}],[{key:"EVENTS",get:function(){return l}}]),e}(s);e.exports=h}).call(this,t("buffer").Buffer)},{"./connection":63,"./util":70,buffer:8,"enum":32,"object-sizeof":44}],65:[function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=t("./connection"),u=t("./negotiator"),c=t("./util"),f=function(t){function e(t,n){r(this,e);var o=i(this,Object.getPrototypeOf(e).call(this,t,n));return o._idPrefix="mc_",o.type="media",o.localStream=o.options._stream,o._queuedMessages=o.options._queuedMessages||[],o._pcAvailable=!1,o.localStream&&(o._negotiator.startConnection({type:"media",_stream:o.localStream,originator:!0},o.options.pcConfig),o._pcAvailable=!0,o._handleQueuedMessages()),o._negotiator.on(u.EVENTS.addStream.key,function(t){c.log("Receiving stream",t),o.remoteStream=t,o.emit("stream",t)}),o}return o(e,t),a(e,[{key:"answer",value:function(t){return this.localStream?void c.warn("localStream already exists on this MediaConnection. Are you answering a call twice?"):(this.options._payload._stream=t,this.localStream=t,this._negotiator.startConnection({type:"media",_stream:this.localStream,originator:!1,offer:this.options._payload.offer},this.options.pcConfig),this._pcAvailable=!0,this._handleQueuedMessages(),void(this.open=!0))}}]),e}(s);e.exports=f},{"./connection":63,"./negotiator":66,"./util":70}],66:[function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=t("events"),u=t("enum"),c=t("../src/webrtcShim"),f=c.RTCPeerConnection,l=c.RTCIceCandidate,h=c.RTCSessionDescription,p=t("./util"),d=new u(["addStream","dcReady","offerCreated","answerCreated","iceCandidate","iceConnectionDisconnected","error"]),y=function(t){function e(){return r(this,e),i(this,Object.getPrototypeOf(e).apply(this,arguments))}return o(e,t),a(e,[{key:"startConnection",value:function(t,n){if(this._pc=this._createPeerConnection(n),this._setupPCListeners(),"media"===t.type&&t._stream&&this._pc.addStream(t._stream),t.originator){if("data"===t.type){var r=t.label||"",i=this._pc.createDataChannel(r);this.emit(e.EVENTS.dcReady.key,i)}}else this.handleOffer(t.offer)}},{key:"_createPeerConnection",value:function(t){return p.log("Creating RTCPeerConnection"),new f(t)}},{key:"_setupPCListeners",value:function(){var t=this;return this._pc.onaddstream=function(n){p.log("Received remote media stream");var r=n.stream;t.emit(e.EVENTS.addStream.key,r)},this._pc.ondatachannel=function(n){p.log("Received data channel");var r=n.channel;t.emit(e.EVENTS.dcReady.key,r)},this._pc.onicecandidate=function(n){var r=n.candidate;r?(p.log("Generated ICE candidate for:",r),t.emit(e.EVENTS.iceCandidate.key,r)):p.log("ICE canddidates gathering complete")},this._pc.oniceconnectionstatechange=function(){switch(t._pc.iceConnectionState){case"new":p.log("iceConnectionState is new");break;case"checking":p.log("iceConnectionState is checking");break;case"connected":p.log("iceConnectionState is connected");break;case"completed":p.log("iceConnectionState is completed"),t._pc.onicecandidate=function(){};break;case"failed":p.log("iceConnectionState is failed, closing connection"),t.emit(e.EVENTS.iceConnectionDisconnected.key);break;case"disconnected":p.log("iceConnectionState is disconnected, closing connection"),t.emit(e.EVENTS.iceConnectionDisconnected.key);break;case"closed":p.log("iceConnectionState is closed")}},this._pc.onnegotiationneeded=function(){p.log("`negotiationneeded` triggered"),"stable"===t._pc.signalingState&&t._makeOfferSdp().then(function(e){t._setLocalDescription(e)})},this._pc.onremovestream=function(){p.log("`removestream` triggered")},this._pc.onsignalingstatechange=function(){switch(t._pc.signalingState){case"stable":p.log("signalingState is stable");break;case"have-local-offer":p.log("signalingState is have-local-offer");break;case"have-remote-offer":p.log("signalingState is have-remote-offer");break;case"have-local-pranswer":p.log("signalingState is have-local-pranswer");break;case"have-remote-pranswer":p.log("signalingState is have-remote-pranswer");break;case"closed":p.log("signalingState is closed")}},this._pc}},{key:"_makeOfferSdp",value:function(){var t=this;return new Promise(function(e,n){t._pc.createOffer(function(t){p.log("Created offer."),e(t)},function(e){t.emitError("webrtc",e),p.log("Failed to createOffer, ",e),n(e)})})}},{key:"_setLocalDescription",value:function(t){var n=this;return new Promise(function(r,i){n._pc.setLocalDescription(t,function(){p.log("Set localDescription: offer"),n.emit(e.EVENTS.offerCreated.key,t),r(t)},function(t){n.emitError("webrtc",t),p.log("Failed to setLocalDescription, ",t),i(t)})})}},{key:"cleanup",value:function(){p.log("Cleaning up PeerConnection"),!this._pc||"closed"===this._pc.readyState&&"closed"===this._pc.signalingState||(this._pc.close(),this._pc=null)}},{key:"handleOffer",value:function(t){var n=this;this._setRemoteDescription(t).then(function(){return n._makeAnswerSdp()}).then(function(t){n.emit(e.EVENTS.answerCreated.key,t)})}},{key:"handleAnswer",value:function(t){this._setRemoteDescription(t)}},{key:"handleCandidate",value:function(t){this._pc.addIceCandidate(new l(t)),p.log("Added ICE candidate")}},{key:"_setRemoteDescription",value:function(t){var e=this;return p.log("Setting remote description "+JSON.stringify(t)),new Promise(function(n){e._pc.setRemoteDescription(new h(t),function(){p.log("Set remoteDescription:",t.type),n()},function(t){e.emitError("webrtc",t),p.log("Failed to setRemoteDescription: ",t)})})}},{key:"_makeAnswerSdp",value:function(){var t=this;return new Promise(function(e){t._pc.createAnswer(function(n){p.log("Created answer."),t._pc.setLocalDescription(n,function(){p.log("Set localDescription: answer"),e(n)},function(e){t.emitError("webrtc",e),p.log("Failed to setLocalDescription, ",e)})},function(e){t.emitError("webrtc",e),p.log("Failed to createAnswer, ",e)})})}},{key:"emitError",value:function(t,n){p.error("Error:",n),"string"==typeof n&&(n=new Error(n)),n.type=t,this.emit(e.EVENTS.error.key,n)}}],[{key:"EVENTS",get:function(){return d}}]),e}(s);e.exports=y},{"../src/webrtcShim":71,"./util":70,"enum":32,events:33}],67:[function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=t("./connection"),u=t("./dataConnection"),c=t("./mediaConnection"),f=t("./room"),l=t("./socket"),h=t("./util"),p=t("events"),d=t("enum"),y=new d(["open","error","call","connection","close","disconnected"]),g=function(t){function e(t,n){r(this,e);var o=i(this,Object.getPrototypeOf(e).call(this));o.open=!1,o.connections={},o.rooms={},o._disconnectCalled=!1,o._destroyCalled=!1,o._queuedMessages={},
o._lastPeerId=null,t&&t.constructor===Object?(n=t,t=void 0):t&&(t=t.toString());var a={debug:h.LOG_LEVELS.NONE,host:h.CLOUD_HOST,port:h.CLOUD_PORT,token:h.randomToken(),config:h.defaultConfig,turn:!0};return o.options=Object.assign({},a,n),"/"===o.options.host&&(o.options.host=window.location.hostname),h.setLogLevel(o.options.debug),h.validateId(t)?h.validateKey(o.options.key)?(o._initializeServerConnection(t),o):(o._abort("invalid-key",'API KEY "'+o.options.key+'" is invalid'),i(o)):(o._abort("invalid-id",'ID "'+t+'" is invalid'),i(o))}return o(e,t),a(e,[{key:"connect",value:function(t,e){if(this._disconnectCalled)return h.warn("You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect, or call reconnect on this peer if you believe its ID to still be available."),this.emitError("disconnected","Cannot connect to new Peer after disconnecting from server."),null;e=e||{},e.pcConfig=this._pcConfig;var n=new u(t,e);return h.log("DataConnection created in connect method"),this._addConnection(t,n),n}},{key:"call",value:function(t,e,n){if(this._disconnectCalled)return h.warn("You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect, or call reconnect on this peer if you believe its ID to still be available."),this.emitError("disconnected","Cannot connect to new Peer after disconnecting from server."),null;if(!e)return h.error("To call a peer, you must provide a stream from your browser's `getUserMedia`."),null;n=n||{},n._stream=e,n.pcConfig=this._pcConfig;var r=new c(t,n);return h.log("MediaConnection created in call method"),this._addConnection(t,r),r}},{key:"getConnection",value:function(t,e){if(this.connections[t]){var n=!0,r=!1,i=void 0;try{for(var o,a=this.connections[t][Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value;if(s.id===e)return s}}catch(u){r=!0,i=u}finally{try{!n&&a["return"]&&a["return"]()}finally{if(r)throw i}}}return null}},{key:"emitError",value:function(t,n){h.error("Error:",n),"string"==typeof n&&(n=new Error(n)),n.type=t,this.emit(e.EVENTS.error.key,n)}},{key:"destroy",value:function(){this._destroyCalled||(this._destroyCalled=!0,this._cleanup(),this.disconnect())}},{key:"disconnect",value:function(){var t=this;setTimeout(function(){t._disconnectCalled||(t._disconnectCalled=!0,t.open=!1,t.socket&&t.socket.close(),t.emit(e.EVENTS.disconnected.key,t.id),t._lastPeerId=t.id,t.id=null)},0)}},{key:"joinRoom",value:function(t,e){if(this.rooms[t])return this.rooms[t];e||(e={}),e.pcConfig=this._pcConfig;var n=new f(t,e);this.rooms[t]=n,this._setupRoomMessageHandlers(n);var r={roomName:t,roomOptions:e};return this.socket.send(h.MESSAGE_TYPES.ROOM_JOIN.key,r),n}},{key:"_setupRoomMessageHandlers",value:function(t){var e=this;t.on(f.MESSAGE_EVENTS.broadcast.key,function(t){e.socket.send(h.MESSAGE_TYPES.ROOM_DATA.key,t)}),t.on(f.MESSAGE_EVENTS.leave.key,function(t){e.socket.send(h.MESSAGE_TYPES.ROOM_LEAVE.key,t)}),t.on(f.MESSAGE_EVENTS.answer.key,function(t){e.socket.send(h.MESSAGE_TYPES.ROOM_ANSWER.key,t)})}},{key:"reconnect",value:function(){}},{key:"listAllPeers",value:function(t){t=t||function(){};var e=this,n=new XMLHttpRequest,r=this.options.secure?"https://":"http://",i=""+r+this.options.host+":"+(this.options.port+"/active/list/"+this.options.key);n.open("get",i,!0),n.onerror=function(){e._abort("server-error","Could not get peers from the server."),t([])},n.onreadystatechange=function(){if(4===n.readyState){if(401===n.status)throw t([]),new Error("It doesn't look like you have permission to list peers IDs. Please enable the SkyWay REST API on https://skyway.io/ds/");t(200===n.status?JSON.parse(n.responseText):[])}},n.send(null)}},{key:"_abort",value:function(t,e){h.error("Aborting!"),this.disconnect(),this.emitError(t,e)}},{key:"_delayedAbort",value:function(t,e){var n=this;setTimeout(function(){n._abort(t,e)},0)}},{key:"_initializeServerConnection",value:function(t){var e=this;this.socket=new l(this.options.secure,this.options.host,this.options.port,this.options.key),this._setupMessageHandlers(),this.socket.on("error",function(t){e._abort("socket-error",t)}),this.socket.on("disconnect",function(){e._disconnectCalled||(e.disconnect(),e.emitError("socket-error","Lost connection to server."))}),this.socket.start(t,this.options.token),window.onbeforeunload=function(){e.destroy()}}},{key:"_setupMessageHandlers",value:function(){var t=this;this.socket.on(h.MESSAGE_TYPES.OPEN.key,function(n){t.id=n.peerId,t.open=!0,t._pcConfig=Object.assign({},t.options.config);var r=t._pcConfig.iceServers;t._pcConfig.iceServers=r?r.slice():[];var i=n.turnCredential;if(t.options.turn===!0&&i){var o=[{protocol:"turn",transport:"tcp"},{protocol:"turns",transport:"tcp"},{protocol:"turn",transport:"udp"}],a=!0,s=!1,u=void 0;try{for(var c,f=o[Symbol.iterator]();!(a=(c=f.next()).done);a=!0){var l=c.value,p=l.protocol,d=l.transport,y={urls:p+":"+h.TURN_HOST+":"+h.TURN_PORT+"?transport="+d,url:p+":"+h.TURN_HOST+":"+h.TURN_PORT+"?transport="+d,username:t.options.key+"$"+t.id,credential:i};t._pcConfig.iceServers.push(y)}}catch(g){s=!0,u=g}finally{try{!a&&f["return"]&&f["return"]()}finally{if(s)throw u}}h.log("SkyWay TURN Server is available")}else h.log("SkyWay TURN Server is unavailable");t.emit(e.EVENTS.open.key,t.id)}),this.socket.on(h.MESSAGE_TYPES.ERROR.key,function(e){t._abort("server-error",e)}),this.socket.on(h.MESSAGE_TYPES.LEAVE.key,function(e){h.log("Received leave message from "+e),t._cleanupPeer(e)}),this.socket.on(h.MESSAGE_TYPES.EXPIRE.key,function(e){t.emitError("peer-unavailable","Could not connect to peer "+e)}),this.socket.on(h.MESSAGE_TYPES.OFFER.key,function(n){var r=n.connectionId,i=t.getConnection(n.src,r);return i?void h.warn("Offer received for existing Connection ID:",r):("media"===n.connectionType?(i=new c(n.src,{connectionId:r,_payload:n,metadata:n.metadata,_queuedMessages:t._queuedMessages[r],pcConfig:t._pcConfig}),h.log("MediaConnection created in OFFER"),t._addConnection(n.src,i),t.emit(e.EVENTS.call.key,i)):"data"===n.connectionType?(i=new u(n.src,{connectionId:r,_payload:n,metadata:n.metadata,label:n.label,serialization:n.serialization,_queuedMessages:t._queuedMessages[r],pcConfig:t._pcConfig}),h.log("DataConnection created in OFFER"),t._addConnection(n.src,i),t.emit(e.EVENTS.connection.key,i)):h.warn("Received malformed connection type: ",n.connectionType),void delete t._queuedMessages[r])}),this.socket.on(h.MESSAGE_TYPES.ROOM_OFFER.key,function(e){t.rooms[e.roomName].handleOffer(e.offer)}),this.socket.on(h.MESSAGE_TYPES.ANSWER.key,function(e){var n=t.getConnection(e.src,e.connectionId);n?n.handleAnswer(e):t._storeMessage(h.MESSAGE_TYPES.ANSWER.key,e)}),this.socket.on(h.MESSAGE_TYPES.CANDIDATE.key,function(e){var n=t.getConnection(e.src,e.connectionId);n?n.handleCandidate(e):t._storeMessage(h.MESSAGE_TYPES.CANDIDATE.key,e)}),this.socket.on(h.MESSAGE_TYPES.ROOM_USER_JOIN.key,function(e){var n=t.rooms[e.roomName];n&&n.handleJoin(e)}),this.socket.on(h.MESSAGE_TYPES.ROOM_USER_LEAVE.key,function(e){var n=t.rooms[e.roomName];n&&n.handleLeave(e)}),this.socket.on(h.MESSAGE_TYPES.ROOM_DATA.key,function(e){var n=t.rooms[e.roomName];n&&n.handleData(e)})}},{key:"_addConnection",value:function(t,e){this.connections[t]||(this.connections[t]=[]),this.connections[t].push(e),this._setupConnectionMessageHandlers(e)}},{key:"_setupConnectionMessageHandlers",value:function(t){var e=this;t.on(s.EVENTS.candidate.key,function(t){e.socket.send(h.MESSAGE_TYPES.CANDIDATE.key,t)}),t.on(s.EVENTS.answer.key,function(t){e.socket.send(h.MESSAGE_TYPES.ANSWER.key,t)}),t.on(s.EVENTS.offer.key,function(t){e.socket.send(h.MESSAGE_TYPES.OFFER.key,t)})}},{key:"_storeMessage",value:function(t,e){this._queuedMessages[e.connectionId]||(this._queuedMessages[e.connectionId]=[]),this._queuedMessages[e.connectionId].push({type:t,payload:e})}},{key:"_cleanup",value:function(){if(this.connections){var t=!0,n=!1,r=void 0;try{for(var i,o=Object.keys(this.connections)[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var a=i.value;this._cleanupPeer(a)}}catch(s){n=!0,r=s}finally{try{!t&&o["return"]&&o["return"]()}finally{if(n)throw r}}}this.emit(e.EVENTS.close.key)}},{key:"_cleanupPeer",value:function(t){if(this.connections[t]){var e=!0,n=!1,r=void 0;try{for(var i,o=this.connections[t][Symbol.iterator]();!(e=(i=o.next()).done);e=!0){var a=i.value;a.close()}}catch(s){n=!0,r=s}finally{try{!e&&o["return"]&&o["return"]()}finally{if(n)throw r}}}}}],[{key:"EVENTS",get:function(){return y}}]),e}(p);e.exports=g},{"./connection":63,"./dataConnection":64,"./mediaConnection":65,"./room":68,"./socket":69,"./util":70,"enum":32,events:33}],68:[function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=t("./util"),u=t("events"),c=t("enum"),f=t("../src/webrtcShim"),l=f.RTCPeerConnection,h=new c(["stream","open","close","peerJoin","peerLeave","error","data"]),p=new c(["broadcast","leave","answer"]),d=function(t){function e(t,n){r(this,e);var o=i(this,Object.getPrototypeOf(e).call(this));return o.name=t,o._options=n||{},o._peerId=o._options.peerId,o.localStream=o._options._stream,o.remoteStreams={},o._pcAvailable=!1,o.open=!1,o.members=[],o}return o(e,t),a(e,[{key:"handleJoin",value:function(t){var n=t.src;return n===this._peerId?(this.open=!0,void this.emit(e.EVENTS.open.key)):(this.members.push(n),void this.emit(e.EVENTS.peerJoin.key,n))}},{key:"handleLeave",value:function(t){if(this.open){var n=t.src,r=this.members.indexOf(n);this.members.splice(r,1),this.emit(e.EVENTS.peerLeave.key,n)}}},{key:"handleData",value:function(t){this.emit(e.EVENTS.data.key,t)}},{key:"send",value:function(t){if(this.open){var n={roomName:this.name,data:t};this.emit(e.MESSAGE_EVENTS.broadcast.key,n)}}},{key:"close",value:function(){if(this.open){this._pc&&this._pc.close();var t={roomName:this.name};this.emit(e.MESSAGE_EVENTS.leave.key,t),this.emit(e.EVENTS.close.key)}}},{key:"handleOffer",value:function(t){var e=this,n=new RTCSessionDescription(t);this._pc?this._pc.setRemoteDescription(n,function(){e._pc.createAnswer(function(t){e._pc.setLocalDescription(t,function(){},function(t){s.error("Problem setting localDescription",t)})},function(t){s.error("Problem creating answer",t)})},function(t){s.error("Problem setting remote offer",t)}):(this._pc=new l(this._options.pcConfig),this._setupPCListeners(),this.localStream&&this._pc.addStream(this.localStream),this._pc.setRemoteDescription(n,function(){e._pc.createAnswer(function(t){e._pc.setLocalDescription(t,function(){},function(t){s.error("Problem setting localDescription",t)})},function(t){s.error("Problem creating answer",t)})},function(t){s.error("Problem setting remote offer",t)}))}},{key:"_setupPCListeners",value:function(){var t=this;return this._pc.onaddstream=function(n){s.log("Received remote media stream");var r=n.stream;t.remoteStreams[r.id]=r,t.emit(e.EVENTS.stream.key,r)},this._pc.onicecandidate=function(n){if(!n.candidate){s.log("ICE canddidates gathering complete"),t._pc.onicecandidate=function(){};var r={roomName:t.name,answer:t._pc.localDescription};t.emit(e.MESSAGE_EVENTS.answer.key,r)}},this._pc.oniceconnectionstatechange=function(){switch(t._pc.iceConnectionState){case"new":s.log("iceConnectionState is new");break;case"checking":s.log("iceConnectionState is checking");break;case"connected":s.log("iceConnectionState is connected");break;case"completed":s.log("iceConnectionState is completed");break;case"failed":s.log("iceConnectionState is failed, closing connection");break;case"disconnected":s.log("iceConnectionState is disconnected, closing connection");break;case"closed":s.log("iceConnectionState is closed")}},this._pc.onremovestream=function(){s.log("`removestream` triggered")},this._pc.onsignalingstatechange=function(){switch(t._pc.signalingState){case"stable":s.log("signalingState is stable");break;case"have-local-offer":s.log("signalingState is have-local-offer");break;case"have-remote-offer":s.log("signalingState is have-remote-offer");break;case"have-local-pranswer":s.log("signalingState is have-local-pranswer");break;case"have-remote-pranswer":s.log("signalingState is have-remote-pranswer");break;case"closed":s.log("signalingState is closed")}},this._pc}}],[{key:"EVENTS",get:function(){return h}},{key:"MESSAGE_EVENTS",get:function(){return p}}]),e}(u);e.exports=d},{"../src/webrtcShim":71,"./util":70,"enum":32,events:33}],69:[function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=t("socket.io-client"),u=t("./util"),c=t("events"),f=function(t){function e(t,n,o,a){r(this,e);var s=i(this,Object.getPrototypeOf(e).call(this));s._isOpen=!1,s._isPeerIdSet=!1,s._queue=[],s._io=null,s._key=a;var u=t?"https://":"http://";return s._httpUrl=""+u+n+":"+o,s}return o(e,t),a(e,[{key:"start",value:function(t,e){var n=void 0;t?(n="apiKey="+this._key+"&token="+e+"&peerId="+t,this._isPeerIdSet=!0):n="apiKey="+this._key+"&token="+e,this._io=s(this._httpUrl,{"force new connection":!0,query:n}),this._setupMessageHandlers()}},{key:"send",value:function(t,e){return t?this.disconnected?void this._queue.push({type:t,message:e}):void(this._io.connected===!0&&this._io.emit(t,e)):void this._io.emit("error","Invalid message")}},{key:"close",value:function(){this.disconnected||(this._io.disconnect(),this._isOpen=!1)}},{key:"_setupMessageHandlers",value:function(){var t=this;u.MESSAGE_TYPES.enums.forEach(function(e){e.key===u.MESSAGE_TYPES.OPEN.key?t._io.on(e.key,function(n){n&&n.peerId&&(t._isOpen=!0,t._isPeerIdSet||(t._io.io.opts.query+="&peerId="+n.peerId,t._isPeerIdSet=!0),t._sendQueuedMessages(),t.emit(e.key,n))}):t._io.on(e.key,function(n){t.emit(e.key,n)})})}},{key:"_sendQueuedMessages",value:function(){var t=!0,e=!1,n=void 0;try{for(var r,i=this._queue[Symbol.iterator]();!(t=(r=i.next()).done);t=!0){var o=r.value;this.send(o.type,o.message)}}catch(a){e=!0,n=a}finally{try{!t&&i["return"]&&i["return"]()}finally{if(e)throw n}}this._queue=[]}},{key:"disconnected",get:function(){return!(this._io&&this._io.connected&&this._isOpen)}}]),e}(c);e.exports=f},{"./util":70,events:33,"socket.io-client":50}],70:[function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=t("js-binarypack"),a=t("enum"),s=t("./webrtcShim"),u=s.RTCPeerConnection,c="SkyWayJS: ",f=new a({NONE:0,ERROR:1,WARN:2,FULL:3}),l=new a(["OPEN","ERROR","OFFER","ANSWER","LEAVE","EXPIRE","CANDIDATE","ROOM_OFFER","ROOM_ANSWER","ROOM_JOIN","ROOM_LEAVE","ROOM_ANSWER","ROOM_USER_JOIN","ROOM_USER_LEAVE","ROOM_DATA"]),h=function(){function t(){r(this,t),this.CLOUD_HOST="skyway.io",this.CLOUD_PORT=443,this.TURN_HOST="turn.skyway.io",this.TURN_PORT=443,this.debug=!1,this.pack=o.pack,this.unpack=o.unpack,this.setZeroTimeout=void 0,this.LOG_LEVELS=f,this.MESSAGE_TYPES=l,this.chunkedBrowsers={Chrome:1},this.maxChunkSize=16300,this.sendInterval=1,this.defaultConfig={iceServers:[{urls:"stun:stun.skyway.io:3478",url:"stun:stun.skyway.io:3478"}],iceTransportPolicy:"all"},this.browser=function(){return window.mozRTCPeerConnection?"Firefox":window.webkitRTCPeerConnection?"Chrome":window.RTCPeerConnection?"Supported":"Unsupported"}(),this.supports=function(){if("undefined"==typeof u)return{};var t=!0,e=!1,n=void 0,r=void 0;try{n=new u(this.defaultConfig,{})}catch(i){t=!1}if(t)try{r=n.createDataChannel("_SKYWAYTEST")}catch(i){t=!1}if(t)try{r.binaryType="blob",e=!0}catch(i){}return n&&n.close(),{binaryBlob:e}}(),this._logLevel=f.NONE.value}return i(t,[{key:"setLogLevel",value:function(t){t.value&&(t=t.value);var e=10,n=parseInt(t,e);switch(n){case 0:this._logLevel=f.NONE.value;break;case 1:this._logLevel=f.ERROR.value;break;case 2:this._logLevel=f.WARN.value;break;case 3:this._logLevel=f.FULL.value;break;default:this._logLevel=f.NONE.value}}},{key:"warn",value:function(){if(this._logLevel>=f.WARN.value){var t=Array.prototype.slice.call(arguments);t.unshift(c),console.warn.apply(console,t)}}},{key:"error",value:function(){if(this._logLevel>=f.ERROR.value){var t=Array.prototype.slice.call(arguments);t.unshift(c),console.error.apply(console,t)}}},{key:"log",value:function(){if(this._logLevel>=f.FULL.value){var t=Array.prototype.slice.call(arguments);t.unshift(c),console.log.apply(console,t)}}},{key:"validateId",value:function(t){return!t||/^[A-Za-z0-9_-]+(?:[ _-][A-Za-z0-9]+)*$/.exec(t)}},{key:"validateKey",value:function(t){return!t||/^[a-z0-9]{8}(-[a-z0-9]{4}){3}-[a-z0-9]{12}$/.exec(t)}},{key:"randomToken",value:function(){return Math.random().toString(36).substr(2)}},{key:"chunk",value:function e(t){for(var n=[],r=t.size,i=0,o=0,a=Math.ceil(r/this.chunkedMTU);r>i;){var s=Math.min(r,i+this.chunkedMTU),u=t.slice(i,s),e={parentMsgId:this.chunkedCount,chunkIndex:o,chunkData:u,totalChunks:a};n.push(e),i=s,o++}return this.chunkedCount++,n}},{key:"blobToArrayBuffer",value:function(t,e){var n=new FileReader;n.onload=function(t){e(t.target.result)},n.readAsArrayBuffer(t)}},{key:"blobToBinaryString",value:function(t,e){var n=new FileReader;n.onload=function(t){e(t.target.result)},n.readAsBinaryString(t)}},{key:"binaryStringToArrayBuffer",value:function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=255&t.charCodeAt(n);return e.buffer}},{key:"randomId",value:function(){var t=16,e=Math.random().toString(36)+"0000000000000000000";return e.substr(2,t)}},{key:"isSecure",value:function(){return"https:"===location.protocol}}]),t}();e.exports=new h},{"./webrtcShim":71,"enum":32,"js-binarypack":40}],71:[function(t,e,n){"use strict";e.exports.RTCSessionDescription=window.RTCSessionDescription||window.mozRTCSessionDescription,e.exports.RTCPeerConnection=window.RTCPeerConnection||window.mozRTCPeerConnection||window.webkitRTCPeerConnection,e.exports.RTCIceCandidate=window.RTCIceCandidate||window.mozRTCIceCandidate},{}]},{},[67])(67)});